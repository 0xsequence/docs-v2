<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="/initializeTheme.iife.js"></script>
    
    <title data-react-helmet="true">Lootbox with AI Minting â€“ Sequence</title>
    <meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="Lootbox with AI Minting"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/>
    <link data-react-helmet="true" rel="icon" href="/img/favicon.ico" type="image/x-icon"/><link data-react-helmet="true" rel="icon" href="/img/favicon.ico" type="image/x-icon" media="(prefers-color-scheme: dark)"/>
    
    
    
  
    <script type="module" crossorigin src="/assets/index-D8DPLjRq.js"></script>
    <link rel="stylesheet" crossorigin href="/assets/style-CIk26EQc.css">
  </head>
  <body>
    <div id="app"><div class="vocs_DocsLayout" data-layout="docs"><a class="vocs_SkipLink vocs_utils_visuallyHidden" href="/guides/lootbox-guide#vocs-content">Skip to content</a><div class="vocs_DocsLayout_gutterLeft"><aside class="vocs_Sidebar vocs_DocsLayout_sidebar"><div class="vocs_Sidebar_logoWrapper"><div class="vocs_Sidebar_logo"><a style="align-items:center;display:flex;height:100%" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/img/sequence-composite-dark.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/img/sequence-composite-light.svg"/></a></div><div class="vocs_Sidebar_divider"></div></div><nav class="vocs_Sidebar_navigation"><div class="vocs_Sidebar_group"><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_sectionTitle">Guides</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div><div class="vocs_Sidebar_items"><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Build a Game with WebGL</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Build a Unity Game</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Build a Collectible Minting Service</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Manage Collection Metadata</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Build a Lootbox with AI Minting</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section><section class="vocs_Sidebar_section"><div class="vocs_Sidebar_sectionHeader" role="button" tabindex="0"><div class="vocs_Sidebar_item">Build a Custom Marketplace</div><div role="button" tabindex="0"><div aria-label="toggle section" class="vocs_Icon vocs_Sidebar_sectionCollapse vocs_Sidebar_sectionCollapseActive" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></div></div></section></div></section><section class="vocs_Sidebar_section vocs_Sidebar_level"><div class="vocs_Sidebar_sectionHeader"><div class="vocs_Sidebar_sectionTitle">Templates</div></div><div class="vocs_Sidebar_items"><a data-active="false" class="vocs_Sidebar_item" href="/guides/templates/template-in-game-wallet">In-game Wallet Demo</a><a data-active="false" class="vocs_Sidebar_item" href="/guides/templates/building-relaying-server">Build a Backend Transaction Manager</a></div></section></div></nav></aside></div><div class="vocs_DocsLayout_gutterTop vocs_DocsLayout_gutterTop_offsetLeftGutter"><div class="vocs_DesktopTopNav"><button class="vocs_DesktopSearch_search" type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rlj:" data-state="closed"><svg width="15" height="15" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg" style="margin-top:2px"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg>Search<div class="vocs_DesktopSearch_searchCommand"><div style="background:currentColor;transform:rotate(45deg);width:1.5px;border-radius:2px;height:100%"></div></div></button><div class="vocs_DesktopTopNav_logoWrapper"><div class="vocs_DesktopTopNav_logo"><a style="align-items:center;display:flex;height:56px;margin-top:4px" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/img/sequence-composite-dark.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/img/sequence-composite-light.svg"/></a></div></div><div class="vocs_DesktopTopNav_section"></div><div class="vocs_DesktopTopNav_section"><div class="vocs_DesktopTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:R6m5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:R6m5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Solutions</button></li><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:Ram5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:Ram5j:" data-active="true" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Guides</button></li><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:Rem5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:Rem5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">SDKs</button></li><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:Rim5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:Rim5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">APIs</button></li><li class="vocs_DesktopTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rm5j:-trigger-radix-:Rmm5j:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rm5j:-content-radix-:Rmm5j:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Support</button></li></ul></div></nav></div><div class="vocs_DesktopTopNav_divider vocs_DesktopTopNav_hideCompact"></div><div class="vocs_DesktopTopNav_group vocs_DesktopTopNav_hideCompact" style="margin-left:-8px;margin-right:-8px"><div class="vocs_DesktopTopNav_item"><button class="vocs_DesktopTopNav_button" type="button"><div aria-label="Light" class="vocs_Icon vocs_DesktopTopNav_icon vocs_utils_visibleDark" role="img" style="--vocs_Icon_size:20px"><svg width="100%" height="100%" viewBox="0 0 84 84" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Sun</title><path d="M41.8675 15.5254C43.9183 15.5254 45.6273 13.7676 45.6273 11.7168V3.80658C45.6273 1.75588 43.9183 0.046875 41.8675 0.046875C39.7679 0.046875 38.0589 1.75588 38.0589 3.80658V11.7168C38.0589 13.7676 39.7679 15.5254 41.8675 15.5254ZM60.3246 23.2402C61.7895 24.7051 64.2309 24.7539 65.7446 23.2402L71.3598 17.6738C72.7758 16.209 72.7758 13.7188 71.3598 12.2539C69.8949 10.7891 67.4535 10.7891 65.9887 12.2539L60.3246 17.918C58.9086 19.3828 58.9086 21.7754 60.3246 23.2402ZM67.9906 41.7461C67.9906 43.7969 69.7485 45.5547 71.7992 45.5547H79.6117C81.7113 45.5547 83.4202 43.7969 83.4202 41.7461C83.4202 39.6953 81.7113 37.9375 79.6117 37.9375H71.7992C69.7485 37.9375 67.9906 39.6953 67.9906 41.7461ZM60.3246 60.3008C58.9086 61.7656 58.9086 64.1582 60.3246 65.623L65.9887 71.2871C67.4535 72.7519 69.8949 72.7031 71.3598 71.2383C72.7758 69.7734 72.7758 67.332 71.3598 65.8672L65.6957 60.3008C64.2309 58.8359 61.7895 58.8359 60.3246 60.3008ZM41.8675 67.9668C39.7679 67.9668 38.0589 69.7246 38.0589 71.7754V79.6855C38.0589 81.7363 39.7679 83.4453 41.8675 83.4453C43.9183 83.4453 45.6273 81.7363 45.6273 79.6855V71.7754C45.6273 69.7246 43.9183 67.9668 41.8675 67.9668ZM23.3617 60.3008C21.8969 58.8359 19.4067 58.8359 17.9418 60.3008L12.3754 65.8184C10.9106 67.2832 10.9106 69.7246 12.3266 71.1894C13.7914 72.6543 16.2328 72.7031 17.6977 71.2383L23.3129 65.623C24.7778 64.1582 24.7778 61.7656 23.3617 60.3008ZM15.6957 41.7461C15.6957 39.6953 13.9867 37.9375 11.8871 37.9375H4.07455C1.97497 37.9375 0.265991 39.6953 0.265991 41.7461C0.265991 43.7969 1.97497 45.5547 4.07455 45.5547H11.8871C13.9867 45.5547 15.6957 43.7969 15.6957 41.7461ZM23.3129 23.2402C24.7778 21.8242 24.7778 19.334 23.3617 17.918L17.7465 12.2539C16.3305 10.8379 13.8403 10.7891 12.4242 12.2539C10.9594 13.7188 10.9594 16.209 12.3754 17.625L17.9418 23.2402C19.4067 24.7051 21.8481 24.7051 23.3129 23.2402Z" fill="currentColor"></path><path d="M41.8675 61.668C52.7073 61.668 61.7405 52.6836 61.7405 41.7461C61.7405 30.8086 52.7073 21.8242 41.8675 21.8242C30.9788 21.8242 21.9456 30.8086 21.9456 41.7461C21.9456 52.6836 30.9788 61.668 41.8675 61.668ZM41.8675 55.0273C34.5921 55.0273 28.5862 48.9727 28.5862 41.7461C28.5862 34.5195 34.5921 28.4648 41.8675 28.4648C49.0941 28.4648 55.0999 34.5195 55.0999 41.7461C55.0999 48.9727 49.0941 55.0273 41.8675 55.0273Z" fill="currentColor"></path></svg></div><div aria-label="Dark" class="vocs_Icon vocs_DesktopTopNav_icon vocs_utils_visibleLight" role="img" style="margin-top:-2px;--vocs_Icon_size:20px"><svg width="100%" height="100%" viewBox="0 0 78 82" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Moon</title><path d="M62.8455 45.9668C63.6268 45.9668 64.2127 45.3809 64.3104 44.5508C65.4334 34.3457 66.0682 33.9551 76.4197 32.3438C77.3963 32.1973 77.9334 31.7578 77.9334 30.8789C77.9334 30.0977 77.3963 29.5605 76.6151 29.4629C66.1658 27.4609 65.4334 27.4609 64.3104 17.2559C64.2127 16.377 63.6268 15.8398 62.8455 15.8398C62.0154 15.8398 61.4783 16.377 61.3807 17.207C60.1111 27.6074 59.6229 28.0957 49.0272 29.4629C48.2947 29.5117 47.7088 30.0977 47.7088 30.8789C47.7088 31.709 48.2947 32.1973 49.0272 32.3438C59.6229 34.3457 60.0623 34.4434 61.3807 44.6484C61.4783 45.3809 62.0154 45.9668 62.8455 45.9668ZM44.535 19.5508C45.0233 19.5508 45.3162 19.2578 45.4139 18.7695C46.6834 12.4707 46.5369 12.373 53.1287 11.0547C53.5682 10.957 53.91 10.7129 53.91 10.1758C53.91 9.63868 53.5682 9.39448 53.1287 9.29688C46.5369 7.97848 46.6834 7.88089 45.4139 1.58199C45.3162 1.09379 45.0233 0.800781 44.535 0.800781C43.9979 0.800781 43.7049 1.09379 43.6072 1.58199C42.3377 7.88089 42.4842 7.97848 35.9412 9.29688C35.4529 9.39448 35.1111 9.63868 35.1111 10.1758C35.1111 10.7129 35.4529 10.957 35.9412 11.0547C42.4842 12.373 42.3865 12.4707 43.6072 18.7695C43.7049 19.2578 43.9979 19.5508 44.535 19.5508Z" fill="currentColor"></path><path d="M34.3298 81.2696C48.49 81.2696 59.9157 74.043 65.0915 61.7872C65.8239 59.9806 65.5798 58.6134 64.7497 57.7833C64.0173 57.0509 62.7478 56.9044 61.3318 57.4903C58.4509 58.6134 54.9353 59.2481 50.6384 59.2481C33.695 59.2481 22.7575 48.6036 22.7575 32.2462C22.7575 27.4122 23.6853 22.6759 24.7595 20.5763C25.5407 18.9161 25.4919 17.5001 24.8083 16.67C24.0271 15.7423 22.6599 15.4005 20.7068 16.1329C8.64624 20.7716 0.345459 33.4181 0.345459 47.8712C0.345459 66.8165 14.5056 81.2696 34.3298 81.2696ZM34.4275 74.5801C18.4607 74.5801 7.03494 62.9591 7.03494 47.3341C7.03494 38.2521 10.9411 30.0489 17.6306 24.629C16.8005 27.0704 16.361 30.6837 16.361 34.1505C16.361 52.8517 29.5446 65.6935 48.8806 65.6935C52.0544 65.6935 54.9841 65.3517 56.4001 64.9122C51.615 70.918 43.4607 74.5801 34.4275 74.5801Z" fill="currentColor"></path></svg></div></button></div></div></div></div><div class="vocs_MobileTopNav"><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group"><div class="vocs_MobileTopNav_logo"><a style="align-items:center;display:flex;height:100%" href="/"><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoDark" src="/img/sequence-composite-dark.svg"/><img alt="Logo" class="vocs_NavLogo_logoImage vocs_Logo vocs_Logo_logoLight" src="/img/sequence-composite-light.svg"/></a></div></div><div class="vocs_MobileTopNav_group"><nav aria-label="Main" data-orientation="horizontal" dir="ltr" class="vocs_MobileTopNav_navigation vocs_NavigationMenu"><div style="position:relative"><ul data-orientation="horizontal" class="vocs_NavigationMenu_list" dir="ltr"><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:R3cpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:R3cpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Solutions</button></li><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:R5cpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:R5cpj:" data-active="true" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Guides</button></li><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:R7cpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:R7cpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">SDKs</button></li><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:R9cpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:R9cpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">APIs</button></li><li class="vocs_MobileTopNav_item vocs_NavigationMenu_item"><button id="radix-:Rcpj:-trigger-radix-:Rbcpj:" data-state="closed" aria-expanded="false" aria-controls="radix-:Rcpj:-content-radix-:Rbcpj:" data-active="false" class="vocs_NavigationMenu_trigger vocs_NavigationMenu_link" style="--vocs_NavigationMenu_chevronDownIcon:url(/.vocs/icons/chevron-down.svg)" data-radix-collection-item="">Support</button></li></ul></div></nav><div class="vocs_MobileTopNav_navigation vocs_MobileTopNav_navigation_compact"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rkpj:" data-state="closed" class="vocs_MobileTopNav_menuTrigger vocs_MobileTopNav_navigationItem">Guides<div aria-label="Menu" class="vocs_Icon" role="img" style="--vocs_Icon_size:11px"><svg width="100%" height="100%" viewBox="0 0 69 39" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Down</title><path d="M34.8677 38.8398C35.9419 38.8398 37.0161 38.4492 37.7485 37.6191L67.729 7.44339C68.4614 6.71089 68.9009 5.73439 68.9009 4.61129C68.9009 2.31639 67.1919 0.558594 64.897 0.558594C63.8227 0.558594 62.7485 1.04689 62.0161 1.73049L32.5727 31.2715H37.1138L7.67042 1.73049C6.93802 1.04689 5.96142 0.558594 4.83842 0.558594C2.54342 0.558594 0.785645 2.31639 0.785645 4.61129C0.785645 5.73439 1.22512 6.71089 1.95752 7.44339L31.9868 37.6191C32.768 38.4492 33.7446 38.8398 34.8677 38.8398Z" fill="currentColor"></path></svg></div></button></div></div></div><div class="vocs_MobileTopNav_section"><div class="vocs_MobileTopNav_group" style="margin-right:-8px"><button class="vocs_MobileSearch_searchButton" type="button" aria-label="Search" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R39j:" data-state="closed"><svg width="21" height="21" viewBox="0 0 15 15" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M10 6.5C10 8.433 8.433 10 6.5 10C4.567 10 3 8.433 3 6.5C3 4.567 4.567 3 6.5 3C8.433 3 10 4.567 10 6.5ZM9.30884 10.0159C8.53901 10.6318 7.56251 11 6.5 11C4.01472 11 2 8.98528 2 6.5C2 4.01472 4.01472 2 6.5 2C8.98528 2 11 4.01472 11 6.5C11 7.56251 10.6318 8.53901 10.0159 9.30884L12.8536 12.1464C13.0488 12.3417 13.0488 12.6583 12.8536 12.8536C12.6583 13.0488 12.3417 13.0488 12.1464 12.8536L9.30884 10.0159Z" fill="currentColor" fill-rule="evenodd" clip-rule="evenodd"></path></svg></button></div></div></div></div><div class="vocs_DocsLayout_gutterTopCurtain vocs_DocsLayout_gutterTopCurtain_withSidebar"><div class="vocs_DesktopTopNav_curtain"></div><div class="vocs_MobileTopNav_curtain"><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:Rqj:" data-state="closed" class="vocs_MobileTopNav_menuTrigger"><div aria-label="Menu" class="vocs_Icon" role="img" style="--vocs_Icon_size:13px"><svg width="100%" height="100%" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 79 48" fill="none"><title>Menu</title><path fill="currentColor" d="M19.528 47.232h40.87c1.952 0 3.515-1.562 3.515-3.564a3.5 3.5 0 0 0-3.516-3.516H19.528a3.501 3.501 0 0 0-3.515 3.516c0 2.002 1.562 3.564 3.515 3.564ZM12.057 27.262h55.81a3.501 3.501 0 0 0 3.516-3.516 3.501 3.501 0 0 0-3.515-3.515h-55.81a3.501 3.501 0 0 0-3.516 3.515 3.501 3.501 0 0 0 3.515 3.516ZM4.391 7.34H75.29c2.002 0 3.515-1.563 3.515-3.516 0-2.002-1.513-3.564-3.515-3.564H4.39C2.438.26.876 1.822.876 3.824A3.501 3.501 0 0 0 4.39 7.34Z"></path></svg></div><div class="vocs_MobileTopNav_menuTitle">Lootbox with AI Minting</div></button></div></div><div class="vocs_MobileTopNav_curtainGroup"><div class="vocs_MobileTopNav_curtainItem"><button type="button" aria-haspopup="dialog" aria-expanded="false" aria-controls="radix-:R5aj:" data-state="closed" class="vocs_MobileTopNav_outlineTrigger">On this page<div aria-label="On this page" class="vocs_Icon" role="img" style="--vocs_Icon_size:10px"><svg width="100%" height="100%" viewBox="0 0 39 69" fill="none" xmlns="http://www.w3.org/2000/svg"><title>Chevron Right</title><path d="M38.8697 34.7461C38.8697 33.6719 38.4791 32.6953 37.649 31.8652L7.47318 1.8848C6.74078 1.1035 5.76418 0.712891 4.64118 0.712891C2.34618 0.712891 0.588379 2.42189 0.588379 4.71679C0.588379 5.79099 1.07668 6.81639 1.76028 7.59769L29.0552 34.7461L1.76028 61.8945C1.07668 62.6758 0.588379 63.6523 0.588379 64.7754C0.588379 67.0703 2.34618 68.7793 4.64118 68.7793C5.76418 68.7793 6.74078 68.3887 7.47318 67.6074L37.649 37.627C38.4791 36.7969 38.8697 35.8203 38.8697 34.7461Z" fill="currentColor"></path></svg></div></button></div></div></div></div><div class="vocs_DocsLayout_gutterRight vocs_DocsLayout_gutterRight_withSidebar"></div><div id="vocs-content" class="vocs_DocsLayout_content vocs_DocsLayout_content_withSidebar vocs_DocsLayout_content_withTopNav"><article class="vocs_Content"><header class="vocs_Header"><h1 class="vocs_H1 vocs_Heading"><div id="lootbox-with-ai-minting" class="vocs_Heading_slugTarget"></div>Lootbox with AI Minting<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#lootbox-with-ai-minting"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h1></header>
<p class="vocs_Paragraph">Time to complete: 50-60 minutes</p>
<p class="vocs_Paragraph">In this guide we will go through the process of integrating a static html/js maze into a web3 enabled react app, leveraging tools from the Sequence Stack to mint AI generated loot from lootboxes.</p>
<aside class="vocs_Callout vocs_Callout_info"><p class="vocs_Paragraph">You can play a live version of the game <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://0xsequence-demos.github.io/demo-lootbox/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">here</a></p><p class="vocs_Paragraph">Where the full code can be found in the respective repositories</p><ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/0xsequence-demos/demo-lootbox" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Web3 react dapp</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/moskalyk/maze" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Maze frontend</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/moskalyk/diablo-loot-api" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Diablo loot API</a></li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/0xsequence-demos/demo-cloudflare-worker-lootbox/tree/master" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Cloudflare worker</a></li>
</ul></aside>
<p class="vocs_Paragraph">The tools will enable you to perform:</p>
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/lootbox-guide#1-sequence-builder-console-signup--project-creation">Sequence Builder Console Signup &amp; Project Creation</a>: Create a project with the Builder</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/lootbox-guide#2-access-key-management">Access Key Management</a>: Claim an public &amp; secret access key to interact with the Sequence stack</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/lootbox-guide#3-sequence-kit-integration">Sequence Kit Integration</a>: Integrate Sequence kit into the application</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/lootbox-guide#4-iframe-to-dapp-communication">iframe-to-Dapp Communication</a>: Send iframe messages from a seperately deployed frontend to a react app</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/lootbox-guide#5-deploy-a-contract--sponsor-gas">Deploy a Contract &amp; Sponsor gas</a>: Deploy an items contract and sponsor gas</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/lootbox-guide#6-deploy-a-cloudflare-worker">Deploy a Cloudflare Worker</a>: Deploy a cloudflare worker for gasless and no-confirmation transactions</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/lootbox-guide#7-generating-ai-prompts--images">Generating AI Prompts &amp; Images</a>: Craft AI prompts from an API and generate images to be uploaded</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/lootbox-guide#8-store-media-to-sequence-metadata-service">Store Media to Sequence Metadata service</a>: Upload collection and token metadata to Sequence</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/lootbox-guide#9-securing-your-cloudflare-worker">Securing Your Cloudflare Worker</a>: Prevent outside requests to your cloudflare worker by restricting the referrer</li>
<li class="vocs_ListItem"><a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/lootbox-guide#10-optional-naive-mint-restriction-per-wallet">(Optional) Naive Mint Restriction Per Wallet</a>: Restrict daily mints per wallet</li>
</ol>
<h2 class="vocs_H2 vocs_Heading"><div id="1-sequence-builder-console-signup--project-creation" class="vocs_Heading_slugTarget"></div>1. Sequence Builder Console Signup &amp; Project Creation<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#1-sequence-builder-console-signup--project-creation"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">First start by following <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/solutions/builder/project-management">this walk-through</a> for how to sign up to the <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://sequence.build/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Sequence Builder Console</a> and to learn how to create a project.</p>
<p class="vocs_Paragraph">In order to use certain features, like <code class="vocs_Code">Gas Sponsoring</code> and the use of the <code class="vocs_Code">Sequence Relayer</code>, you&#x27;ll need to upgrade your project plan to <code class="vocs_Code">Developer</code> <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/solutions/builder/project-settings#5-billing-settings">using this walk-through</a></p>
<h2 class="vocs_H2 vocs_Heading"><div id="2-access-key-management" class="vocs_Heading_slugTarget"></div>2. Access Key Management<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#2-access-key-management"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">Now that you have a project, you&#x27;ll need to acquire 2 different Access Keys for your project.</p>
<ol class="vocs_List vocs_List_ordered">
<li class="vocs_ListItem">Public Access Key used for the wallet &amp; transactions API, which can be done <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/solutions/builder/getting-started#step-3-optional-for-development-claim-an-api-access-key">here</a></li>
<li class="vocs_ListItem">Secret Access Key used for the Metadata Service, which can be done with the following instructions:</li>
</ol>
<p class="vocs_Paragraph">First start by accessing settings, and selecting the API Keys</p>
<p class="vocs_Paragraph"><img src="/img/builder/builder_settings_access_keys.png" alt="builder settings access keys"/></p>
<p class="vocs_Paragraph">Scroll down and select <code class="vocs_Code">+ Add Service Account</code></p>
<p class="vocs_Paragraph"><img src="/img/builder/builder_settings_add_service_account.png" alt="builder settings add service account"/></p>
<p class="vocs_Paragraph">Then change the access to <code class="vocs_Code">write</code> and <code class="vocs_Code">confirm</code></p>
<p class="vocs_Paragraph"><img src="/img/builder/builder_settings_add_service_account_confirm.png" alt="builder settings add service account"/></p>
<p class="vocs_Paragraph">Finally <code class="vocs_Code">copy</code> the key and store it in a safe location, as you will not have access to this in the future from the Builder Console.</p>
<h2 class="vocs_H2 vocs_Heading"><div id="3-sequence-kit-integration" class="vocs_Heading_slugTarget"></div>3. Sequence Kit Integration<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#3-sequence-kit-integration"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">We&#x27;ll start from scratch building up the project with the necessary peices.</p>
<p class="vocs_Paragraph">First start by creating a project folder with <code class="vocs_Code">mkdir &lt;project&gt;</code>, then <code class="vocs_Code">cd &lt;project&gt;</code> and create a <code class="vocs_Code">vite</code> project using:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span class="vocs_Span">pnpm create vite</span></span>
<span class="line vocs_Span"><span class="vocs_Span"></span></span>
<span class="line vocs_Span"><span class="vocs_Span"># or </span></span>
<span class="line vocs_Span"><span class="vocs_Span">yarn create vite</span></span>
<span class="line vocs_Span"><span class="vocs_Span"></span></span>
<span class="line vocs_Span"><span class="vocs_Span"># or </span></span>
<span class="line vocs_Span"><span class="vocs_Span">npm create vite</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Next, we&#x27;ll install the correct packages to use Sequence Kit.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span class="vocs_Span">npm install @0xsequence/kit @0xsequence/kit-wallet @0xsequence/kit-connectors wagmi ethers@5.7.2 viem 0xsequence @tanstack/react-query @0xsequence/design-system</span></span>
<span class="line vocs_Span"><span class="vocs_Span"># or</span></span>
<span class="line vocs_Span"><span class="vocs_Span">pnpm install @0xsequence/kit @0xsequence/kit-wallet @0xsequence/kit-connectors wagmi ethers@5.7.2 viem 0xsequence @tanstack/react-query @0xsequence/design-system</span></span>
<span class="line vocs_Span"><span class="vocs_Span"># or</span></span>
<span class="line vocs_Span"><span class="vocs_Span">yarn add @0xsequence/kit @0xsequence/kit-wallet @0xsequence/kit-connectors wagmi ethers@5.7.2 viem 0xsequence @tanstack/react-query @0xsequence/design-system</span></span></code></pre></div></div>
<p class="vocs_Paragraph">In the <code class="vocs_Code">/src</code> folder you&#x27;ll find a <code class="vocs_Code">main.tsx</code>, in there update the code to be the following, that incorporates the Sequence Kit connector and <code class="vocs_Code">@0xsequence/design-system</code> <code class="vocs_Code">ThemeProvider</code></p>
<p class="vocs_Paragraph">This code uses <code class="vocs_Code">arbitrum-sepolia</code> as the network, as well as the following options to login: email, google, &amp; apple.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> React </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;react&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> ReactDOM </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;react-dom/client&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> App </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;./App.tsx&#x27;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { KitProvider } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;@0xsequence/kit&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { getDefaultConnectors } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;@0xsequence/kit-connectors&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { KitWalletProvider } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;@0xsequence/kit-wallet&#x27;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { createConfig, WagmiConfig} </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;wagmi&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { QueryClient, QueryClientProvider } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;@tanstack/react-query&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { arbitrumSepolia} </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;wagmi/chains&#x27;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> PROJECT_ACCESS_KEY</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">meta</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">VITE_PROJECT_ACCESS_KEY</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> WALLET_CONNECT_ID</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">meta</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">VITE_WALLET_CONNECT_ID</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> queryClient</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> QueryClient</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Dapp</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> chains</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> [arbitrumSepolia] </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">as</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  </span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> projectAccessKey</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> PROJECT_ACCESS_KEY</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> connectors</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> getDefaultConnectors</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		walletConnectProjectId: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">WALLET_CONNECT_ID</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		defaultChainId: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">421614</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">		//@ts-ignore</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		appName: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Dungeon Crawler Lootbox Demo app&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		projectAccessKey</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	  })</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	  const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> transports</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	  const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> config</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> createConfig</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">		// @ts-ignore</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		transports,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		connectors,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		chains</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	  })</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> kitConfig</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		projectAccessKey: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">PROJECT_ACCESS_KEY</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		position: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;center&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		defaultTheme: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;dark&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		displayedAssets: [</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			{</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				contractAddress: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;0xaf8a08bf8b2945c2779ae507dade15985ea11fbc&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// or include your contract address here</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				chainId: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">421614</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		],</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		signIn: {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			projectName: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Demo Dungeon Crawler Lootbox&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			showEmailInput: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			socialAuthOptions: [</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;google&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;apple&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">],</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			walletAuthOptions: [</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;wallet-connect&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">]</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">WagmiConfig config</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">{config}</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">QueryClientProvider client</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">{queryClient}</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> </span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">			&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">KitProvider config</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">{kitConfig}</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				&lt;</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">KitWalletProvider</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">					&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">App </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">/&gt;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">				&lt;/</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">KitWalletProvider</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">			&lt;/</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">KitProvider</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	  	&lt;/</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">QueryClientProvider</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    &lt;/</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">WagmiConfig</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  );</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">ReactDOM.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">createRoot</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(document.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">getElementById</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;root&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">).</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">render</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">React.StrictMode</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">Dapp </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">/&gt;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	&lt;/</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">React.StrictMode</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Once your <code class="vocs_Code">main.tsx</code> is ready, lets create a login button</p>
<p class="vocs_Paragraph">In <code class="vocs_Code">App.tsx</code> use the following code that checks to see if a user is connected, and makes 2 different screens appear given this information.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {useEffect} </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;react&#x27;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { useOpenConnectModal } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;@0xsequence/kit&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { useDisconnect, useAccount } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;wagmi&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { useOpenWalletModal } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;@0xsequence/kit-wallet&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> </span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> App</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() {</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">setOpenConnectModal</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> useOpenConnectModal</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">setOpenWalletModal</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> useOpenWalletModal</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">isConnected</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">address</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> useAccount</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// address can be used to mint</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">disconnect</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> useDisconnect</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> </span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">	useEffect</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> </span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  }, [isConnected])</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> </span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">  return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    &lt;&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      {</span></span>
<span class="line vocs_Span"><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">      isConnected</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> ? </span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        &lt;&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">          &lt;</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">button</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span"> onClick</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">{() =&gt; </span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">setOpenWalletModal</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)}</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">open wallet</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;/</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">button</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">          &lt;</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">button</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span"> onClick</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">{() =&gt; </span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">disconnect</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()}</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">disconnect</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;/</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">button</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        &lt;/&gt; </span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      : </span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        &lt;&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">          &lt;</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">button</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span"> onClick</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">{() =&gt; </span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">setOpenConnectModal</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)}</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">connect</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;/</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">button</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        &lt;/&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">      }</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    &lt;/&gt;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">  )</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">export</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> default</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> App</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Then, include a <code class="vocs_Code">.env</code> file in the root of your project, adding it to <code class="vocs_Code">.gitignore</code>, then updating the file with the following values</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span class="vocs_Span">VITE_PROJECT_ACCESS_KEY=</span></span>
<span class="line vocs_Span"><span class="vocs_Span">VITE_WALLET_CONNECT_ID=</span></span>
<span class="line vocs_Span"><span class="vocs_Span">VITE_TRUSTED_IFRAME_ORIGIN=https://localhost:8002</span></span></code></pre></div></div>
<aside class="vocs_Callout vocs_Callout_warning"><p class="vocs_Paragraph">All environment variables must start with <code class="vocs_Code">VITE_</code> to be included</p></aside>
<p class="vocs_Paragraph">Run your code with the following command in the root folder and give it a try</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span class="vocs_Span">pnpm run dev</span></span></code></pre></div></div>
<h2 class="vocs_H2 vocs_Heading"><div id="4-iframe-to-dapp-communication" class="vocs_Heading_slugTarget"></div>4. iframe-to-Dapp Communication<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#4-iframe-to-dapp-communication"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">The way the application is setup, a react app communicates to another frontend app process, so that integration between software environments can be made possible.</p>
<p class="vocs_Paragraph">This learning can be useful for building any iframe cross application design.</p>
<p class="vocs_Paragraph">With iframes, there&#x27;s a native feature that allows you to pass messages between url and integrated frames.</p>
<p class="vocs_Paragraph">In order to accomplish this one must setup a <code class="vocs_Code">producer</code> message from the included child app, and a <code class="vocs_Code">consumer</code> recieving handler, with a restricted origin to prevent others from loading malicious iframes into your application.</p>
<p class="vocs_Paragraph">Begin by cloning down <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/moskalyk/maze" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">this repository</a> and running it with installing the packages <code class="vocs_Code">pnpm install</code> and running with <code class="vocs_Code">node server.js</code> to listen on <code class="vocs_Code">http:localhost:8002</code></p>
<h3 class="vocs_H3 vocs_Heading"><div id="iframe-producer-message-from-child-window" class="vocs_Heading_slugTarget"></div>iframe Producer Message From Child Window<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#iframe-producer-message-from-child-window"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">With a single line of code contained within a click handler, one can send a message to the parent window, with a describing message that can pass any JSON object to the hoisting scope</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">function</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> onMouseClick</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">event</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">){</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	...</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">	// if clicked event intersects a lootbox</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	window.parent.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">postMessage</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({portal: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;loot&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;http://localhost:5173/demo-lootbox/&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="dapp-consumer-handler-in-parent-window" class="vocs_Heading_slugTarget"></div>Dapp Consumer Handler In Parent Window<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#dapp-consumer-handler-in-parent-window"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Next we create a message event listener where the <code class="vocs_Code">window.addEventListener(&#x27;message&#x27;, callback)</code> is a method used in web development to listen for message events. It allows different browsing contexts, such as iframes, pop-up windows, or other tabs within the same browser, to communicate securely.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> iframeToAppChannel</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">event</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> trustedOrigin</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">meta</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">VITE_TRUSTED_IFRAME_ORIGIN</span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> // You would change this to your production deployment</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (event.origin </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!==</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> trustedOrigin) {</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">		// Security check: Ensure that the message is from a trusted source. </span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(event.data.portal </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">==</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;loot&#x27;</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> &amp;&amp;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> isConnected){</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">		// generate loot for the user</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">		generate</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() </span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">window.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">addEventListener</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;message&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, iframeToAppChannel);</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Now if you were to trigger the click handler in the included iframe, the parent react app would recieve it for further processing, like with any connected wallet.</p>
<h2 class="vocs_H2 vocs_Heading"><div id="5-deploy-a-contract--sponsor-gas" class="vocs_Heading_slugTarget"></div>5. Deploy A Contract &amp; Sponsor Gas<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#5-deploy-a-contract--sponsor-gas"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">When deploying your contract, the recommended approach is to use an <code class="vocs_Code">ERC1155</code> over an <code class="vocs_Code">ERC721</code>. The benefits of using an <code class="vocs_Code">ERC1155</code></p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem">random spaced <code class="vocs_Code">tokenID</code> to allow for parallelized minting</li>
<li class="vocs_ListItem">option via consent to apply governance to mint additional tokens of the same <code class="vocs_Code">tokenID</code></li>
</ul>
<p class="vocs_Paragraph">However, if you plan to only ever mint a single token of the generated media and you prefer technical security in managing parrallized minting over managing the security of the transactions API private key (which can always be rotated by setting a new collectible <code class="vocs_Code">role</code> via the <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://sequence.build/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Sequence Builder</a>) an ERC721 might be better suited.</p>
<p class="vocs_Paragraph">To deploy a contract, you can follow <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/solutions/collectibles/contracts/deploy-an-item-collection">this guide</a> to deploy your ERC1155, and update your <code class="vocs_Code">wrangler.toml</code> with the <code class="vocs_Code">CONTRACT_ADDRESS</code></p>
<p class="vocs_Paragraph">And to sponsor gas, follow <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/solutions/builder/gas-tank#watch-the-gas-tank-in-action-in-builder">this guide</a></p>
<h2 class="vocs_H2 vocs_Heading"><div id="6-deploy-a-cloudflare-worker" class="vocs_Heading_slugTarget"></div>6. Deploy A Cloudflare Worker<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#6-deploy-a-cloudflare-worker"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<h3 class="vocs_H3 vocs_Heading"><div id="minting-a-token" class="vocs_Heading_slugTarget"></div>Minting A Token<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#minting-a-token"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">If you want to learn how to deploy a Cloudflare Worker from scratch, you can follow <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/mint-collectibles-serverless">this default guide</a> on minting a serverless gasless minter with your deployed <code class="vocs_Code">ERC1155</code> contract</p>
<h3 class="vocs_H3 vocs_Heading"><div id="add-lootbox-object-composition" class="vocs_Heading_slugTarget"></div>Add Lootbox Object Composition<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#add-lootbox-object-composition"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">Next, ensure that you can mint a token by making a request to the cloudflare API. Then, add the additional object composition design to include the lootbox specific functions, where the prior cloudflare worker can be integrated into this template <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/0xsequence-demos/demo-cloudflare-worker-lootbox/tree/template" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">template lootbox cloudflare worker</a>.</p>
<p class="vocs_Paragraph">And as seen in the <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/0xsequence-demos/demo-cloudflare-worker-lootbox/blob/master/proud-darkness-022a/src/index.ts#L505" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">completed lootbox code</a>, the <code class="vocs_Code">callContract</code> is would need to be integrated into the <code class="vocs_Code">template</code></p>
<p class="vocs_Paragraph">In this codebase (which has optional design), we use a style of javascript to assemble javascript object in a functional manner which can be seen here</p>
<p class="vocs_Paragraph">Where in the following sections, we will complete the functions:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><code class="vocs_Code">ProcessInferencePool</code>: used to source loot metadata seed values from an external api</li>
<li class="vocs_ListItem"><code class="vocs_Code">Inference</code>: used to generate AI imagery and to check the status an in-progress inference</li>
<li class="vocs_ListItem"><code class="vocs_Code">Upload</code>: used to store metadata for future retrieval</li>
</ul>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">let</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> lootbox </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> ProcessInferencePool</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">				Inference</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">					Time</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">						Strings</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">							Upload</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">								{</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">									env: env</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">								}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">							)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">						)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">					)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			)</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Using this design, we give appreciation to the following wizard and staff meme, to align with ones values and inherently transfer value of knowing who you are into your collection:</p>
<div style="display:flex;justify-content:center;align-items:center;width:100%"><img src="/img/guides/lootbox/you_shall_not_pass_meme.png" width="400px" alt="You Shall Not Pass Meme"/></div>
<h2 class="vocs_H2 vocs_Heading"><div id="7-generating-ai-prompts--images" class="vocs_Heading_slugTarget"></div>7. Generating AI Prompts &amp; Images<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#7-generating-ai-prompts--images"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">In the template, we&#x27;ve included code to call an already deployed API and code to parse the response that is free to call yourself</p>
<p class="vocs_Paragraph">With this API, we will showcase how to generate images from <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://scenario.gg/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Scenario.gg</a> by passing in a prompt.</p>
<p class="vocs_Paragraph">This can be accomplished by completing the <code class="vocs_Code">getInferenceWithItem</code> function and passing in a <code class="vocs_Code">prompt</code> which is basically the generated loot <code class="vocs_Code">name</code> and <code class="vocs_Code">type</code>, as well as some additional parameters</p>
<aside class="vocs_Callout vocs_Callout_info"><p class="vocs_Paragraph">For this guide we landed on the <code class="vocs_Code">EulerDiscreteScheduler</code> scheduler type based on quality and time, but if you want to experiment with using additional schedulers, you can use <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://github.com/moskalyk/scenario-gg-benchmark-cli" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">this custom local cli</a> and check the results in the <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined vocs_ExternalLink" href="https://scenario.gg/" target="_blank" rel="noopener noreferrer" style="--vocs_ExternalLink_iconUrl:url(/.vocs/icons/arrow-diagonal.svg)">Scenario.gg</a> dashboard</p></aside>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">...</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span">	getInferenceWithItem</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">prompt</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> Promise</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">( </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">res</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">			fetch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`https://api.cloud.scenario.com/v1/models/${</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">base</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">env</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">SCENARIO_MODEL_ID</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}/inferences`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				method: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;POST&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				headers: {</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">					&#x27;Authorization&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`Basic ${</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">base</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">env</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">SCENARIO_API_KEY</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">					&#x27;accept&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;application/json&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">					&#x27;content-type&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;application/json&#x27;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				},</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				body: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">JSON</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">stringify</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">							&quot;parameters&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: {</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">							&quot;numSamples&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">1</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">							&quot;qualityBoostScale&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">4</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">							&quot;qualityBoost&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">false</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">							&quot;type&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;txt2img&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">							&quot;disableMerging&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">false</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">							&quot;hideResults&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">false</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">							&quot;referenceAdain&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">false</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">							&quot;intermediateImages&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">false</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">							&quot;scheduler&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;EulerDiscreteScheduler&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">							&quot;referenceAttn&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">false</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">							&quot;prompt&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">: prompt </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">+</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27; single object on black background no people&#x27;</span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span"> // update this to your choosing</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">						}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">					})</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			})</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">then</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">response</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> response.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">json</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">())</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">then</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">((</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">data</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">				res</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({inferenceId: data.inference.id})</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			})</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">catch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">error</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Error:&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, error));</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		})</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">...</span></span></code></pre></div></div>
<p class="vocs_Paragraph">and calling the method like so to return an <code class="vocs_Code">inferenceId</code></p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	...</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(mint){</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		...</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	} </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">else</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> loot</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> lootbox.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">generate</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> inferenceId</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> lootbox.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">getInferenceWithItem</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(loot.loot.name </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">+</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot; &quot;</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> +</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> loot.loot.type)</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		...</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	...</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Once we have the <code class="vocs_Code">inferenceId</code> we can call poll the inference status</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> pollInferenceStatus</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">res</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	let</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> status </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	let</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> inferenceData</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> null</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">	// checking if the status is succeeded or failed</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	while</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">[</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;succeeded&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;failed&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">].</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">includes</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(status)) {</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">		// Fetch the inference details</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		try</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">			const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> inferenceResponse</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> fetch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`https://api.cloud.scenario.com/v1/models/Fm1gtd_gRwmopwj2gyWtUA/inferences/${</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">inferenceId</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				method: </span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;GET&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				headers</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			});</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">			if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (inferenceResponse.ok) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">log</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(inferenceResponse.statusText)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				inferenceData </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> inferenceResponse.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">json</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		}</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">catch</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(err){</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">log</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(err)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		status </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> inferenceData.inference.status;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">log</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`Inference status: ${</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">status</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">		// Wait for a certain interval before polling again</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		await</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> Promise</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">resolve</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =&gt;</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> setTimeout</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(resolve, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">5000</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)); </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Polling every 5 seconds</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">	// Handle the final status</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (status </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">===</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;succeeded&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">log</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Inference succeeded!&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">log</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(inferenceData); </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Print inference data</span></span>
<span class="line vocs_Span"><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">		res</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(inferenceData)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	} </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">else</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">log</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Inference failed!&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">log</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(inferenceData); </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Print inference data</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		throw</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Error</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&quot;Scenario API Failed&quot;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">};</span></span></code></pre></div></div>
<p class="vocs_Paragraph">and call the <code class="vocs_Code">getInferenceStatus</code> with the <code class="vocs_Code">inferenceId</code> passed in, where when you receive the response, you can obtain the image url with <code class="vocs_Code">resObject.inference.images[0].url</code></p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	...</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(mint){</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		...</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	} </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">else</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> loot</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> lootbox.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">generate</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> inferenceId</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> lootbox.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">getInferenceWithItem</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(loot.loot.name </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">+</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &quot; &quot;</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> +</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> loot.loot.type)</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> resObject</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> lootbox.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">getInferenceStatus</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(inferenceId)</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		console.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">log</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(resObject.inference.images[</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">].url) </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// prints url</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		...</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	...</span></span></code></pre></div></div>
<h2 class="vocs_H2 vocs_Heading"><div id="8-store-media-to-sequence-metadata-service" class="vocs_Heading_slugTarget"></div>8. Store Media to Sequence Metadata Service<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#8-store-media-to-sequence-metadata-service"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">With our media <code class="vocs_Code">url</code> in hand, we can move onto storing the asset to the <code class="vocs_Code">Sequence Metadata Service</code></p>
<p class="vocs_Paragraph">Complete and integrate <a class="vocs_Anchor vocs_Link vocs_Link_accent_underlined" href="/guides/metadata-guide">this guide</a> in order to build a Serverless Media Service that uses Cloudflare Workers</p>
<p class="vocs_Paragraph">Then once complete, pass the stored media url to the frontend</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	...</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> response</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> someStoreFunction</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">...</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Response</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">JSON</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">stringify</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">...</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> image: response.url, tokenID: response.tokenID}), { status: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">200</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> });</span></span></code></pre></div></div>
<h2 class="vocs_H2 vocs_Heading"><div id="9-securing-your-cloudflare-worker" class="vocs_Heading_slugTarget"></div>9. Securing Your Cloudflare Worker<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#9-securing-your-cloudflare-worker"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">In order to secure your cloudflare worker to only process requests from a certain frontend origin, you can simple check the <code class="vocs_Code">request.headers</code> for the <code class="vocs_Code">Referrer</code> value and compare against the <code class="vocs_Code">CLIENT_URL</code> in the <code class="vocs_Code">wrangler.toml</code></p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">async</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> function</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> handleRequest</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">request</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">env</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Env</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">ctx</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> ExecutionContext</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> originUrl</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> URL</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(request.url);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> referer</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> request.headers.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">get</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Referer&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">);</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(referer.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">toString</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">==</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">CLIENT_URL</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">){</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		...</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	} </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">else</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Response</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">&#x27;Bad Origin&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, { status: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">500</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> }); </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// Handle errors</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div>
<h2 class="vocs_H2 vocs_Heading"><div id="10-optional-naive-mint-restriction-per-wallet" class="vocs_Heading_slugTarget"></div>10. (Optional) Naive mint restriction per wallet<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#10-optional-naive-mint-restriction-per-wallet"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h2>
<p class="vocs_Paragraph">As an option to prevent overuse of the lootbox minting from specific wallets, a parameter called <code class="vocs_Code">DAILY_MINT_RESTRICTION</code> can be set in the <code class="vocs_Code">wrangler.toml</code> as a maximum mint allowance per day. And, if you feel it&#x27;s necessary adding an <code class="vocs_Code">ADMIN</code> to your protocol, to be able to in the future mint to a marketplace, this can be included too.</p>
<p class="vocs_Paragraph">These features can be implemented in the code with the following steps:</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">async</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> function</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> handleRequest</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">request</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">env</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Env</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">ctx</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> ExecutionContext</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	...</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> </span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> payload</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> request.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">json</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">address</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">tokenID</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> }</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> payload</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">	// check for admin</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(address.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">toLowerCase</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">() </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!=</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">ADMIN</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">toLowerCase</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()){</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">		// check for daily mint allowance</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!await</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> hasDailyMintAllowance</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(env, address)){</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">			return</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Response</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">JSON</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">stringify</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({limitExceeded: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}), { status: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">400</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> })</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	...</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div>
<p class="vocs_Paragraph">Where <code class="vocs_Code">hasDailyMintAllowance</code> is broken down into 2 functions:</p>
<ul class="vocs_List vocs_List_unordered">
<li class="vocs_ListItem"><code class="vocs_Code">fullPaginationDay</code> of transactions of the users <code class="vocs_Code">address</code></li>
<li class="vocs_ListItem"><code class="vocs_Code">mintCount</code> that corresponds to the <code class="vocs_Code">from</code> being the <code class="vocs_Code">0x</code> address</li>
</ul>
<h3 class="vocs_H3 vocs_Heading"><div id="full-pagination-of-indexer-for-a-day" class="vocs_Heading_slugTarget"></div>Full Pagination Of Indexer For A Day<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#full-pagination-of-indexer-for-a-day"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<aside class="vocs_Callout vocs_Callout_info"><p class="vocs_Paragraph">As an aside, the Sequence Indexer stack only holds 30 days of transactions for this period, so you can extend the time frame from a day up to this max</p></aside>
<p class="vocs_Paragraph">In order to use the Sequence Indexer, we&#x27;ll need to <code class="vocs_Code">pnpm install @0xsequence/indexer</code></p>
<p class="vocs_Paragraph">Then, to implement we use a while loop that gets the first batch of transactions and the <code class="vocs_Code">page.after</code> value from the indexer, and continously checks if the timestamp is less than 24 hours appending to a temporary array for each pass. This ensures we get all of the available transactions.</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">import</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> { SequenceIndexer } </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">from</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;@0xsequence/indexer&#x27;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> isLessThan24Hours</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">isoDate</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> dateProvided</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Date</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(isoDate);</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> currentDate</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> Date</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">();</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> twentyFourHours</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> 24</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> *</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> 60</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> *</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> 60</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> *</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> 1000</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">; </span><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">// 24 hours in milliseconds</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // Calculate the difference in milliseconds</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> difference</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> currentDate </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">-</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> dateProvided;</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // Check if the difference is less than 24 hours</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> difference </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> twentyFourHours </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&amp;&amp;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> difference </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&gt;</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> 0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> fullPaginationDay</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">env</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Env</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">address</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> txs</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> []</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> indexer</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> new</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> SequenceIndexer</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">`https://{</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">env</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">CHAIN_HANDLE</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span">}-indexer.sequence.app`</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">PROJECT_ACCESS_KEY</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">)</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> filter</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        accountAddress: address,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    };</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // query Sequence Indexer for all token transaction history</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	let</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> txHistory</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	let</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> firstLoop </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    let</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> finished </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> true</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">;</span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">    // if there are more transactions to log, proceed to paginate</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    while</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(firstLoop </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">||</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">finished </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&amp;&amp;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> txHistory.page.more)){  </span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(firstLoop){</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			firstLoop </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> false</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			txHistory </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> indexer.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">getTransactionHistory</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				filter: filter,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				page: { pageSize: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">50</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			})</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">			for</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">let</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> i </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> 0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">; i </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> txHistory.transactions.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">length</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">; i</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">++</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">){</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">				if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">isLessThan24Hours</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(txHistory.transactions[i].timestamp)){</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">					finished </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> true</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				txs.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">push</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(txHistory.transactions[i])</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        txHistory </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> indexer.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">getTransactionHistory</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">({</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">            filter: filter,</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">            page: { </span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">                pageSize: </span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">50</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span></span>
<span class="line vocs_Span"><span style="color:#6A737D;--shiki-dark:#768390" class="vocs_Span">                // use the after cursor from the previous indexer call</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">                after: txHistory</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.page</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.after</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> </span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">            }</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">        })</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		for</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">let</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> i </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> 0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">; i </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> txHistory.transactions.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">length</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">; i</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">++</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">){</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">			if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">!</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">isLessThan24Hours</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(txHistory.transactions[i].timestamp)){</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">				finished </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> true</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			txs.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">push</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(txHistory.transactions[i])</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		}</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">    }</span></span>
<span class="line vocs_Span" data-empty-line="true"> </span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">    return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> txs</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="mint-count-for-a-day" class="vocs_Heading_slugTarget"></div>Mint Count For A Day<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#mint-count-for-a-day"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<p class="vocs_Paragraph">All collectibles minted from the <code class="vocs_Code">ERC721</code> and <code class="vocs_Code">ERC1155</code> standard Sequence contracts are <code class="vocs_Code">from</code> the <code class="vocs_Code">0x</code> address</p>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> mintCount</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">env</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Env</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">txs</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> any</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	let</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> count </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> 0</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	for</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">let</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> i </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> 0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">; i </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> txs.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">length</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">; i</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">++</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">){</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">		if</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">			txs[i].transfers[</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">].from </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">==</span><span style="color:#032F62;--shiki-dark:#96D0FF" class="vocs_Span"> &#x27;0x0000000000000000000000000000000000000000&#x27;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> </span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">			&amp;&amp;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> txs[i].transfers[</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">0</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">].contractAddress </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">==</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">CONTRACT_ADDRESS</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">.</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span">toLowerCase</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">()</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">		) count</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">++</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">	}</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> count</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div>
<h3 class="vocs_H3 vocs_Heading"><div id="has-daily-mint-allowance" class="vocs_Heading_slugTarget"></div>Has Daily Mint Allowance<a class="vocs_Anchor vocs_Autolink" aria-hidden="true" tabindex="-1" href="/guides/lootbox-guide#has-daily-mint-allowance"><div data-autolink-icon="true" class="vocs_Div vocs_AutolinkIcon" style="--vocs_AutolinkIcon_iconUrl:url(/.vocs/icons/link.svg)"></div></a></h3>
<div class="vocs_CodeBlock"><div class="vocs_Pre_wrapper"><pre style="background-color:#fff;--shiki-dark-bg:#22272e;color:#24292e;--shiki-dark:#adbac7" tabindex="0" class="shiki shiki-themes github-light github-dark-dimmed vocs_Pre"><code class="vocs_Code"><span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">const</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> hasDailyMintAllowance</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> async</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> (</span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">env</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#6F42C1;--shiki-dark:#F69D50" class="vocs_Span"> Env</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">, </span><span style="color:#E36209;--shiki-dark:#F69D50" class="vocs_Span">address</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">:</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> string</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">) </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">=&gt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> {</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> txs</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> await</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> fullPaginationDay</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(env, address)</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	const</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span"> count</span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span"> =</span><span style="color:#6F42C1;--shiki-dark:#DCBDFB" class="vocs_Span"> mintCount</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">(env, txs)</span></span>
<span class="line vocs_Span"><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">	return</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> count </span><span style="color:#D73A49;--shiki-dark:#F47067" class="vocs_Span">&lt;</span><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span"> env.</span><span style="color:#005CC5;--shiki-dark:#6CB6FF" class="vocs_Span">DAILY_MINT_RESTRICTION</span></span>
<span class="line vocs_Span"><span style="color:#24292E;--shiki-dark:#ADBAC7" class="vocs_Span">}</span></span></code></pre></div></div>
<aside class="vocs_Callout vocs_Callout_info"><p class="vocs_Paragraph">This is not a perfect solution, but a simple one. To further the security of the assets, a proof-of-personhood approach via trusted wallet graphs or WorldId scans can further the progress of the example.</p></aside></article><footer class="vocs_Footer"><div class="vocs_Footer_container"></div><div></div></footer></div><div data-bottom-observer="true"></div></div></div>
  </body>
</html>
