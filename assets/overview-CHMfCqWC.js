import{g as Xu,f as Wa,h as ji,d as Va,j as Mt}from"./index-Cq2nclY7.js";const Zu=[{inputs:[{internalType:"bytes32",type:"bytes32"}],name:"getAlternativeSignature",outputs:[{internalType:"string",type:"string"}],stateMutability:"view",type:"function"}];var el=Object.freeze({__proto__:null,abi:Zu});const tl=[{type:"function",name:"isValidSignature",constant:!0,inputs:[{type:"bytes32"},{type:"bytes"}],outputs:[{type:"bytes4"}],payable:!1,stateMutability:"view"}],rl={isValidSignatureBytes32:"0x1626ba7e"};var nl=Object.freeze({__proto__:null,abi:tl,returns:rl});const il=[{inputs:[{internalType:"bytes",name:"error",type:"bytes"}],name:"ERC1271Revert",type:"error"},{inputs:[{internalType:"bytes",name:"error",type:"bytes"}],name:"ERC6492DeployFailed",type:"error"},{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"isValidSig",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"},{internalType:"bool",name:"allowSideEffects",type:"bool"},{internalType:"bool",name:"deployAlreadyDeployed",type:"bool"}],name:"isValidSigImpl",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"isValidSigNoThrow",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"isValidSigWithSideEffects",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_signer",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"bytes",name:"_signature",type:"bytes"}],name:"isValidSigWithSideEffectsNoThrow",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"nonpayable",type:"function"}];var sl=Object.freeze({__proto__:null,abi:il});const ol=[{type:"function",name:"deploy",constant:!1,inputs:[{type:"address"},{type:"bytes32"}],outputs:[],payable:!0,stateMutability:"payable"}];var al=Object.freeze({__proto__:null,abi:ol});const fl=[{type:"function",name:"nonce",constant:!0,inputs:[],outputs:[{type:"uint256"}],payable:!1,stateMutability:"view"},{type:"function",name:"readNonce",constant:!0,inputs:[{type:"uint256"}],outputs:[{type:"uint256"}],payable:!1,stateMutability:"view"},{type:"function",name:"updateImplementation",constant:!1,inputs:[{type:"address"}],outputs:[],payable:!1,stateMutability:"nonpayable"},{type:"function",name:"selfExecute",constant:!1,inputs:[{components:[{type:"bool",name:"delegateCall"},{type:"bool",name:"revertOnError"},{type:"uint256",name:"gasLimit"},{type:"address",name:"target"},{type:"uint256",name:"value"},{type:"bytes",name:"data"}],type:"tuple[]"}],outputs:[],payable:!1,stateMutability:"nonpayable"},{type:"function",name:"execute",constant:!1,inputs:[{components:[{type:"bool",name:"delegateCall"},{type:"bool",name:"revertOnError"},{type:"uint256",name:"gasLimit"},{type:"address",name:"target"},{type:"uint256",name:"value"},{type:"bytes",name:"data"}],type:"tuple[]"},{type:"uint256"},{type:"bytes"}],outputs:[],payable:!1,stateMutability:"nonpayable"},{type:"function",name:"createContract",inputs:[{type:"bytes"}],payable:!0,stateMutability:"payable"},{type:"function",name:"setExtraImageHash",constant:!1,inputs:[{type:"bytes32",name:"imageHash"},{type:"uint256",name:"expiration"}],outputs:[],payable:!1,stateMutability:"nonpayable"}];var ul=Object.freeze({__proto__:null,abi:fl});const ll=[{type:"function",name:"updateImageHash",constant:!0,inputs:[{type:"bytes32"}],outputs:[],payable:!1,stateMutability:"view"},{type:"function",name:"imageHash",constant:!0,inputs:[],outputs:[{type:"bytes32"}],payable:!1,stateMutability:"view"}];var cl=Object.freeze({__proto__:null,abi:ll});const hl=[{inputs:[{internalType:"address",name:"_factory",type:"address"},{internalType:"address",name:"_mainModule",type:"address"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_wallet",type:"address"},{indexed:!0,internalType:"bytes32",name:"_imageHash",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"_threshold",type:"uint256"},{indexed:!1,internalType:"bytes",name:"_signers",type:"bytes"}],name:"RequiredConfig",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"_wallet",type:"address"},{indexed:!0,internalType:"address",name:"_signer",type:"address"}],name:"RequiredSigner",type:"event"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"callBalanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callBlockNumber",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_i",type:"uint256"}],name:"callBlockhash",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[],name:"callChainId",outputs:[{internalType:"uint256",name:"id",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"callCode",outputs:[{internalType:"bytes",name:"code",type:"bytes"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"callCodeHash",outputs:[{internalType:"bytes32",name:"codeHash",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"_addr",type:"address"}],name:"callCodeSize",outputs:[{internalType:"uint256",name:"size",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callCoinbase",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"callDifficulty",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callGasLeft",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callGasLimit",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callGasPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"callOrigin",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"callTimestamp",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"knownImageHashes",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"",type:"bytes32"}],name:"lastImageHashUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lastSignerUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"",type:"address"}],name:"lastWalletUpdate",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{components:[{internalType:"bool",name:"delegateCall",type:"bool"},{internalType:"bool",name:"revertOnError",type:"bool"},{internalType:"uint256",name:"gasLimit",type:"uint256"},{internalType:"address",name:"target",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"bytes",name:"data",type:"bytes"}],internalType:"struct IModuleCalls.Transaction[]",name:"_txs",type:"tuple[]"}],name:"multiCall",outputs:[{internalType:"bool[]",name:"_successes",type:"bool[]"},{internalType:"bytes[]",name:"_results",type:"bytes[]"}],stateMutability:"payable",type:"function"},{inputs:[{internalType:"address",name:"_wallet",type:"address"},{internalType:"uint256",name:"_threshold",type:"uint256"},{components:[{internalType:"uint256",name:"weight",type:"uint256"},{internalType:"address",name:"signer",type:"address"}],internalType:"struct RequireUtils.Member[]",name:"_members",type:"tuple[]"},{internalType:"bool",name:"_index",type:"bool"}],name:"publishConfig",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_wallet",type:"address"},{internalType:"bytes32",name:"_hash",type:"bytes32"},{internalType:"uint256",name:"_sizeMembers",type:"uint256"},{internalType:"bytes",name:"_signature",type:"bytes"},{internalType:"bool",name:"_index",type:"bool"}],name:"publishInitialSigners",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"_wallet",type:"address"},{internalType:"uint256",name:"_nonce",type:"uint256"}],name:"requireMinNonce",outputs:[],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_expiration",type:"uint256"}],name:"requireNonExpired",outputs:[],stateMutability:"view",type:"function"}];var dl=Object.freeze({__proto__:null,abi:hl});const gl=[{inputs:[{internalType:"address",name:"",type:"address"}],name:"requireFreshSigner",outputs:[],stateMutability:"nonpayable",type:"function"}];var pl=Object.freeze({__proto__:null,abi:gl});const Lt={erc6492:sl,erc5719:el,erc1271:nl,factory:al,mainModule:ul,mainModuleUpgradable:cl,sequenceUtils:dl,requireFreshSigner:pl};var po={exports:{}};const ml={},vl=Object.freeze(Object.defineProperty({__proto__:null,default:ml},Symbol.toStringTag,{value:"Module"})),yl=Xu(vl);po.exports;(function(t){(function(e,r){function n(_,u){if(!_)throw new Error(u||"Assertion failed")}function i(_,u){_.super_=u;var d=function(){};d.prototype=u.prototype,_.prototype=new d,_.prototype.constructor=_}function s(_,u,d){if(s.isBN(_))return _;this.negative=0,this.words=null,this.length=0,this.red=null,_!==null&&((u==="le"||u==="be")&&(d=u,u=10),this._init(_||0,u||10,d||"be"))}typeof e=="object"?e.exports=s:r.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=yl.Buffer}catch{}s.isBN=function(u){return u instanceof s?!0:u!==null&&typeof u=="object"&&u.constructor.wordSize===s.wordSize&&Array.isArray(u.words)},s.max=function(u,d){return u.cmp(d)>0?u:d},s.min=function(u,d){return u.cmp(d)<0?u:d},s.prototype._init=function(u,d,w){if(typeof u=="number")return this._initNumber(u,d,w);if(typeof u=="object")return this._initArray(u,d,w);d==="hex"&&(d=16),n(d===(d|0)&&d>=2&&d<=36),u=u.toString().replace(/\s+/g,"");var E=0;u[0]==="-"&&(E++,this.negative=1),E<u.length&&(d===16?this._parseHex(u,E,w):(this._parseBase(u,d,E),w==="le"&&this._initArray(this.toArray(),d,w)))},s.prototype._initNumber=function(u,d,w){u<0&&(this.negative=1,u=-u),u<67108864?(this.words=[u&67108863],this.length=1):u<4503599627370496?(this.words=[u&67108863,u/67108864&67108863],this.length=2):(n(u<9007199254740992),this.words=[u&67108863,u/67108864&67108863,1],this.length=3),w==="le"&&this._initArray(this.toArray(),d,w)},s.prototype._initArray=function(u,d,w){if(n(typeof u.length=="number"),u.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(u.length/3),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var c,m,b=0;if(w==="be")for(E=u.length-1,c=0;E>=0;E-=3)m=u[E]|u[E-1]<<8|u[E-2]<<16,this.words[c]|=m<<b&67108863,this.words[c+1]=m>>>26-b&67108863,b+=24,b>=26&&(b-=26,c++);else if(w==="le")for(E=0,c=0;E<u.length;E+=3)m=u[E]|u[E+1]<<8|u[E+2]<<16,this.words[c]|=m<<b&67108863,this.words[c+1]=m>>>26-b&67108863,b+=24,b>=26&&(b-=26,c++);return this._strip()};function a(_,u){var d=_.charCodeAt(u);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;n(!1,"Invalid character in "+_)}function l(_,u,d){var w=a(_,d);return d-1>=u&&(w|=a(_,d-1)<<4),w}s.prototype._parseHex=function(u,d,w){this.length=Math.ceil((u.length-d)/6),this.words=new Array(this.length);for(var E=0;E<this.length;E++)this.words[E]=0;var c=0,m=0,b;if(w==="be")for(E=u.length-1;E>=d;E-=2)b=l(u,d,E)<<c,this.words[m]|=b&67108863,c>=18?(c-=18,m+=1,this.words[m]|=b>>>26):c+=8;else{var p=u.length-d;for(E=p%2===0?d+1:d;E<u.length;E+=2)b=l(u,d,E)<<c,this.words[m]|=b&67108863,c>=18?(c-=18,m+=1,this.words[m]|=b>>>26):c+=8}this._strip()};function g(_,u,d,w){for(var E=0,c=0,m=Math.min(_.length,d),b=u;b<m;b++){var p=_.charCodeAt(b)-48;E*=w,p>=49?c=p-49+10:p>=17?c=p-17+10:c=p,n(p>=0&&c<w,"Invalid character"),E+=c}return E}s.prototype._parseBase=function(u,d,w){this.words=[0],this.length=1;for(var E=0,c=1;c<=67108863;c*=d)E++;E--,c=c/d|0;for(var m=u.length-w,b=m%E,p=Math.min(m,m-b)+w,f=0,v=w;v<p;v+=E)f=g(u,v,v+E,d),this.imuln(c),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f);if(b!==0){var T=1;for(f=g(u,v,u.length,d),v=0;v<b;v++)T*=d;this.imuln(T),this.words[0]+f<67108864?this.words[0]+=f:this._iaddn(f)}this._strip()},s.prototype.copy=function(u){u.words=new Array(this.length);for(var d=0;d<this.length;d++)u.words[d]=this.words[d];u.length=this.length,u.negative=this.negative,u.red=this.red};function y(_,u){_.words=u.words,_.length=u.length,_.negative=u.negative,_.red=u.red}if(s.prototype._move=function(u){y(u,this)},s.prototype.clone=function(){var u=new s(null);return this.copy(u),u},s.prototype._expand=function(u){for(;this.length<u;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=A}catch{s.prototype.inspect=A}else s.prototype.inspect=A;function A(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var I=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],M=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],k=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(u,d){u=u||10,d=d|0||1;var w;if(u===16||u==="hex"){w="";for(var E=0,c=0,m=0;m<this.length;m++){var b=this.words[m],p=((b<<E|c)&16777215).toString(16);c=b>>>24-E&16777215,E+=2,E>=26&&(E-=26,m--),c!==0||m!==this.length-1?w=I[6-p.length]+p+w:w=p+w}for(c!==0&&(w=c.toString(16)+w);w.length%d!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}if(u===(u|0)&&u>=2&&u<=36){var f=M[u],v=k[u];w="";var T=this.clone();for(T.negative=0;!T.isZero();){var h=T.modrn(v).toString(u);T=T.idivn(v),T.isZero()?w=h+w:w=I[f-h.length]+h+w}for(this.isZero()&&(w="0"+w);w.length%d!==0;)w="0"+w;return this.negative!==0&&(w="-"+w),w}n(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var u=this.words[0];return this.length===2?u+=this.words[1]*67108864:this.length===3&&this.words[2]===1?u+=4503599627370496+this.words[1]*67108864:this.length>2&&n(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-u:u},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(u,d){return this.toArrayLike(o,u,d)}),s.prototype.toArray=function(u,d){return this.toArrayLike(Array,u,d)};var P=function(u,d){return u.allocUnsafe?u.allocUnsafe(d):new u(d)};s.prototype.toArrayLike=function(u,d,w){this._strip();var E=this.byteLength(),c=w||Math.max(1,E);n(E<=c,"byte array longer than desired length"),n(c>0,"Requested array length <= 0");var m=P(u,c),b=d==="le"?"LE":"BE";return this["_toArrayLike"+b](m,E),m},s.prototype._toArrayLikeLE=function(u,d){for(var w=0,E=0,c=0,m=0;c<this.length;c++){var b=this.words[c]<<m|E;u[w++]=b&255,w<u.length&&(u[w++]=b>>8&255),w<u.length&&(u[w++]=b>>16&255),m===6?(w<u.length&&(u[w++]=b>>24&255),E=0,m=0):(E=b>>>24,m+=2)}if(w<u.length)for(u[w++]=E;w<u.length;)u[w++]=0},s.prototype._toArrayLikeBE=function(u,d){for(var w=u.length-1,E=0,c=0,m=0;c<this.length;c++){var b=this.words[c]<<m|E;u[w--]=b&255,w>=0&&(u[w--]=b>>8&255),w>=0&&(u[w--]=b>>16&255),m===6?(w>=0&&(u[w--]=b>>24&255),E=0,m=0):(E=b>>>24,m+=2)}if(w>=0)for(u[w--]=E;w>=0;)u[w--]=0},Math.clz32?s.prototype._countBits=function(u){return 32-Math.clz32(u)}:s.prototype._countBits=function(u){var d=u,w=0;return d>=4096&&(w+=13,d>>>=13),d>=64&&(w+=7,d>>>=7),d>=8&&(w+=4,d>>>=4),d>=2&&(w+=2,d>>>=2),w+d},s.prototype._zeroBits=function(u){if(u===0)return 26;var d=u,w=0;return d&8191||(w+=13,d>>>=13),d&127||(w+=7,d>>>=7),d&15||(w+=4,d>>>=4),d&3||(w+=2,d>>>=2),d&1||w++,w},s.prototype.bitLength=function(){var u=this.words[this.length-1],d=this._countBits(u);return(this.length-1)*26+d};function j(_){for(var u=new Array(_.bitLength()),d=0;d<u.length;d++){var w=d/26|0,E=d%26;u[d]=_.words[w]>>>E&1}return u}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var u=0,d=0;d<this.length;d++){var w=this._zeroBits(this.words[d]);if(u+=w,w!==26)break}return u},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(u){return this.negative!==0?this.abs().inotn(u).iaddn(1):this.clone()},s.prototype.fromTwos=function(u){return this.testn(u-1)?this.notn(u).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(u){for(;this.length<u.length;)this.words[this.length++]=0;for(var d=0;d<u.length;d++)this.words[d]=this.words[d]|u.words[d];return this._strip()},s.prototype.ior=function(u){return n((this.negative|u.negative)===0),this.iuor(u)},s.prototype.or=function(u){return this.length>u.length?this.clone().ior(u):u.clone().ior(this)},s.prototype.uor=function(u){return this.length>u.length?this.clone().iuor(u):u.clone().iuor(this)},s.prototype.iuand=function(u){var d;this.length>u.length?d=u:d=this;for(var w=0;w<d.length;w++)this.words[w]=this.words[w]&u.words[w];return this.length=d.length,this._strip()},s.prototype.iand=function(u){return n((this.negative|u.negative)===0),this.iuand(u)},s.prototype.and=function(u){return this.length>u.length?this.clone().iand(u):u.clone().iand(this)},s.prototype.uand=function(u){return this.length>u.length?this.clone().iuand(u):u.clone().iuand(this)},s.prototype.iuxor=function(u){var d,w;this.length>u.length?(d=this,w=u):(d=u,w=this);for(var E=0;E<w.length;E++)this.words[E]=d.words[E]^w.words[E];if(this!==d)for(;E<d.length;E++)this.words[E]=d.words[E];return this.length=d.length,this._strip()},s.prototype.ixor=function(u){return n((this.negative|u.negative)===0),this.iuxor(u)},s.prototype.xor=function(u){return this.length>u.length?this.clone().ixor(u):u.clone().ixor(this)},s.prototype.uxor=function(u){return this.length>u.length?this.clone().iuxor(u):u.clone().iuxor(this)},s.prototype.inotn=function(u){n(typeof u=="number"&&u>=0);var d=Math.ceil(u/26)|0,w=u%26;this._expand(d),w>0&&d--;for(var E=0;E<d;E++)this.words[E]=~this.words[E]&67108863;return w>0&&(this.words[E]=~this.words[E]&67108863>>26-w),this._strip()},s.prototype.notn=function(u){return this.clone().inotn(u)},s.prototype.setn=function(u,d){n(typeof u=="number"&&u>=0);var w=u/26|0,E=u%26;return this._expand(w+1),d?this.words[w]=this.words[w]|1<<E:this.words[w]=this.words[w]&~(1<<E),this._strip()},s.prototype.iadd=function(u){var d;if(this.negative!==0&&u.negative===0)return this.negative=0,d=this.isub(u),this.negative^=1,this._normSign();if(this.negative===0&&u.negative!==0)return u.negative=0,d=this.isub(u),u.negative=1,d._normSign();var w,E;this.length>u.length?(w=this,E=u):(w=u,E=this);for(var c=0,m=0;m<E.length;m++)d=(w.words[m]|0)+(E.words[m]|0)+c,this.words[m]=d&67108863,c=d>>>26;for(;c!==0&&m<w.length;m++)d=(w.words[m]|0)+c,this.words[m]=d&67108863,c=d>>>26;if(this.length=w.length,c!==0)this.words[this.length]=c,this.length++;else if(w!==this)for(;m<w.length;m++)this.words[m]=w.words[m];return this},s.prototype.add=function(u){var d;return u.negative!==0&&this.negative===0?(u.negative=0,d=this.sub(u),u.negative^=1,d):u.negative===0&&this.negative!==0?(this.negative=0,d=u.sub(this),this.negative=1,d):this.length>u.length?this.clone().iadd(u):u.clone().iadd(this)},s.prototype.isub=function(u){if(u.negative!==0){u.negative=0;var d=this.iadd(u);return u.negative=1,d._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(u),this.negative=1,this._normSign();var w=this.cmp(u);if(w===0)return this.negative=0,this.length=1,this.words[0]=0,this;var E,c;w>0?(E=this,c=u):(E=u,c=this);for(var m=0,b=0;b<c.length;b++)d=(E.words[b]|0)-(c.words[b]|0)+m,m=d>>26,this.words[b]=d&67108863;for(;m!==0&&b<E.length;b++)d=(E.words[b]|0)+m,m=d>>26,this.words[b]=d&67108863;if(m===0&&b<E.length&&E!==this)for(;b<E.length;b++)this.words[b]=E.words[b];return this.length=Math.max(this.length,b),E!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(u){return this.clone().isub(u)};function B(_,u,d){d.negative=u.negative^_.negative;var w=_.length+u.length|0;d.length=w,w=w-1|0;var E=_.words[0]|0,c=u.words[0]|0,m=E*c,b=m&67108863,p=m/67108864|0;d.words[0]=b;for(var f=1;f<w;f++){for(var v=p>>>26,T=p&67108863,h=Math.min(f,u.length-1),x=Math.max(0,f-_.length+1);x<=h;x++){var S=f-x|0;E=_.words[S]|0,c=u.words[x]|0,m=E*c+T,v+=m/67108864|0,T=m&67108863}d.words[f]=T|0,p=v|0}return p!==0?d.words[f]=p|0:d.length--,d._strip()}var W=function(u,d,w){var E=u.words,c=d.words,m=w.words,b=0,p,f,v,T=E[0]|0,h=T&8191,x=T>>>13,S=E[1]|0,N=S&8191,L=S>>>13,z=E[2]|0,D=z&8191,U=z>>>13,te=E[3]|0,V=te&8191,Q=te>>>13,It=E[4]|0,me=It&8191,oe=It>>>13,tt=E[5]|0,Ae=tt&8191,Ee=tt>>>13,Lr=E[6]|0,xe=Lr&8191,_e=Lr>>>13,Dr=E[7]|0,Se=Dr&8191,Ie=Dr>>>13,Ur=E[8]|0,Me=Ur&8191,Ne=Ur>>>13,Fr=E[9]|0,ke=Fr&8191,Te=Fr>>>13,Hr=c[0]|0,Ce=Hr&8191,Oe=Hr>>>13,qr=c[1]|0,Pe=qr&8191,Re=qr>>>13,zr=c[2]|0,Be=zr&8191,Le=zr>>>13,Gr=c[3]|0,De=Gr&8191,Ue=Gr>>>13,jr=c[4]|0,Fe=jr&8191,He=jr>>>13,Wr=c[5]|0,qe=Wr&8191,ze=Wr>>>13,Vr=c[6]|0,Ge=Vr&8191,je=Vr>>>13,Kr=c[7]|0,We=Kr&8191,Ve=Kr>>>13,$r=c[8]|0,Ke=$r&8191,$e=$r>>>13,Jr=c[9]|0,Je=Jr&8191,Ye=Jr>>>13;w.negative=u.negative^d.negative,w.length=19,p=Math.imul(h,Ce),f=Math.imul(h,Oe),f=f+Math.imul(x,Ce)|0,v=Math.imul(x,Oe);var Ar=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,p=Math.imul(N,Ce),f=Math.imul(N,Oe),f=f+Math.imul(L,Ce)|0,v=Math.imul(L,Oe),p=p+Math.imul(h,Pe)|0,f=f+Math.imul(h,Re)|0,f=f+Math.imul(x,Pe)|0,v=v+Math.imul(x,Re)|0;var Er=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(Er>>>26)|0,Er&=67108863,p=Math.imul(D,Ce),f=Math.imul(D,Oe),f=f+Math.imul(U,Ce)|0,v=Math.imul(U,Oe),p=p+Math.imul(N,Pe)|0,f=f+Math.imul(N,Re)|0,f=f+Math.imul(L,Pe)|0,v=v+Math.imul(L,Re)|0,p=p+Math.imul(h,Be)|0,f=f+Math.imul(h,Le)|0,f=f+Math.imul(x,Be)|0,v=v+Math.imul(x,Le)|0;var xr=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(xr>>>26)|0,xr&=67108863,p=Math.imul(V,Ce),f=Math.imul(V,Oe),f=f+Math.imul(Q,Ce)|0,v=Math.imul(Q,Oe),p=p+Math.imul(D,Pe)|0,f=f+Math.imul(D,Re)|0,f=f+Math.imul(U,Pe)|0,v=v+Math.imul(U,Re)|0,p=p+Math.imul(N,Be)|0,f=f+Math.imul(N,Le)|0,f=f+Math.imul(L,Be)|0,v=v+Math.imul(L,Le)|0,p=p+Math.imul(h,De)|0,f=f+Math.imul(h,Ue)|0,f=f+Math.imul(x,De)|0,v=v+Math.imul(x,Ue)|0;var _r=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(_r>>>26)|0,_r&=67108863,p=Math.imul(me,Ce),f=Math.imul(me,Oe),f=f+Math.imul(oe,Ce)|0,v=Math.imul(oe,Oe),p=p+Math.imul(V,Pe)|0,f=f+Math.imul(V,Re)|0,f=f+Math.imul(Q,Pe)|0,v=v+Math.imul(Q,Re)|0,p=p+Math.imul(D,Be)|0,f=f+Math.imul(D,Le)|0,f=f+Math.imul(U,Be)|0,v=v+Math.imul(U,Le)|0,p=p+Math.imul(N,De)|0,f=f+Math.imul(N,Ue)|0,f=f+Math.imul(L,De)|0,v=v+Math.imul(L,Ue)|0,p=p+Math.imul(h,Fe)|0,f=f+Math.imul(h,He)|0,f=f+Math.imul(x,Fe)|0,v=v+Math.imul(x,He)|0;var Sr=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(Sr>>>26)|0,Sr&=67108863,p=Math.imul(Ae,Ce),f=Math.imul(Ae,Oe),f=f+Math.imul(Ee,Ce)|0,v=Math.imul(Ee,Oe),p=p+Math.imul(me,Pe)|0,f=f+Math.imul(me,Re)|0,f=f+Math.imul(oe,Pe)|0,v=v+Math.imul(oe,Re)|0,p=p+Math.imul(V,Be)|0,f=f+Math.imul(V,Le)|0,f=f+Math.imul(Q,Be)|0,v=v+Math.imul(Q,Le)|0,p=p+Math.imul(D,De)|0,f=f+Math.imul(D,Ue)|0,f=f+Math.imul(U,De)|0,v=v+Math.imul(U,Ue)|0,p=p+Math.imul(N,Fe)|0,f=f+Math.imul(N,He)|0,f=f+Math.imul(L,Fe)|0,v=v+Math.imul(L,He)|0,p=p+Math.imul(h,qe)|0,f=f+Math.imul(h,ze)|0,f=f+Math.imul(x,qe)|0,v=v+Math.imul(x,ze)|0;var fs=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(fs>>>26)|0,fs&=67108863,p=Math.imul(xe,Ce),f=Math.imul(xe,Oe),f=f+Math.imul(_e,Ce)|0,v=Math.imul(_e,Oe),p=p+Math.imul(Ae,Pe)|0,f=f+Math.imul(Ae,Re)|0,f=f+Math.imul(Ee,Pe)|0,v=v+Math.imul(Ee,Re)|0,p=p+Math.imul(me,Be)|0,f=f+Math.imul(me,Le)|0,f=f+Math.imul(oe,Be)|0,v=v+Math.imul(oe,Le)|0,p=p+Math.imul(V,De)|0,f=f+Math.imul(V,Ue)|0,f=f+Math.imul(Q,De)|0,v=v+Math.imul(Q,Ue)|0,p=p+Math.imul(D,Fe)|0,f=f+Math.imul(D,He)|0,f=f+Math.imul(U,Fe)|0,v=v+Math.imul(U,He)|0,p=p+Math.imul(N,qe)|0,f=f+Math.imul(N,ze)|0,f=f+Math.imul(L,qe)|0,v=v+Math.imul(L,ze)|0,p=p+Math.imul(h,Ge)|0,f=f+Math.imul(h,je)|0,f=f+Math.imul(x,Ge)|0,v=v+Math.imul(x,je)|0;var us=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(us>>>26)|0,us&=67108863,p=Math.imul(Se,Ce),f=Math.imul(Se,Oe),f=f+Math.imul(Ie,Ce)|0,v=Math.imul(Ie,Oe),p=p+Math.imul(xe,Pe)|0,f=f+Math.imul(xe,Re)|0,f=f+Math.imul(_e,Pe)|0,v=v+Math.imul(_e,Re)|0,p=p+Math.imul(Ae,Be)|0,f=f+Math.imul(Ae,Le)|0,f=f+Math.imul(Ee,Be)|0,v=v+Math.imul(Ee,Le)|0,p=p+Math.imul(me,De)|0,f=f+Math.imul(me,Ue)|0,f=f+Math.imul(oe,De)|0,v=v+Math.imul(oe,Ue)|0,p=p+Math.imul(V,Fe)|0,f=f+Math.imul(V,He)|0,f=f+Math.imul(Q,Fe)|0,v=v+Math.imul(Q,He)|0,p=p+Math.imul(D,qe)|0,f=f+Math.imul(D,ze)|0,f=f+Math.imul(U,qe)|0,v=v+Math.imul(U,ze)|0,p=p+Math.imul(N,Ge)|0,f=f+Math.imul(N,je)|0,f=f+Math.imul(L,Ge)|0,v=v+Math.imul(L,je)|0,p=p+Math.imul(h,We)|0,f=f+Math.imul(h,Ve)|0,f=f+Math.imul(x,We)|0,v=v+Math.imul(x,Ve)|0;var ls=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(ls>>>26)|0,ls&=67108863,p=Math.imul(Me,Ce),f=Math.imul(Me,Oe),f=f+Math.imul(Ne,Ce)|0,v=Math.imul(Ne,Oe),p=p+Math.imul(Se,Pe)|0,f=f+Math.imul(Se,Re)|0,f=f+Math.imul(Ie,Pe)|0,v=v+Math.imul(Ie,Re)|0,p=p+Math.imul(xe,Be)|0,f=f+Math.imul(xe,Le)|0,f=f+Math.imul(_e,Be)|0,v=v+Math.imul(_e,Le)|0,p=p+Math.imul(Ae,De)|0,f=f+Math.imul(Ae,Ue)|0,f=f+Math.imul(Ee,De)|0,v=v+Math.imul(Ee,Ue)|0,p=p+Math.imul(me,Fe)|0,f=f+Math.imul(me,He)|0,f=f+Math.imul(oe,Fe)|0,v=v+Math.imul(oe,He)|0,p=p+Math.imul(V,qe)|0,f=f+Math.imul(V,ze)|0,f=f+Math.imul(Q,qe)|0,v=v+Math.imul(Q,ze)|0,p=p+Math.imul(D,Ge)|0,f=f+Math.imul(D,je)|0,f=f+Math.imul(U,Ge)|0,v=v+Math.imul(U,je)|0,p=p+Math.imul(N,We)|0,f=f+Math.imul(N,Ve)|0,f=f+Math.imul(L,We)|0,v=v+Math.imul(L,Ve)|0,p=p+Math.imul(h,Ke)|0,f=f+Math.imul(h,$e)|0,f=f+Math.imul(x,Ke)|0,v=v+Math.imul(x,$e)|0;var cs=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(cs>>>26)|0,cs&=67108863,p=Math.imul(ke,Ce),f=Math.imul(ke,Oe),f=f+Math.imul(Te,Ce)|0,v=Math.imul(Te,Oe),p=p+Math.imul(Me,Pe)|0,f=f+Math.imul(Me,Re)|0,f=f+Math.imul(Ne,Pe)|0,v=v+Math.imul(Ne,Re)|0,p=p+Math.imul(Se,Be)|0,f=f+Math.imul(Se,Le)|0,f=f+Math.imul(Ie,Be)|0,v=v+Math.imul(Ie,Le)|0,p=p+Math.imul(xe,De)|0,f=f+Math.imul(xe,Ue)|0,f=f+Math.imul(_e,De)|0,v=v+Math.imul(_e,Ue)|0,p=p+Math.imul(Ae,Fe)|0,f=f+Math.imul(Ae,He)|0,f=f+Math.imul(Ee,Fe)|0,v=v+Math.imul(Ee,He)|0,p=p+Math.imul(me,qe)|0,f=f+Math.imul(me,ze)|0,f=f+Math.imul(oe,qe)|0,v=v+Math.imul(oe,ze)|0,p=p+Math.imul(V,Ge)|0,f=f+Math.imul(V,je)|0,f=f+Math.imul(Q,Ge)|0,v=v+Math.imul(Q,je)|0,p=p+Math.imul(D,We)|0,f=f+Math.imul(D,Ve)|0,f=f+Math.imul(U,We)|0,v=v+Math.imul(U,Ve)|0,p=p+Math.imul(N,Ke)|0,f=f+Math.imul(N,$e)|0,f=f+Math.imul(L,Ke)|0,v=v+Math.imul(L,$e)|0,p=p+Math.imul(h,Je)|0,f=f+Math.imul(h,Ye)|0,f=f+Math.imul(x,Je)|0,v=v+Math.imul(x,Ye)|0;var hs=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(hs>>>26)|0,hs&=67108863,p=Math.imul(ke,Pe),f=Math.imul(ke,Re),f=f+Math.imul(Te,Pe)|0,v=Math.imul(Te,Re),p=p+Math.imul(Me,Be)|0,f=f+Math.imul(Me,Le)|0,f=f+Math.imul(Ne,Be)|0,v=v+Math.imul(Ne,Le)|0,p=p+Math.imul(Se,De)|0,f=f+Math.imul(Se,Ue)|0,f=f+Math.imul(Ie,De)|0,v=v+Math.imul(Ie,Ue)|0,p=p+Math.imul(xe,Fe)|0,f=f+Math.imul(xe,He)|0,f=f+Math.imul(_e,Fe)|0,v=v+Math.imul(_e,He)|0,p=p+Math.imul(Ae,qe)|0,f=f+Math.imul(Ae,ze)|0,f=f+Math.imul(Ee,qe)|0,v=v+Math.imul(Ee,ze)|0,p=p+Math.imul(me,Ge)|0,f=f+Math.imul(me,je)|0,f=f+Math.imul(oe,Ge)|0,v=v+Math.imul(oe,je)|0,p=p+Math.imul(V,We)|0,f=f+Math.imul(V,Ve)|0,f=f+Math.imul(Q,We)|0,v=v+Math.imul(Q,Ve)|0,p=p+Math.imul(D,Ke)|0,f=f+Math.imul(D,$e)|0,f=f+Math.imul(U,Ke)|0,v=v+Math.imul(U,$e)|0,p=p+Math.imul(N,Je)|0,f=f+Math.imul(N,Ye)|0,f=f+Math.imul(L,Je)|0,v=v+Math.imul(L,Ye)|0;var ds=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(ds>>>26)|0,ds&=67108863,p=Math.imul(ke,Be),f=Math.imul(ke,Le),f=f+Math.imul(Te,Be)|0,v=Math.imul(Te,Le),p=p+Math.imul(Me,De)|0,f=f+Math.imul(Me,Ue)|0,f=f+Math.imul(Ne,De)|0,v=v+Math.imul(Ne,Ue)|0,p=p+Math.imul(Se,Fe)|0,f=f+Math.imul(Se,He)|0,f=f+Math.imul(Ie,Fe)|0,v=v+Math.imul(Ie,He)|0,p=p+Math.imul(xe,qe)|0,f=f+Math.imul(xe,ze)|0,f=f+Math.imul(_e,qe)|0,v=v+Math.imul(_e,ze)|0,p=p+Math.imul(Ae,Ge)|0,f=f+Math.imul(Ae,je)|0,f=f+Math.imul(Ee,Ge)|0,v=v+Math.imul(Ee,je)|0,p=p+Math.imul(me,We)|0,f=f+Math.imul(me,Ve)|0,f=f+Math.imul(oe,We)|0,v=v+Math.imul(oe,Ve)|0,p=p+Math.imul(V,Ke)|0,f=f+Math.imul(V,$e)|0,f=f+Math.imul(Q,Ke)|0,v=v+Math.imul(Q,$e)|0,p=p+Math.imul(D,Je)|0,f=f+Math.imul(D,Ye)|0,f=f+Math.imul(U,Je)|0,v=v+Math.imul(U,Ye)|0;var gs=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(gs>>>26)|0,gs&=67108863,p=Math.imul(ke,De),f=Math.imul(ke,Ue),f=f+Math.imul(Te,De)|0,v=Math.imul(Te,Ue),p=p+Math.imul(Me,Fe)|0,f=f+Math.imul(Me,He)|0,f=f+Math.imul(Ne,Fe)|0,v=v+Math.imul(Ne,He)|0,p=p+Math.imul(Se,qe)|0,f=f+Math.imul(Se,ze)|0,f=f+Math.imul(Ie,qe)|0,v=v+Math.imul(Ie,ze)|0,p=p+Math.imul(xe,Ge)|0,f=f+Math.imul(xe,je)|0,f=f+Math.imul(_e,Ge)|0,v=v+Math.imul(_e,je)|0,p=p+Math.imul(Ae,We)|0,f=f+Math.imul(Ae,Ve)|0,f=f+Math.imul(Ee,We)|0,v=v+Math.imul(Ee,Ve)|0,p=p+Math.imul(me,Ke)|0,f=f+Math.imul(me,$e)|0,f=f+Math.imul(oe,Ke)|0,v=v+Math.imul(oe,$e)|0,p=p+Math.imul(V,Je)|0,f=f+Math.imul(V,Ye)|0,f=f+Math.imul(Q,Je)|0,v=v+Math.imul(Q,Ye)|0;var ps=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(ps>>>26)|0,ps&=67108863,p=Math.imul(ke,Fe),f=Math.imul(ke,He),f=f+Math.imul(Te,Fe)|0,v=Math.imul(Te,He),p=p+Math.imul(Me,qe)|0,f=f+Math.imul(Me,ze)|0,f=f+Math.imul(Ne,qe)|0,v=v+Math.imul(Ne,ze)|0,p=p+Math.imul(Se,Ge)|0,f=f+Math.imul(Se,je)|0,f=f+Math.imul(Ie,Ge)|0,v=v+Math.imul(Ie,je)|0,p=p+Math.imul(xe,We)|0,f=f+Math.imul(xe,Ve)|0,f=f+Math.imul(_e,We)|0,v=v+Math.imul(_e,Ve)|0,p=p+Math.imul(Ae,Ke)|0,f=f+Math.imul(Ae,$e)|0,f=f+Math.imul(Ee,Ke)|0,v=v+Math.imul(Ee,$e)|0,p=p+Math.imul(me,Je)|0,f=f+Math.imul(me,Ye)|0,f=f+Math.imul(oe,Je)|0,v=v+Math.imul(oe,Ye)|0;var ms=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(ms>>>26)|0,ms&=67108863,p=Math.imul(ke,qe),f=Math.imul(ke,ze),f=f+Math.imul(Te,qe)|0,v=Math.imul(Te,ze),p=p+Math.imul(Me,Ge)|0,f=f+Math.imul(Me,je)|0,f=f+Math.imul(Ne,Ge)|0,v=v+Math.imul(Ne,je)|0,p=p+Math.imul(Se,We)|0,f=f+Math.imul(Se,Ve)|0,f=f+Math.imul(Ie,We)|0,v=v+Math.imul(Ie,Ve)|0,p=p+Math.imul(xe,Ke)|0,f=f+Math.imul(xe,$e)|0,f=f+Math.imul(_e,Ke)|0,v=v+Math.imul(_e,$e)|0,p=p+Math.imul(Ae,Je)|0,f=f+Math.imul(Ae,Ye)|0,f=f+Math.imul(Ee,Je)|0,v=v+Math.imul(Ee,Ye)|0;var vs=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(vs>>>26)|0,vs&=67108863,p=Math.imul(ke,Ge),f=Math.imul(ke,je),f=f+Math.imul(Te,Ge)|0,v=Math.imul(Te,je),p=p+Math.imul(Me,We)|0,f=f+Math.imul(Me,Ve)|0,f=f+Math.imul(Ne,We)|0,v=v+Math.imul(Ne,Ve)|0,p=p+Math.imul(Se,Ke)|0,f=f+Math.imul(Se,$e)|0,f=f+Math.imul(Ie,Ke)|0,v=v+Math.imul(Ie,$e)|0,p=p+Math.imul(xe,Je)|0,f=f+Math.imul(xe,Ye)|0,f=f+Math.imul(_e,Je)|0,v=v+Math.imul(_e,Ye)|0;var ys=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(ys>>>26)|0,ys&=67108863,p=Math.imul(ke,We),f=Math.imul(ke,Ve),f=f+Math.imul(Te,We)|0,v=Math.imul(Te,Ve),p=p+Math.imul(Me,Ke)|0,f=f+Math.imul(Me,$e)|0,f=f+Math.imul(Ne,Ke)|0,v=v+Math.imul(Ne,$e)|0,p=p+Math.imul(Se,Je)|0,f=f+Math.imul(Se,Ye)|0,f=f+Math.imul(Ie,Je)|0,v=v+Math.imul(Ie,Ye)|0;var bs=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(bs>>>26)|0,bs&=67108863,p=Math.imul(ke,Ke),f=Math.imul(ke,$e),f=f+Math.imul(Te,Ke)|0,v=Math.imul(Te,$e),p=p+Math.imul(Me,Je)|0,f=f+Math.imul(Me,Ye)|0,f=f+Math.imul(Ne,Je)|0,v=v+Math.imul(Ne,Ye)|0;var ws=(b+p|0)+((f&8191)<<13)|0;b=(v+(f>>>13)|0)+(ws>>>26)|0,ws&=67108863,p=Math.imul(ke,Je),f=Math.imul(ke,Ye),f=f+Math.imul(Te,Je)|0,v=Math.imul(Te,Ye);var As=(b+p|0)+((f&8191)<<13)|0;return b=(v+(f>>>13)|0)+(As>>>26)|0,As&=67108863,m[0]=Ar,m[1]=Er,m[2]=xr,m[3]=_r,m[4]=Sr,m[5]=fs,m[6]=us,m[7]=ls,m[8]=cs,m[9]=hs,m[10]=ds,m[11]=gs,m[12]=ps,m[13]=ms,m[14]=vs,m[15]=ys,m[16]=bs,m[17]=ws,m[18]=As,b!==0&&(m[19]=b,w.length++),w};Math.imul||(W=B);function H(_,u,d){d.negative=u.negative^_.negative,d.length=_.length+u.length;for(var w=0,E=0,c=0;c<d.length-1;c++){var m=E;E=0;for(var b=w&67108863,p=Math.min(c,u.length-1),f=Math.max(0,c-_.length+1);f<=p;f++){var v=c-f,T=_.words[v]|0,h=u.words[f]|0,x=T*h,S=x&67108863;m=m+(x/67108864|0)|0,S=S+b|0,b=S&67108863,m=m+(S>>>26)|0,E+=m>>>26,m&=67108863}d.words[c]=b,w=m,m=E}return w!==0?d.words[c]=w:d.length--,d._strip()}function J(_,u,d){return H(_,u,d)}s.prototype.mulTo=function(u,d){var w,E=this.length+u.length;return this.length===10&&u.length===10?w=W(this,u,d):E<63?w=B(this,u,d):E<1024?w=H(this,u,d):w=J(this,u,d),w},s.prototype.mul=function(u){var d=new s(null);return d.words=new Array(this.length+u.length),this.mulTo(u,d)},s.prototype.mulf=function(u){var d=new s(null);return d.words=new Array(this.length+u.length),J(this,u,d)},s.prototype.imul=function(u){return this.clone().mulTo(u,this)},s.prototype.imuln=function(u){var d=u<0;d&&(u=-u),n(typeof u=="number"),n(u<67108864);for(var w=0,E=0;E<this.length;E++){var c=(this.words[E]|0)*u,m=(c&67108863)+(w&67108863);w>>=26,w+=c/67108864|0,w+=m>>>26,this.words[E]=m&67108863}return w!==0&&(this.words[E]=w,this.length++),d?this.ineg():this},s.prototype.muln=function(u){return this.clone().imuln(u)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(u){var d=j(u);if(d.length===0)return new s(1);for(var w=this,E=0;E<d.length&&d[E]===0;E++,w=w.sqr());if(++E<d.length)for(var c=w.sqr();E<d.length;E++,c=c.sqr())d[E]!==0&&(w=w.mul(c));return w},s.prototype.iushln=function(u){n(typeof u=="number"&&u>=0);var d=u%26,w=(u-d)/26,E=67108863>>>26-d<<26-d,c;if(d!==0){var m=0;for(c=0;c<this.length;c++){var b=this.words[c]&E,p=(this.words[c]|0)-b<<d;this.words[c]=p|m,m=b>>>26-d}m&&(this.words[c]=m,this.length++)}if(w!==0){for(c=this.length-1;c>=0;c--)this.words[c+w]=this.words[c];for(c=0;c<w;c++)this.words[c]=0;this.length+=w}return this._strip()},s.prototype.ishln=function(u){return n(this.negative===0),this.iushln(u)},s.prototype.iushrn=function(u,d,w){n(typeof u=="number"&&u>=0);var E;d?E=(d-d%26)/26:E=0;var c=u%26,m=Math.min((u-c)/26,this.length),b=67108863^67108863>>>c<<c,p=w;if(E-=m,E=Math.max(0,E),p){for(var f=0;f<m;f++)p.words[f]=this.words[f];p.length=m}if(m!==0)if(this.length>m)for(this.length-=m,f=0;f<this.length;f++)this.words[f]=this.words[f+m];else this.words[0]=0,this.length=1;var v=0;for(f=this.length-1;f>=0&&(v!==0||f>=E);f--){var T=this.words[f]|0;this.words[f]=v<<26-c|T>>>c,v=T&b}return p&&v!==0&&(p.words[p.length++]=v),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(u,d,w){return n(this.negative===0),this.iushrn(u,d,w)},s.prototype.shln=function(u){return this.clone().ishln(u)},s.prototype.ushln=function(u){return this.clone().iushln(u)},s.prototype.shrn=function(u){return this.clone().ishrn(u)},s.prototype.ushrn=function(u){return this.clone().iushrn(u)},s.prototype.testn=function(u){n(typeof u=="number"&&u>=0);var d=u%26,w=(u-d)/26,E=1<<d;if(this.length<=w)return!1;var c=this.words[w];return!!(c&E)},s.prototype.imaskn=function(u){n(typeof u=="number"&&u>=0);var d=u%26,w=(u-d)/26;if(n(this.negative===0,"imaskn works only with positive numbers"),this.length<=w)return this;if(d!==0&&w++,this.length=Math.min(w,this.length),d!==0){var E=67108863^67108863>>>d<<d;this.words[this.length-1]&=E}return this._strip()},s.prototype.maskn=function(u){return this.clone().imaskn(u)},s.prototype.iaddn=function(u){return n(typeof u=="number"),n(u<67108864),u<0?this.isubn(-u):this.negative!==0?this.length===1&&(this.words[0]|0)<=u?(this.words[0]=u-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(u),this.negative=1,this):this._iaddn(u)},s.prototype._iaddn=function(u){this.words[0]+=u;for(var d=0;d<this.length&&this.words[d]>=67108864;d++)this.words[d]-=67108864,d===this.length-1?this.words[d+1]=1:this.words[d+1]++;return this.length=Math.max(this.length,d+1),this},s.prototype.isubn=function(u){if(n(typeof u=="number"),n(u<67108864),u<0)return this.iaddn(-u);if(this.negative!==0)return this.negative=0,this.iaddn(u),this.negative=1,this;if(this.words[0]-=u,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var d=0;d<this.length&&this.words[d]<0;d++)this.words[d]+=67108864,this.words[d+1]-=1;return this._strip()},s.prototype.addn=function(u){return this.clone().iaddn(u)},s.prototype.subn=function(u){return this.clone().isubn(u)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(u,d,w){var E=u.length+w,c;this._expand(E);var m,b=0;for(c=0;c<u.length;c++){m=(this.words[c+w]|0)+b;var p=(u.words[c]|0)*d;m-=p&67108863,b=(m>>26)-(p/67108864|0),this.words[c+w]=m&67108863}for(;c<this.length-w;c++)m=(this.words[c+w]|0)+b,b=m>>26,this.words[c+w]=m&67108863;if(b===0)return this._strip();for(n(b===-1),b=0,c=0;c<this.length;c++)m=-(this.words[c]|0)+b,b=m>>26,this.words[c]=m&67108863;return this.negative=1,this._strip()},s.prototype._wordDiv=function(u,d){var w=this.length-u.length,E=this.clone(),c=u,m=c.words[c.length-1]|0,b=this._countBits(m);w=26-b,w!==0&&(c=c.ushln(w),E.iushln(w),m=c.words[c.length-1]|0);var p=E.length-c.length,f;if(d!=="mod"){f=new s(null),f.length=p+1,f.words=new Array(f.length);for(var v=0;v<f.length;v++)f.words[v]=0}var T=E.clone()._ishlnsubmul(c,1,p);T.negative===0&&(E=T,f&&(f.words[p]=1));for(var h=p-1;h>=0;h--){var x=(E.words[c.length+h]|0)*67108864+(E.words[c.length+h-1]|0);for(x=Math.min(x/m|0,67108863),E._ishlnsubmul(c,x,h);E.negative!==0;)x--,E.negative=0,E._ishlnsubmul(c,1,h),E.isZero()||(E.negative^=1);f&&(f.words[h]=x)}return f&&f._strip(),E._strip(),d!=="div"&&w!==0&&E.iushrn(w),{div:f||null,mod:E}},s.prototype.divmod=function(u,d,w){if(n(!u.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var E,c,m;return this.negative!==0&&u.negative===0?(m=this.neg().divmod(u,d),d!=="mod"&&(E=m.div.neg()),d!=="div"&&(c=m.mod.neg(),w&&c.negative!==0&&c.iadd(u)),{div:E,mod:c}):this.negative===0&&u.negative!==0?(m=this.divmod(u.neg(),d),d!=="mod"&&(E=m.div.neg()),{div:E,mod:m.mod}):this.negative&u.negative?(m=this.neg().divmod(u.neg(),d),d!=="div"&&(c=m.mod.neg(),w&&c.negative!==0&&c.isub(u)),{div:m.div,mod:c}):u.length>this.length||this.cmp(u)<0?{div:new s(0),mod:this}:u.length===1?d==="div"?{div:this.divn(u.words[0]),mod:null}:d==="mod"?{div:null,mod:new s(this.modrn(u.words[0]))}:{div:this.divn(u.words[0]),mod:new s(this.modrn(u.words[0]))}:this._wordDiv(u,d)},s.prototype.div=function(u){return this.divmod(u,"div",!1).div},s.prototype.mod=function(u){return this.divmod(u,"mod",!1).mod},s.prototype.umod=function(u){return this.divmod(u,"mod",!0).mod},s.prototype.divRound=function(u){var d=this.divmod(u);if(d.mod.isZero())return d.div;var w=d.div.negative!==0?d.mod.isub(u):d.mod,E=u.ushrn(1),c=u.andln(1),m=w.cmp(E);return m<0||c===1&&m===0?d.div:d.div.negative!==0?d.div.isubn(1):d.div.iaddn(1)},s.prototype.modrn=function(u){var d=u<0;d&&(u=-u),n(u<=67108863);for(var w=(1<<26)%u,E=0,c=this.length-1;c>=0;c--)E=(w*E+(this.words[c]|0))%u;return d?-E:E},s.prototype.modn=function(u){return this.modrn(u)},s.prototype.idivn=function(u){var d=u<0;d&&(u=-u),n(u<=67108863);for(var w=0,E=this.length-1;E>=0;E--){var c=(this.words[E]|0)+w*67108864;this.words[E]=c/u|0,w=c%u}return this._strip(),d?this.ineg():this},s.prototype.divn=function(u){return this.clone().idivn(u)},s.prototype.egcd=function(u){n(u.negative===0),n(!u.isZero());var d=this,w=u.clone();d.negative!==0?d=d.umod(u):d=d.clone();for(var E=new s(1),c=new s(0),m=new s(0),b=new s(1),p=0;d.isEven()&&w.isEven();)d.iushrn(1),w.iushrn(1),++p;for(var f=w.clone(),v=d.clone();!d.isZero();){for(var T=0,h=1;!(d.words[0]&h)&&T<26;++T,h<<=1);if(T>0)for(d.iushrn(T);T-- >0;)(E.isOdd()||c.isOdd())&&(E.iadd(f),c.isub(v)),E.iushrn(1),c.iushrn(1);for(var x=0,S=1;!(w.words[0]&S)&&x<26;++x,S<<=1);if(x>0)for(w.iushrn(x);x-- >0;)(m.isOdd()||b.isOdd())&&(m.iadd(f),b.isub(v)),m.iushrn(1),b.iushrn(1);d.cmp(w)>=0?(d.isub(w),E.isub(m),c.isub(b)):(w.isub(d),m.isub(E),b.isub(c))}return{a:m,b,gcd:w.iushln(p)}},s.prototype._invmp=function(u){n(u.negative===0),n(!u.isZero());var d=this,w=u.clone();d.negative!==0?d=d.umod(u):d=d.clone();for(var E=new s(1),c=new s(0),m=w.clone();d.cmpn(1)>0&&w.cmpn(1)>0;){for(var b=0,p=1;!(d.words[0]&p)&&b<26;++b,p<<=1);if(b>0)for(d.iushrn(b);b-- >0;)E.isOdd()&&E.iadd(m),E.iushrn(1);for(var f=0,v=1;!(w.words[0]&v)&&f<26;++f,v<<=1);if(f>0)for(w.iushrn(f);f-- >0;)c.isOdd()&&c.iadd(m),c.iushrn(1);d.cmp(w)>=0?(d.isub(w),E.isub(c)):(w.isub(d),c.isub(E))}var T;return d.cmpn(1)===0?T=E:T=c,T.cmpn(0)<0&&T.iadd(u),T},s.prototype.gcd=function(u){if(this.isZero())return u.abs();if(u.isZero())return this.abs();var d=this.clone(),w=u.clone();d.negative=0,w.negative=0;for(var E=0;d.isEven()&&w.isEven();E++)d.iushrn(1),w.iushrn(1);do{for(;d.isEven();)d.iushrn(1);for(;w.isEven();)w.iushrn(1);var c=d.cmp(w);if(c<0){var m=d;d=w,w=m}else if(c===0||w.cmpn(1)===0)break;d.isub(w)}while(!0);return w.iushln(E)},s.prototype.invm=function(u){return this.egcd(u).a.umod(u)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(u){return this.words[0]&u},s.prototype.bincn=function(u){n(typeof u=="number");var d=u%26,w=(u-d)/26,E=1<<d;if(this.length<=w)return this._expand(w+1),this.words[w]|=E,this;for(var c=E,m=w;c!==0&&m<this.length;m++){var b=this.words[m]|0;b+=c,c=b>>>26,b&=67108863,this.words[m]=b}return c!==0&&(this.words[m]=c,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(u){var d=u<0;if(this.negative!==0&&!d)return-1;if(this.negative===0&&d)return 1;this._strip();var w;if(this.length>1)w=1;else{d&&(u=-u),n(u<=67108863,"Number is too big");var E=this.words[0]|0;w=E===u?0:E<u?-1:1}return this.negative!==0?-w|0:w},s.prototype.cmp=function(u){if(this.negative!==0&&u.negative===0)return-1;if(this.negative===0&&u.negative!==0)return 1;var d=this.ucmp(u);return this.negative!==0?-d|0:d},s.prototype.ucmp=function(u){if(this.length>u.length)return 1;if(this.length<u.length)return-1;for(var d=0,w=this.length-1;w>=0;w--){var E=this.words[w]|0,c=u.words[w]|0;if(E!==c){E<c?d=-1:E>c&&(d=1);break}}return d},s.prototype.gtn=function(u){return this.cmpn(u)===1},s.prototype.gt=function(u){return this.cmp(u)===1},s.prototype.gten=function(u){return this.cmpn(u)>=0},s.prototype.gte=function(u){return this.cmp(u)>=0},s.prototype.ltn=function(u){return this.cmpn(u)===-1},s.prototype.lt=function(u){return this.cmp(u)===-1},s.prototype.lten=function(u){return this.cmpn(u)<=0},s.prototype.lte=function(u){return this.cmp(u)<=0},s.prototype.eqn=function(u){return this.cmpn(u)===0},s.prototype.eq=function(u){return this.cmp(u)===0},s.red=function(u){return new le(u)},s.prototype.toRed=function(u){return n(!this.red,"Already a number in reduction context"),n(this.negative===0,"red works only with positives"),u.convertTo(this)._forceRed(u)},s.prototype.fromRed=function(){return n(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(u){return this.red=u,this},s.prototype.forceRed=function(u){return n(!this.red,"Already a number in reduction context"),this._forceRed(u)},s.prototype.redAdd=function(u){return n(this.red,"redAdd works only with red numbers"),this.red.add(this,u)},s.prototype.redIAdd=function(u){return n(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,u)},s.prototype.redSub=function(u){return n(this.red,"redSub works only with red numbers"),this.red.sub(this,u)},s.prototype.redISub=function(u){return n(this.red,"redISub works only with red numbers"),this.red.isub(this,u)},s.prototype.redShl=function(u){return n(this.red,"redShl works only with red numbers"),this.red.shl(this,u)},s.prototype.redMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.mul(this,u)},s.prototype.redIMul=function(u){return n(this.red,"redMul works only with red numbers"),this.red._verify2(this,u),this.red.imul(this,u)},s.prototype.redSqr=function(){return n(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return n(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return n(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return n(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return n(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(u){return n(this.red&&!u.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,u)};var K={k256:null,p224:null,p192:null,p25519:null};function Y(_,u){this.name=_,this.p=new s(u,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Y.prototype._tmp=function(){var u=new s(null);return u.words=new Array(Math.ceil(this.n/13)),u},Y.prototype.ireduce=function(u){var d=u,w;do this.split(d,this.tmp),d=this.imulK(d),d=d.iadd(this.tmp),w=d.bitLength();while(w>this.n);var E=w<this.n?-1:d.ucmp(this.p);return E===0?(d.words[0]=0,d.length=1):E>0?d.isub(this.p):d.strip!==void 0?d.strip():d._strip(),d},Y.prototype.split=function(u,d){u.iushrn(this.n,0,d)},Y.prototype.imulK=function(u){return u.imul(this.k)};function ye(){Y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}i(ye,Y),ye.prototype.split=function(u,d){for(var w=4194303,E=Math.min(u.length,9),c=0;c<E;c++)d.words[c]=u.words[c];if(d.length=E,u.length<=9){u.words[0]=0,u.length=1;return}var m=u.words[9];for(d.words[d.length++]=m&w,c=10;c<u.length;c++){var b=u.words[c]|0;u.words[c-10]=(b&w)<<4|m>>>22,m=b}m>>>=22,u.words[c-10]=m,m===0&&u.length>10?u.length-=10:u.length-=9},ye.prototype.imulK=function(u){u.words[u.length]=0,u.words[u.length+1]=0,u.length+=2;for(var d=0,w=0;w<u.length;w++){var E=u.words[w]|0;d+=E*977,u.words[w]=d&67108863,d=E*64+(d/67108864|0)}return u.words[u.length-1]===0&&(u.length--,u.words[u.length-1]===0&&u.length--),u};function de(){Y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}i(de,Y);function X(){Y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}i(X,Y);function we(){Y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}i(we,Y),we.prototype.imulK=function(u){for(var d=0,w=0;w<u.length;w++){var E=(u.words[w]|0)*19+d,c=E&67108863;E>>>=26,u.words[w]=c,d=E}return d!==0&&(u.words[u.length++]=d),u},s._prime=function(u){if(K[u])return K[u];var d;if(u==="k256")d=new ye;else if(u==="p224")d=new de;else if(u==="p192")d=new X;else if(u==="p25519")d=new we;else throw new Error("Unknown prime "+u);return K[u]=d,d};function le(_){if(typeof _=="string"){var u=s._prime(_);this.m=u.p,this.prime=u}else n(_.gtn(1),"modulus must be greater than 1"),this.m=_,this.prime=null}le.prototype._verify1=function(u){n(u.negative===0,"red works only with positives"),n(u.red,"red works only with red numbers")},le.prototype._verify2=function(u,d){n((u.negative|d.negative)===0,"red works only with positives"),n(u.red&&u.red===d.red,"red works only with red numbers")},le.prototype.imod=function(u){return this.prime?this.prime.ireduce(u)._forceRed(this):(y(u,u.umod(this.m)._forceRed(this)),u)},le.prototype.neg=function(u){return u.isZero()?u.clone():this.m.sub(u)._forceRed(this)},le.prototype.add=function(u,d){this._verify2(u,d);var w=u.add(d);return w.cmp(this.m)>=0&&w.isub(this.m),w._forceRed(this)},le.prototype.iadd=function(u,d){this._verify2(u,d);var w=u.iadd(d);return w.cmp(this.m)>=0&&w.isub(this.m),w},le.prototype.sub=function(u,d){this._verify2(u,d);var w=u.sub(d);return w.cmpn(0)<0&&w.iadd(this.m),w._forceRed(this)},le.prototype.isub=function(u,d){this._verify2(u,d);var w=u.isub(d);return w.cmpn(0)<0&&w.iadd(this.m),w},le.prototype.shl=function(u,d){return this._verify1(u),this.imod(u.ushln(d))},le.prototype.imul=function(u,d){return this._verify2(u,d),this.imod(u.imul(d))},le.prototype.mul=function(u,d){return this._verify2(u,d),this.imod(u.mul(d))},le.prototype.isqr=function(u){return this.imul(u,u.clone())},le.prototype.sqr=function(u){return this.mul(u,u)},le.prototype.sqrt=function(u){if(u.isZero())return u.clone();var d=this.m.andln(3);if(n(d%2===1),d===3){var w=this.m.add(new s(1)).iushrn(2);return this.pow(u,w)}for(var E=this.m.subn(1),c=0;!E.isZero()&&E.andln(1)===0;)c++,E.iushrn(1);n(!E.isZero());var m=new s(1).toRed(this),b=m.redNeg(),p=this.m.subn(1).iushrn(1),f=this.m.bitLength();for(f=new s(2*f*f).toRed(this);this.pow(f,p).cmp(b)!==0;)f.redIAdd(b);for(var v=this.pow(f,E),T=this.pow(u,E.addn(1).iushrn(1)),h=this.pow(u,E),x=c;h.cmp(m)!==0;){for(var S=h,N=0;S.cmp(m)!==0;N++)S=S.redSqr();n(N<x);var L=this.pow(v,new s(1).iushln(x-N-1));T=T.redMul(L),v=L.redSqr(),h=h.redMul(v),x=N}return T},le.prototype.invm=function(u){var d=u._invmp(this.m);return d.negative!==0?(d.negative=0,this.imod(d).redNeg()):this.imod(d)},le.prototype.pow=function(u,d){if(d.isZero())return new s(1).toRed(this);if(d.cmpn(1)===0)return u.clone();var w=4,E=new Array(1<<w);E[0]=new s(1).toRed(this),E[1]=u;for(var c=2;c<E.length;c++)E[c]=this.mul(E[c-1],u);var m=E[0],b=0,p=0,f=d.bitLength()%26;for(f===0&&(f=26),c=d.length-1;c>=0;c--){for(var v=d.words[c],T=f-1;T>=0;T--){var h=v>>T&1;if(m!==E[0]&&(m=this.sqr(m)),h===0&&b===0){p=0;continue}b<<=1,b|=h,p++,!(p!==w&&(c!==0||T!==0))&&(m=this.mul(m,E[b]),p=0,b=0)}f=26}return m},le.prototype.convertTo=function(u){var d=u.umod(this.m);return d===u?d.clone():d},le.prototype.convertFrom=function(u){var d=u.clone();return d.red=null,d},s.mont=function(u){return new at(u)};function at(_){le.call(this,_),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}i(at,le),at.prototype.convertTo=function(u){return this.imod(u.ushln(this.shift))},at.prototype.convertFrom=function(u){var d=this.imod(u.mul(this.rinv));return d.red=null,d},at.prototype.imul=function(u,d){if(u.isZero()||d.isZero())return u.words[0]=0,u.length=1,u;var w=u.imul(d),E=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),c=w.isub(E).iushrn(this.shift),m=c;return c.cmp(this.m)>=0?m=c.isub(this.m):c.cmpn(0)<0&&(m=c.iadd(this.m)),m._forceRed(this)},at.prototype.mul=function(u,d){if(u.isZero()||d.isZero())return new s(0)._forceRed(this);var w=u.mul(d),E=w.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),c=w.isub(E).iushrn(this.shift),m=c;return c.cmp(this.m)>=0?m=c.isub(this.m):c.cmpn(0)<0&&(m=c.iadd(this.m)),m._forceRed(this)},at.prototype.invm=function(u){var d=this.imod(u._invmp(this.m).mul(this.r2));return d._forceRed(this)}})(t,Wa)})(po);var bl=po.exports;const ee=ji(bl),wl="logger/5.7.0";let Ko=!1,$o=!1;const vi={debug:1,default:2,info:2,warning:3,error:4,off:5};let Jo=vi.default,Es=null;function Al(){try{const t=[];if(["NFD","NFC","NFKD","NFKC"].forEach(e=>{try{if("test".normalize(e)!=="test")throw new Error("bad normalize")}catch{t.push(e)}}),t.length)throw new Error("missing "+t.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(t){return t.message}return null}const Yo=Al();var Gs;(function(t){t.DEBUG="DEBUG",t.INFO="INFO",t.WARNING="WARNING",t.ERROR="ERROR",t.OFF="OFF"})(Gs||(Gs={}));var Vt;(function(t){t.UNKNOWN_ERROR="UNKNOWN_ERROR",t.NOT_IMPLEMENTED="NOT_IMPLEMENTED",t.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",t.NETWORK_ERROR="NETWORK_ERROR",t.SERVER_ERROR="SERVER_ERROR",t.TIMEOUT="TIMEOUT",t.BUFFER_OVERRUN="BUFFER_OVERRUN",t.NUMERIC_FAULT="NUMERIC_FAULT",t.MISSING_NEW="MISSING_NEW",t.INVALID_ARGUMENT="INVALID_ARGUMENT",t.MISSING_ARGUMENT="MISSING_ARGUMENT",t.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",t.CALL_EXCEPTION="CALL_EXCEPTION",t.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",t.NONCE_EXPIRED="NONCE_EXPIRED",t.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",t.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",t.TRANSACTION_REPLACED="TRANSACTION_REPLACED",t.ACTION_REJECTED="ACTION_REJECTED"})(Vt||(Vt={}));const Qo="0123456789abcdef";let R=class ft{constructor(e){Object.defineProperty(this,"version",{enumerable:!0,value:e,writable:!1})}_log(e,r){const n=e.toLowerCase();vi[n]==null&&this.throwArgumentError("invalid log level name","logLevel",e),!(Jo>vi[n])&&console.log.apply(console,r)}debug(...e){this._log(ft.levels.DEBUG,e)}info(...e){this._log(ft.levels.INFO,e)}warn(...e){this._log(ft.levels.WARNING,e)}makeError(e,r,n){if($o)return this.makeError("censored error",r,{});r||(r=ft.errors.UNKNOWN_ERROR),n||(n={});const i=[];Object.keys(n).forEach(l=>{const g=n[l];try{if(g instanceof Uint8Array){let y="";for(let A=0;A<g.length;A++)y+=Qo[g[A]>>4],y+=Qo[g[A]&15];i.push(l+"=Uint8Array(0x"+y+")")}else i.push(l+"="+JSON.stringify(g))}catch{i.push(l+"="+JSON.stringify(n[l].toString()))}}),i.push(`code=${r}`),i.push(`version=${this.version}`);const s=e;let o="";switch(r){case Vt.NUMERIC_FAULT:{o="NUMERIC_FAULT";const l=e;switch(l){case"overflow":case"underflow":case"division-by-zero":o+="-"+l;break;case"negative-power":case"negative-width":o+="-unsupported";break;case"unbound-bitwise-result":o+="-unbound-result";break}break}case Vt.CALL_EXCEPTION:case Vt.INSUFFICIENT_FUNDS:case Vt.MISSING_NEW:case Vt.NONCE_EXPIRED:case Vt.REPLACEMENT_UNDERPRICED:case Vt.TRANSACTION_REPLACED:case Vt.UNPREDICTABLE_GAS_LIMIT:o=r;break}o&&(e+=" [ See: https://links.ethers.org/v5-errors-"+o+" ]"),i.length&&(e+=" ("+i.join(", ")+")");const a=new Error(e);return a.reason=s,a.code=r,Object.keys(n).forEach(function(l){a[l]=n[l]}),a}throwError(e,r,n){throw this.makeError(e,r,n)}throwArgumentError(e,r,n){return this.throwError(e,ft.errors.INVALID_ARGUMENT,{argument:r,value:n})}assert(e,r,n,i){e||this.throwError(r,n,i)}assertArgument(e,r,n,i){e||this.throwArgumentError(r,n,i)}checkNormalize(e){Yo&&this.throwError("platform missing String.prototype.normalize",ft.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:Yo})}checkSafeUint53(e,r){typeof e=="number"&&(r==null&&(r="value not safe"),(e<0||e>=9007199254740991)&&this.throwError(r,ft.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:e}),e%1&&this.throwError(r,ft.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:e}))}checkArgumentCount(e,r,n){n?n=": "+n:n="",e<r&&this.throwError("missing argument"+n,ft.errors.MISSING_ARGUMENT,{count:e,expectedCount:r}),e>r&&this.throwError("too many arguments"+n,ft.errors.UNEXPECTED_ARGUMENT,{count:e,expectedCount:r})}checkNew(e,r){(e===Object||e==null)&&this.throwError("missing new",ft.errors.MISSING_NEW,{name:r.name})}checkAbstract(e,r){e===r?this.throwError("cannot instantiate abstract class "+JSON.stringify(r.name)+" directly; use a sub-class",ft.errors.UNSUPPORTED_OPERATION,{name:e.name,operation:"new"}):(e===Object||e==null)&&this.throwError("missing new",ft.errors.MISSING_NEW,{name:r.name})}static globalLogger(){return Es||(Es=new ft(wl)),Es}static setCensorship(e,r){if(!e&&r&&this.globalLogger().throwError("cannot permanently disable censorship",ft.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Ko){if(!e)return;this.globalLogger().throwError("error censorship permanent",ft.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}$o=!!e,Ko=!!r}static setLogLevel(e){const r=vi[e.toLowerCase()];if(r==null){ft.globalLogger().warn("invalid log level - "+e);return}Jo=r}static from(e){return new ft(e)}};R.errors=Vt;R.levels=Gs;const El="bytes/5.7.0",rt=new R(El);function Ka(t){return!!t.toHexString}function yn(t){return t.slice||(t.slice=function(){const e=Array.prototype.slice.call(arguments);return yn(new Uint8Array(Array.prototype.slice.apply(t,e)))}),t}function Or(t){return pe(t)&&!(t.length%2)||Wi(t)}function Xo(t){return typeof t=="number"&&t==t&&t%1===0}function Wi(t){if(t==null)return!1;if(t.constructor===Uint8Array)return!0;if(typeof t=="string"||!Xo(t.length)||t.length<0)return!1;for(let e=0;e<t.length;e++){const r=t[e];if(!Xo(r)||r<0||r>=256)return!1}return!0}function q(t,e){if(e||(e={}),typeof t=="number"){rt.checkSafeUint53(t,"invalid arrayify value");const r=[];for(;t;)r.unshift(t&255),t=parseInt(String(t/256));return r.length===0&&r.push(0),yn(new Uint8Array(r))}if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Ka(t)&&(t=t.toHexString()),pe(t)){let r=t.substring(2);r.length%2&&(e.hexPad==="left"?r="0"+r:e.hexPad==="right"?r+="0":rt.throwArgumentError("hex data is odd-length","value",t));const n=[];for(let i=0;i<r.length;i+=2)n.push(parseInt(r.substring(i,i+2),16));return yn(new Uint8Array(n))}return Wi(t)?yn(new Uint8Array(t)):rt.throwArgumentError("invalid arrayify value","value",t)}function ht(t){const e=t.map(i=>q(i)),r=e.reduce((i,s)=>i+s.length,0),n=new Uint8Array(r);return e.reduce((i,s)=>(n.set(s,i),i+s.length),0),yn(n)}function En(t){let e=q(t);if(e.length===0)return e;let r=0;for(;r<e.length&&e[r]===0;)r++;return r&&(e=e.slice(r)),e}function yi(t,e){t=q(t),t.length>e&&rt.throwArgumentError("value out of range","value",arguments[0]);const r=new Uint8Array(e);return r.set(t,e-t.length),yn(r)}function pe(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||e&&t.length!==2+2*e)}const xs="0123456789abcdef";function F(t,e){if(e||(e={}),typeof t=="number"){rt.checkSafeUint53(t,"invalid hexlify value");let r="";for(;t;)r=xs[t&15]+r,t=Math.floor(t/16);return r.length?(r.length%2&&(r="0"+r),"0x"+r):"0x00"}if(typeof t=="bigint")return t=t.toString(16),t.length%2?"0x0"+t:"0x"+t;if(e.allowMissingPrefix&&typeof t=="string"&&t.substring(0,2)!=="0x"&&(t="0x"+t),Ka(t))return t.toHexString();if(pe(t))return t.length%2&&(e.hexPad==="left"?t="0x0"+t.substring(2):e.hexPad==="right"?t+="0":rt.throwArgumentError("hex data is odd-length","value",t)),t.toLowerCase();if(Wi(t)){let r="0x";for(let n=0;n<t.length;n++){let i=t[n];r+=xs[(i&240)>>4]+xs[i&15]}return r}return rt.throwArgumentError("invalid hexlify value","value",t)}function nn(t){if(typeof t!="string")t=F(t);else if(!pe(t)||t.length%2)return null;return(t.length-2)/2}function gt(t,e,r){return typeof t!="string"?t=F(t):(!pe(t)||t.length%2)&&rt.throwArgumentError("invalid hexData","value",t),e=2+2*e,r!=null?"0x"+t.substring(e,2+2*r):"0x"+t.substring(e)}function _t(t){let e="0x";return t.forEach(r=>{e+=F(r).substring(2)}),e}function mo(t){const e=xl(F(t,{hexPad:"left"}));return e==="0x"?"0x0":e}function xl(t){typeof t!="string"&&(t=F(t)),pe(t)||rt.throwArgumentError("invalid hex string","value",t),t=t.substring(2);let e=0;for(;e<t.length&&t[e]==="0";)e++;return"0x"+t.substring(e)}function it(t,e){for(typeof t!="string"?t=F(t):pe(t)||rt.throwArgumentError("invalid hex string","value",t),t.length>2*e+2&&rt.throwArgumentError("value out of range","value",arguments[1]);t.length<2*e+2;)t="0x0"+t.substring(2);return t}function Vi(t){const e={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(Or(t)){let r=q(t);r.length===64?(e.v=27+(r[32]>>7),r[32]&=127,e.r=F(r.slice(0,32)),e.s=F(r.slice(32,64))):r.length===65?(e.r=F(r.slice(0,32)),e.s=F(r.slice(32,64)),e.v=r[64]):rt.throwArgumentError("invalid signature string","signature",t),e.v<27&&(e.v===0||e.v===1?e.v+=27:rt.throwArgumentError("signature invalid v byte","signature",t)),e.recoveryParam=1-e.v%2,e.recoveryParam&&(r[32]|=128),e._vs=F(r.slice(32,64))}else{if(e.r=t.r,e.s=t.s,e.v=t.v,e.recoveryParam=t.recoveryParam,e._vs=t._vs,e._vs!=null){const i=yi(q(e._vs),32);e._vs=F(i);const s=i[0]>=128?1:0;e.recoveryParam==null?e.recoveryParam=s:e.recoveryParam!==s&&rt.throwArgumentError("signature recoveryParam mismatch _vs","signature",t),i[0]&=127;const o=F(i);e.s==null?e.s=o:e.s!==o&&rt.throwArgumentError("signature v mismatch _vs","signature",t)}if(e.recoveryParam==null)e.v==null?rt.throwArgumentError("signature missing v and recoveryParam","signature",t):e.v===0||e.v===1?e.recoveryParam=e.v:e.recoveryParam=1-e.v%2;else if(e.v==null)e.v=27+e.recoveryParam;else{const i=e.v===0||e.v===1?e.v:1-e.v%2;e.recoveryParam!==i&&rt.throwArgumentError("signature recoveryParam mismatch v","signature",t)}e.r==null||!pe(e.r)?rt.throwArgumentError("signature missing or invalid r","signature",t):e.r=it(e.r,32),e.s==null||!pe(e.s)?rt.throwArgumentError("signature missing or invalid s","signature",t):e.s=it(e.s,32);const r=q(e.s);r[0]>=128&&rt.throwArgumentError("signature s out of range","signature",t),e.recoveryParam&&(r[0]|=128);const n=F(r);e._vs&&(pe(e._vs)||rt.throwArgumentError("signature invalid _vs","signature",t),e._vs=it(e._vs,32)),e._vs==null?e._vs=n:e._vs!==n&&rt.throwArgumentError("signature _vs mismatch v and s","signature",t)}return e.yParityAndS=e._vs,e.compact=e.r+e.yParityAndS.substring(2),e}const _l="bignumber/5.7.0";var ki=ee.BN;const ur=new R(_l),_s={},Zo=9007199254740991;let ea=!1;class O{constructor(e,r){e!==_s&&ur.throwError("cannot call constructor directly; use BigNumber.from",R.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=r,this._isBigNumber=!0,Object.freeze(this)}fromTwos(e){return xt(ne(this).fromTwos(e))}toTwos(e){return xt(ne(this).toTwos(e))}abs(){return this._hex[0]==="-"?O.from(this._hex.substring(1)):this}add(e){return xt(ne(this).add(ne(e)))}sub(e){return xt(ne(this).sub(ne(e)))}div(e){return O.from(e).isZero()&&Ot("division-by-zero","div"),xt(ne(this).div(ne(e)))}mul(e){return xt(ne(this).mul(ne(e)))}mod(e){const r=ne(e);return r.isNeg()&&Ot("division-by-zero","mod"),xt(ne(this).umod(r))}pow(e){const r=ne(e);return r.isNeg()&&Ot("negative-power","pow"),xt(ne(this).pow(r))}and(e){const r=ne(e);return(this.isNegative()||r.isNeg())&&Ot("unbound-bitwise-result","and"),xt(ne(this).and(r))}or(e){const r=ne(e);return(this.isNegative()||r.isNeg())&&Ot("unbound-bitwise-result","or"),xt(ne(this).or(r))}xor(e){const r=ne(e);return(this.isNegative()||r.isNeg())&&Ot("unbound-bitwise-result","xor"),xt(ne(this).xor(r))}mask(e){return(this.isNegative()||e<0)&&Ot("negative-width","mask"),xt(ne(this).maskn(e))}shl(e){return(this.isNegative()||e<0)&&Ot("negative-width","shl"),xt(ne(this).shln(e))}shr(e){return(this.isNegative()||e<0)&&Ot("negative-width","shr"),xt(ne(this).shrn(e))}eq(e){return ne(this).eq(ne(e))}lt(e){return ne(this).lt(ne(e))}lte(e){return ne(this).lte(ne(e))}gt(e){return ne(this).gt(ne(e))}gte(e){return ne(this).gte(ne(e))}isNegative(){return this._hex[0]==="-"}isZero(){return ne(this).isZero()}toNumber(){try{return ne(this).toNumber()}catch{Ot("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return ur.throwError("this platform does not support BigInt",R.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?ea||(ea=!0,ur.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?ur.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",R.errors.UNEXPECTED_ARGUMENT,{}):ur.throwError("BigNumber.toString does not accept parameters",R.errors.UNEXPECTED_ARGUMENT,{})),ne(this).toString(10)}toHexString(){return this._hex}toJSON(e){return{type:"BigNumber",hex:this.toHexString()}}static from(e){if(e instanceof O)return e;if(typeof e=="string")return e.match(/^-?0x[0-9a-f]+$/i)?new O(_s,$n(e)):e.match(/^-?[0-9]+$/)?new O(_s,$n(new ki(e))):ur.throwArgumentError("invalid BigNumber string","value",e);if(typeof e=="number")return e%1&&Ot("underflow","BigNumber.from",e),(e>=Zo||e<=-Zo)&&Ot("overflow","BigNumber.from",e),O.from(String(e));const r=e;if(typeof r=="bigint")return O.from(r.toString());if(Wi(r))return O.from(F(r));if(r)if(r.toHexString){const n=r.toHexString();if(typeof n=="string")return O.from(n)}else{let n=r._hex;if(n==null&&r.type==="BigNumber"&&(n=r.hex),typeof n=="string"&&(pe(n)||n[0]==="-"&&pe(n.substring(1))))return O.from(n)}return ur.throwArgumentError("invalid BigNumber value","value",e)}static isBigNumber(e){return!!(e&&e._isBigNumber)}}function $n(t){if(typeof t!="string")return $n(t.toString(16));if(t[0]==="-")return t=t.substring(1),t[0]==="-"&&ur.throwArgumentError("invalid hex","value",t),t=$n(t),t==="0x00"?t:"-"+t;if(t.substring(0,2)!=="0x"&&(t="0x"+t),t==="0x")return"0x00";for(t.length%2&&(t="0x0"+t.substring(2));t.length>4&&t.substring(0,4)==="0x00";)t="0x"+t.substring(4);return t}function xt(t){return O.from($n(t))}function ne(t){const e=O.from(t).toHexString();return e[0]==="-"?new ki("-"+e.substring(3),16):new ki(e.substring(2),16)}function Ot(t,e,r){const n={fault:t,operation:e};return r!=null&&(n.value=r),ur.throwError(t,R.errors.NUMERIC_FAULT,n)}function Sl(t){return new ki(t,36).toString(16)}const Il="properties/5.7.0";var Ml=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(y){try{g(n.next(y))}catch(A){o(A)}}function l(y){try{g(n.throw(y))}catch(A){o(A)}}function g(y){y.done?s(y.value):i(y.value).then(a,l)}g((n=n.apply(t,e||[])).next())})};const $a=new R(Il);function G(t,e,r){Object.defineProperty(t,e,{enumerable:!0,value:r,writable:!1})}function dn(t,e){for(let r=0;r<32;r++){if(t[e])return t[e];if(!t.prototype||typeof t.prototype!="object")break;t=Object.getPrototypeOf(t.prototype).constructor}return null}function ot(t){return Ml(this,void 0,void 0,function*(){const e=Object.keys(t).map(n=>{const i=t[n];return Promise.resolve(i).then(s=>({key:n,value:s}))});return(yield Promise.all(e)).reduce((n,i)=>(n[i.key]=i.value,n),{})})}function Tt(t){const e={};for(const r in t)e[r]=t[r];return e}const Nl={bigint:!0,boolean:!0,function:!0,number:!0,string:!0};function Ja(t){if(t==null||Nl[typeof t])return!0;if(Array.isArray(t)||typeof t=="object"){if(!Object.isFrozen(t))return!1;const e=Object.keys(t);for(let r=0;r<e.length;r++){let n=null;try{n=t[e[r]]}catch{continue}if(!Ja(n))return!1}return!0}return $a.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function kl(t){if(Ja(t))return t;if(Array.isArray(t))return Object.freeze(t.map(e=>xn(e)));if(typeof t=="object"){const e={};for(const r in t){const n=t[r];n!==void 0&&G(e,r,xn(n))}return e}return $a.throwArgumentError(`Cannot deepCopy ${typeof t}`,"object",t)}function xn(t){return kl(t)}class ri{constructor(e){for(const r in e)this[r]=xn(e[r])}}const ni="abi/5.7.0",ae=new R(ni),sn={};let ta={calldata:!0,memory:!0,storage:!0},Tl={calldata:!0,memory:!0};function li(t,e){if(t==="bytes"||t==="string"){if(ta[e])return!0}else if(t==="address"){if(e==="payable")return!0}else if((t.indexOf("[")>=0||t==="tuple")&&Tl[e])return!0;return(ta[e]||e==="payable")&&ae.throwArgumentError("invalid modifier","name",e),!1}function Cl(t,e){let r=t;function n(a){ae.throwArgumentError(`unexpected character at position ${a}`,"param",t)}t=t.replace(/\s/g," ");function i(a){let l={type:"",name:"",parent:a,state:{allowType:!0}};return e&&(l.indexed=!1),l}let s={type:"",name:"",state:{allowType:!0}},o=s;for(let a=0;a<t.length;a++){let l=t[a];switch(l){case"(":o.state.allowType&&o.type===""?o.type="tuple":o.state.allowParams||n(a),o.state.allowType=!1,o.type=cn(o.type),o.components=[i(o)],o=o.components[0];break;case")":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),li(o.type,o.name)&&(o.name=""),o.type=cn(o.type);let g=o;o=o.parent,o||n(a),delete g.parent,o.state.allowParams=!1,o.state.allowName=!0,o.state.allowArray=!0;break;case",":delete o.state,o.name==="indexed"&&(e||n(a),o.indexed=!0,o.name=""),li(o.type,o.name)&&(o.name=""),o.type=cn(o.type);let y=i(o.parent);o.parent.components.push(y),delete o.parent,o=y;break;case" ":o.state.allowType&&o.type!==""&&(o.type=cn(o.type),delete o.state.allowType,o.state.allowName=!0,o.state.allowParams=!0),o.state.allowName&&o.name!==""&&(o.name==="indexed"?(e||n(a),o.indexed&&n(a),o.indexed=!0,o.name=""):li(o.type,o.name)?o.name="":o.state.allowName=!1);break;case"[":o.state.allowArray||n(a),o.type+=l,o.state.allowArray=!1,o.state.allowName=!1,o.state.readArray=!0;break;case"]":o.state.readArray||n(a),o.type+=l,o.state.readArray=!1,o.state.allowArray=!0,o.state.allowName=!0;break;default:o.state.allowType?(o.type+=l,o.state.allowParams=!0,o.state.allowArray=!0):o.state.allowName?(o.name+=l,delete o.state.allowArray):o.state.readArray?o.type+=l:n(a)}}return o.parent&&ae.throwArgumentError("unexpected eof","param",t),delete s.state,o.name==="indexed"?(e||n(r.length-7),o.indexed&&n(r.length-7),o.indexed=!0,o.name=""):li(o.type,o.name)&&(o.name=""),s.type=cn(s.type),s}function bi(t,e){for(let r in e)G(t,r,e[r])}const he=Object.freeze({sighash:"sighash",minimal:"minimal",full:"full",json:"json"}),Ol=new RegExp(/^(.*)\[([0-9]*)\]$/);class ut{constructor(e,r){e!==sn&&ae.throwError("use fromString",R.errors.UNSUPPORTED_OPERATION,{operation:"new ParamType()"}),bi(this,r);let n=this.type.match(Ol);n?bi(this,{arrayLength:parseInt(n[2]||"-1"),arrayChildren:ut.fromObject({type:n[1],components:this.components}),baseType:"array"}):bi(this,{arrayLength:null,arrayChildren:null,baseType:this.components!=null?"tuple":this.type}),this._isParamType=!0,Object.freeze(this)}format(e){if(e||(e=he.sighash),he[e]||ae.throwArgumentError("invalid format type","format",e),e===he.json){let n={type:this.baseType==="tuple"?"tuple":this.type,name:this.name||void 0};return typeof this.indexed=="boolean"&&(n.indexed=this.indexed),this.components&&(n.components=this.components.map(i=>JSON.parse(i.format(e)))),JSON.stringify(n)}let r="";return this.baseType==="array"?(r+=this.arrayChildren.format(e),r+="["+(this.arrayLength<0?"":String(this.arrayLength))+"]"):this.baseType==="tuple"?(e!==he.sighash&&(r+=this.type),r+="("+this.components.map(n=>n.format(e)).join(e===he.full?", ":",")+")"):r+=this.type,e!==he.sighash&&(this.indexed===!0&&(r+=" indexed"),e===he.full&&this.name&&(r+=" "+this.name)),r}static from(e,r){return typeof e=="string"?ut.fromString(e,r):ut.fromObject(e)}static fromObject(e){return ut.isParamType(e)?e:new ut(sn,{name:e.name||null,type:cn(e.type),indexed:e.indexed==null?null:!!e.indexed,components:e.components?e.components.map(ut.fromObject):null})}static fromString(e,r){function n(i){return ut.fromObject({name:i.name,type:i.type,indexed:i.indexed,components:i.components})}return n(Cl(e,!!r))}static isParamType(e){return!!(e!=null&&e._isParamType)}}function Jn(t,e){return Rl(t).map(r=>ut.fromString(r,e))}class hr{constructor(e,r){e!==sn&&ae.throwError("use a static from method",R.errors.UNSUPPORTED_OPERATION,{operation:"new Fragment()"}),bi(this,r),this._isFragment=!0,Object.freeze(this)}static from(e){return hr.isFragment(e)?e:typeof e=="string"?hr.fromString(e):hr.fromObject(e)}static fromObject(e){if(hr.isFragment(e))return e;switch(e.type){case"function":return tr.fromObject(e);case"event":return cr.fromObject(e);case"constructor":return er.fromObject(e);case"error":return Nr.fromObject(e);case"fallback":case"receive":return null}return ae.throwArgumentError("invalid fragment object","value",e)}static fromString(e){return e=e.replace(/\s/g," "),e=e.replace(/\(/g," (").replace(/\)/g,") ").replace(/\s+/g," "),e=e.trim(),e.split(" ")[0]==="event"?cr.fromString(e.substring(5).trim()):e.split(" ")[0]==="function"?tr.fromString(e.substring(8).trim()):e.split("(")[0].trim()==="constructor"?er.fromString(e.trim()):e.split(" ")[0]==="error"?Nr.fromString(e.substring(5).trim()):ae.throwArgumentError("unsupported fragment","value",e)}static isFragment(e){return!!(e&&e._isFragment)}}class cr extends hr{format(e){if(e||(e=he.sighash),he[e]||ae.throwArgumentError("invalid format type","format",e),e===he.json)return JSON.stringify({type:"event",anonymous:this.anonymous,name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==he.sighash&&(r+="event "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===he.full?", ":",")+") ",e!==he.sighash&&this.anonymous&&(r+="anonymous "),r.trim()}static from(e){return typeof e=="string"?cr.fromString(e):cr.fromObject(e)}static fromObject(e){if(cr.isEventFragment(e))return e;e.type!=="event"&&ae.throwArgumentError("invalid event object","value",e);const r={name:Yn(e.name),anonymous:e.anonymous,inputs:e.inputs?e.inputs.map(ut.fromObject):[],type:"event"};return new cr(sn,r)}static fromString(e){let r=e.match(Qn);r||ae.throwArgumentError("invalid event string","value",e);let n=!1;return r[3].split(" ").forEach(i=>{switch(i.trim()){case"anonymous":n=!0;break;case"":break;default:ae.warn("unknown modifier: "+i)}}),cr.fromObject({name:r[1].trim(),anonymous:n,inputs:Jn(r[2],!0),type:"event"})}static isEventFragment(e){return e&&e._isFragment&&e.type==="event"}}function Ya(t,e){e.gas=null;let r=t.split("@");return r.length!==1?(r.length>2&&ae.throwArgumentError("invalid human-readable ABI signature","value",t),r[1].match(/^[0-9]+$/)||ae.throwArgumentError("invalid human-readable ABI signature gas","value",t),e.gas=O.from(r[1]),r[0]):t}function Qa(t,e){e.constant=!1,e.payable=!1,e.stateMutability="nonpayable",t.split(" ").forEach(r=>{switch(r.trim()){case"constant":e.constant=!0;break;case"payable":e.payable=!0,e.stateMutability="payable";break;case"nonpayable":e.payable=!1,e.stateMutability="nonpayable";break;case"pure":e.constant=!0,e.stateMutability="pure";break;case"view":e.constant=!0,e.stateMutability="view";break;case"external":case"public":case"":break;default:console.log("unknown modifier: "+r)}})}function Xa(t){let e={constant:!1,payable:!0,stateMutability:"payable"};return t.stateMutability!=null?(e.stateMutability=t.stateMutability,e.constant=e.stateMutability==="view"||e.stateMutability==="pure",t.constant!=null&&!!t.constant!==e.constant&&ae.throwArgumentError("cannot have constant function with mutability "+e.stateMutability,"value",t),e.payable=e.stateMutability==="payable",t.payable!=null&&!!t.payable!==e.payable&&ae.throwArgumentError("cannot have payable function with mutability "+e.stateMutability,"value",t)):t.payable!=null?(e.payable=!!t.payable,t.constant==null&&!e.payable&&t.type!=="constructor"&&ae.throwArgumentError("unable to determine stateMutability","value",t),e.constant=!!t.constant,e.constant?e.stateMutability="view":e.stateMutability=e.payable?"payable":"nonpayable",e.payable&&e.constant&&ae.throwArgumentError("cannot have constant payable function","value",t)):t.constant!=null?(e.constant=!!t.constant,e.payable=!e.constant,e.stateMutability=e.constant?"view":"payable"):t.type!=="constructor"&&ae.throwArgumentError("unable to determine stateMutability","value",t),e}class er extends hr{format(e){if(e||(e=he.sighash),he[e]||ae.throwArgumentError("invalid format type","format",e),e===he.json)return JSON.stringify({type:"constructor",stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});e===he.sighash&&ae.throwError("cannot format a constructor for sighash",R.errors.UNSUPPORTED_OPERATION,{operation:"format(sighash)"});let r="constructor("+this.inputs.map(n=>n.format(e)).join(e===he.full?", ":",")+") ";return this.stateMutability&&this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "),r.trim()}static from(e){return typeof e=="string"?er.fromString(e):er.fromObject(e)}static fromObject(e){if(er.isConstructorFragment(e))return e;e.type!=="constructor"&&ae.throwArgumentError("invalid constructor object","value",e);let r=Xa(e);r.constant&&ae.throwArgumentError("constructor cannot be constant","value",e);const n={name:null,type:e.type,inputs:e.inputs?e.inputs.map(ut.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?O.from(e.gas):null};return new er(sn,n)}static fromString(e){let r={type:"constructor"};e=Ya(e,r);let n=e.match(Qn);return(!n||n[1].trim()!=="constructor")&&ae.throwArgumentError("invalid constructor string","value",e),r.inputs=Jn(n[2].trim(),!1),Qa(n[3].trim(),r),er.fromObject(r)}static isConstructorFragment(e){return e&&e._isFragment&&e.type==="constructor"}}class tr extends er{format(e){if(e||(e=he.sighash),he[e]||ae.throwArgumentError("invalid format type","format",e),e===he.json)return JSON.stringify({type:"function",name:this.name,constant:this.constant,stateMutability:this.stateMutability!=="nonpayable"?this.stateMutability:void 0,payable:this.payable,gas:this.gas?this.gas.toNumber():void 0,inputs:this.inputs.map(n=>JSON.parse(n.format(e))),outputs:this.outputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==he.sighash&&(r+="function "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===he.full?", ":",")+") ",e!==he.sighash&&(this.stateMutability?this.stateMutability!=="nonpayable"&&(r+=this.stateMutability+" "):this.constant&&(r+="view "),this.outputs&&this.outputs.length&&(r+="returns ("+this.outputs.map(n=>n.format(e)).join(", ")+") "),this.gas!=null&&(r+="@"+this.gas.toString()+" ")),r.trim()}static from(e){return typeof e=="string"?tr.fromString(e):tr.fromObject(e)}static fromObject(e){if(tr.isFunctionFragment(e))return e;e.type!=="function"&&ae.throwArgumentError("invalid function object","value",e);let r=Xa(e);const n={type:e.type,name:Yn(e.name),constant:r.constant,inputs:e.inputs?e.inputs.map(ut.fromObject):[],outputs:e.outputs?e.outputs.map(ut.fromObject):[],payable:r.payable,stateMutability:r.stateMutability,gas:e.gas?O.from(e.gas):null};return new tr(sn,n)}static fromString(e){let r={type:"function"};e=Ya(e,r);let n=e.split(" returns ");n.length>2&&ae.throwArgumentError("invalid function string","value",e);let i=n[0].match(Qn);if(i||ae.throwArgumentError("invalid function signature","value",e),r.name=i[1].trim(),r.name&&Yn(r.name),r.inputs=Jn(i[2],!1),Qa(i[3].trim(),r),n.length>1){let s=n[1].match(Qn);(s[1].trim()!=""||s[3].trim()!="")&&ae.throwArgumentError("unexpected tokens","value",e),r.outputs=Jn(s[2],!1)}else r.outputs=[];return tr.fromObject(r)}static isFunctionFragment(e){return e&&e._isFragment&&e.type==="function"}}function ra(t){const e=t.format();return(e==="Error(string)"||e==="Panic(uint256)")&&ae.throwArgumentError(`cannot specify user defined ${e} error`,"fragment",t),t}class Nr extends hr{format(e){if(e||(e=he.sighash),he[e]||ae.throwArgumentError("invalid format type","format",e),e===he.json)return JSON.stringify({type:"error",name:this.name,inputs:this.inputs.map(n=>JSON.parse(n.format(e)))});let r="";return e!==he.sighash&&(r+="error "),r+=this.name+"("+this.inputs.map(n=>n.format(e)).join(e===he.full?", ":",")+") ",r.trim()}static from(e){return typeof e=="string"?Nr.fromString(e):Nr.fromObject(e)}static fromObject(e){if(Nr.isErrorFragment(e))return e;e.type!=="error"&&ae.throwArgumentError("invalid error object","value",e);const r={type:e.type,name:Yn(e.name),inputs:e.inputs?e.inputs.map(ut.fromObject):[]};return ra(new Nr(sn,r))}static fromString(e){let r={type:"error"},n=e.match(Qn);return n||ae.throwArgumentError("invalid error signature","value",e),r.name=n[1].trim(),r.name&&Yn(r.name),r.inputs=Jn(n[2],!1),ra(Nr.fromObject(r))}static isErrorFragment(e){return e&&e._isFragment&&e.type==="error"}}function cn(t){return t.match(/^uint($|[^1-9])/)?t="uint256"+t.substring(4):t.match(/^int($|[^1-9])/)&&(t="int256"+t.substring(3)),t}const Pl=new RegExp("^[a-zA-Z$_][a-zA-Z0-9$_]*$");function Yn(t){return(!t||!t.match(Pl))&&ae.throwArgumentError(`invalid identifier "${t}"`,"value",t),t}const Qn=new RegExp("^([^)(]*)\\((.*)\\)([^)(]*)$");function Rl(t){t=t.trim();let e=[],r="",n=0;for(let i=0;i<t.length;i++){let s=t[i];s===","&&n===0?(e.push(r),r=""):(r+=s,s==="("?n++:s===")"&&(n--,n===-1&&ae.throwArgumentError("unbalanced parenthesis","value",t)))}return r&&e.push(r),e}const vo=new R(ni);function Bl(t){const e=[],r=function(n,i){if(Array.isArray(i))for(let s in i){const o=n.slice();o.push(s);try{r(o,i[s])}catch(a){e.push({path:o,error:a})}}};return r([],t),e}class mr{constructor(e,r,n,i){this.name=e,this.type=r,this.localName=n,this.dynamic=i}_throwError(e,r){vo.throwArgumentError(e,this.localName,r)}}class js{constructor(e){G(this,"wordSize",e||32),this._data=[],this._dataLength=0,this._padding=new Uint8Array(e)}get data(){return _t(this._data)}get length(){return this._dataLength}_writeData(e){return this._data.push(e),this._dataLength+=e.length,e.length}appendWriter(e){return this._writeData(ht(e._data))}writeBytes(e){let r=q(e);const n=r.length%this.wordSize;return n&&(r=ht([r,this._padding.slice(n)])),this._writeData(r)}_getValue(e){let r=q(O.from(e));return r.length>this.wordSize&&vo.throwError("value out-of-bounds",R.errors.BUFFER_OVERRUN,{length:this.wordSize,offset:r.length}),r.length%this.wordSize&&(r=ht([this._padding.slice(r.length%this.wordSize),r])),r}writeValue(e){return this._writeData(this._getValue(e))}writeUpdatableValue(){const e=this._data.length;return this._data.push(this._padding),this._dataLength+=this.wordSize,r=>{this._data[e]=this._getValue(r)}}}class Ti{constructor(e,r,n,i){G(this,"_data",q(e)),G(this,"wordSize",r||32),G(this,"_coerceFunc",n),G(this,"allowLoose",i),this._offset=0}get data(){return F(this._data)}get consumed(){return this._offset}static coerce(e,r){let n=e.match("^u?int([0-9]+)$");return n&&parseInt(n[1])<=48&&(r=r.toNumber()),r}coerce(e,r){return this._coerceFunc?this._coerceFunc(e,r):Ti.coerce(e,r)}_peekBytes(e,r,n){let i=Math.ceil(r/this.wordSize)*this.wordSize;return this._offset+i>this._data.length&&(this.allowLoose&&n&&this._offset+r<=this._data.length?i=r:vo.throwError("data out-of-bounds",R.errors.BUFFER_OVERRUN,{length:this._data.length,offset:this._offset+i})),this._data.slice(this._offset,this._offset+i)}subReader(e){return new Ti(this._data.slice(this._offset+e),this.wordSize,this._coerceFunc,this.allowLoose)}readBytes(e,r){let n=this._peekBytes(0,e,!!r);return this._offset+=n.length,n.slice(0,e)}readValue(){return O.from(this.readBytes(this.wordSize))}}var Za={exports:{}};/**
 * [js-sha3]{@link https://github.com/emn178/js-sha3}
 *
 * @version 0.8.0
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2015-2018
 * @license MIT
 */(function(t){(function(){var e="input is invalid type",r="finalize already called",n=typeof window=="object",i=n?window:{};i.JS_SHA3_NO_WINDOW&&(n=!1);var s=!n&&typeof self=="object",o=!i.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;o?i=Wa:s&&(i=self);var a=!i.JS_SHA3_NO_COMMON_JS&&!0&&t.exports,l=!i.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",g="0123456789abcdef".split(""),y=[31,7936,2031616,520093696],A=[4,1024,262144,67108864],I=[1,256,65536,16777216],M=[6,1536,393216,100663296],k=[0,8,16,24],P=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],j=[224,256,384,512],B=[128,256],W=["hex","buffer","arrayBuffer","array","digest"],H={128:168,256:136};(i.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(h){return Object.prototype.toString.call(h)==="[object Array]"}),l&&(i.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(h){return typeof h=="object"&&h.buffer&&h.buffer.constructor===ArrayBuffer});for(var J=function(h,x,S){return function(N){return new f(h,x,h).update(N)[S]()}},K=function(h,x,S){return function(N,L){return new f(h,x,L).update(N)[S]()}},Y=function(h,x,S){return function(N,L,z,D){return u["cshake"+h].update(N,L,z,D)[S]()}},ye=function(h,x,S){return function(N,L,z,D){return u["kmac"+h].update(N,L,z,D)[S]()}},de=function(h,x,S,N){for(var L=0;L<W.length;++L){var z=W[L];h[z]=x(S,N,z)}return h},X=function(h,x){var S=J(h,x,"hex");return S.create=function(){return new f(h,x,h)},S.update=function(N){return S.create().update(N)},de(S,J,h,x)},we=function(h,x){var S=K(h,x,"hex");return S.create=function(N){return new f(h,x,N)},S.update=function(N,L){return S.create(L).update(N)},de(S,K,h,x)},le=function(h,x){var S=H[h],N=Y(h,x,"hex");return N.create=function(L,z,D){return!z&&!D?u["shake"+h].create(L):new f(h,x,L).bytepad([z,D],S)},N.update=function(L,z,D,U){return N.create(z,D,U).update(L)},de(N,Y,h,x)},at=function(h,x){var S=H[h],N=ye(h,x,"hex");return N.create=function(L,z,D){return new v(h,x,z).bytepad(["KMAC",D],S).bytepad([L],S)},N.update=function(L,z,D,U){return N.create(L,D,U).update(z)},de(N,ye,h,x)},_=[{name:"keccak",padding:I,bits:j,createMethod:X},{name:"sha3",padding:M,bits:j,createMethod:X},{name:"shake",padding:y,bits:B,createMethod:we},{name:"cshake",padding:A,bits:B,createMethod:le},{name:"kmac",padding:A,bits:B,createMethod:at}],u={},d=[],w=0;w<_.length;++w)for(var E=_[w],c=E.bits,m=0;m<c.length;++m){var b=E.name+"_"+c[m];if(d.push(b),u[b]=E.createMethod(c[m],E.padding),E.name!=="sha3"){var p=E.name+c[m];d.push(p),u[p]=u[b]}}function f(h,x,S){this.blocks=[],this.s=[],this.padding=x,this.outputBits=S,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(h<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=S>>5,this.extraBytes=(S&31)>>3;for(var N=0;N<50;++N)this.s[N]=0}f.prototype.update=function(h){if(this.finalized)throw new Error(r);var x,S=typeof h;if(S!=="string"){if(S==="object"){if(h===null)throw new Error(e);if(l&&h.constructor===ArrayBuffer)h=new Uint8Array(h);else if(!Array.isArray(h)&&(!l||!ArrayBuffer.isView(h)))throw new Error(e)}else throw new Error(e);x=!0}for(var N=this.blocks,L=this.byteCount,z=h.length,D=this.blockCount,U=0,te=this.s,V,Q;U<z;){if(this.reset)for(this.reset=!1,N[0]=this.block,V=1;V<D+1;++V)N[V]=0;if(x)for(V=this.start;U<z&&V<L;++U)N[V>>2]|=h[U]<<k[V++&3];else for(V=this.start;U<z&&V<L;++U)Q=h.charCodeAt(U),Q<128?N[V>>2]|=Q<<k[V++&3]:Q<2048?(N[V>>2]|=(192|Q>>6)<<k[V++&3],N[V>>2]|=(128|Q&63)<<k[V++&3]):Q<55296||Q>=57344?(N[V>>2]|=(224|Q>>12)<<k[V++&3],N[V>>2]|=(128|Q>>6&63)<<k[V++&3],N[V>>2]|=(128|Q&63)<<k[V++&3]):(Q=65536+((Q&1023)<<10|h.charCodeAt(++U)&1023),N[V>>2]|=(240|Q>>18)<<k[V++&3],N[V>>2]|=(128|Q>>12&63)<<k[V++&3],N[V>>2]|=(128|Q>>6&63)<<k[V++&3],N[V>>2]|=(128|Q&63)<<k[V++&3]);if(this.lastByteIndex=V,V>=L){for(this.start=V-L,this.block=N[D],V=0;V<D;++V)te[V]^=N[V];T(te),this.reset=!0}else this.start=V}return this},f.prototype.encode=function(h,x){var S=h&255,N=1,L=[S];for(h=h>>8,S=h&255;S>0;)L.unshift(S),h=h>>8,S=h&255,++N;return x?L.push(N):L.unshift(N),this.update(L),L.length},f.prototype.encodeString=function(h){var x,S=typeof h;if(S!=="string"){if(S==="object"){if(h===null)throw new Error(e);if(l&&h.constructor===ArrayBuffer)h=new Uint8Array(h);else if(!Array.isArray(h)&&(!l||!ArrayBuffer.isView(h)))throw new Error(e)}else throw new Error(e);x=!0}var N=0,L=h.length;if(x)N=L;else for(var z=0;z<h.length;++z){var D=h.charCodeAt(z);D<128?N+=1:D<2048?N+=2:D<55296||D>=57344?N+=3:(D=65536+((D&1023)<<10|h.charCodeAt(++z)&1023),N+=4)}return N+=this.encode(N*8),this.update(h),N},f.prototype.bytepad=function(h,x){for(var S=this.encode(x),N=0;N<h.length;++N)S+=this.encodeString(h[N]);var L=x-S%x,z=[];return z.length=L,this.update(z),this},f.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var h=this.blocks,x=this.lastByteIndex,S=this.blockCount,N=this.s;if(h[x>>2]|=this.padding[x&3],this.lastByteIndex===this.byteCount)for(h[0]=h[S],x=1;x<S+1;++x)h[x]=0;for(h[S-1]|=2147483648,x=0;x<S;++x)N[x]^=h[x];T(N)}},f.prototype.toString=f.prototype.hex=function(){this.finalize();for(var h=this.blockCount,x=this.s,S=this.outputBlocks,N=this.extraBytes,L=0,z=0,D="",U;z<S;){for(L=0;L<h&&z<S;++L,++z)U=x[L],D+=g[U>>4&15]+g[U&15]+g[U>>12&15]+g[U>>8&15]+g[U>>20&15]+g[U>>16&15]+g[U>>28&15]+g[U>>24&15];z%h===0&&(T(x),L=0)}return N&&(U=x[L],D+=g[U>>4&15]+g[U&15],N>1&&(D+=g[U>>12&15]+g[U>>8&15]),N>2&&(D+=g[U>>20&15]+g[U>>16&15])),D},f.prototype.arrayBuffer=function(){this.finalize();var h=this.blockCount,x=this.s,S=this.outputBlocks,N=this.extraBytes,L=0,z=0,D=this.outputBits>>3,U;N?U=new ArrayBuffer(S+1<<2):U=new ArrayBuffer(D);for(var te=new Uint32Array(U);z<S;){for(L=0;L<h&&z<S;++L,++z)te[z]=x[L];z%h===0&&T(x)}return N&&(te[L]=x[L],U=U.slice(0,D)),U},f.prototype.buffer=f.prototype.arrayBuffer,f.prototype.digest=f.prototype.array=function(){this.finalize();for(var h=this.blockCount,x=this.s,S=this.outputBlocks,N=this.extraBytes,L=0,z=0,D=[],U,te;z<S;){for(L=0;L<h&&z<S;++L,++z)U=z<<2,te=x[L],D[U]=te&255,D[U+1]=te>>8&255,D[U+2]=te>>16&255,D[U+3]=te>>24&255;z%h===0&&T(x)}return N&&(U=z<<2,te=x[L],D[U]=te&255,N>1&&(D[U+1]=te>>8&255),N>2&&(D[U+2]=te>>16&255)),D};function v(h,x,S){f.call(this,h,x,S)}v.prototype=new f,v.prototype.finalize=function(){return this.encode(this.outputBits,!0),f.prototype.finalize.call(this)};var T=function(h){var x,S,N,L,z,D,U,te,V,Q,It,me,oe,tt,Ae,Ee,Lr,xe,_e,Dr,Se,Ie,Ur,Me,Ne,Fr,ke,Te,Hr,Ce,Oe,qr,Pe,Re,zr,Be,Le,Gr,De,Ue,jr,Fe,He,Wr,qe,ze,Vr,Ge,je,Kr,We,Ve,$r,Ke,$e,Jr,Je,Ye,Ar,Er,xr,_r,Sr;for(N=0;N<48;N+=2)L=h[0]^h[10]^h[20]^h[30]^h[40],z=h[1]^h[11]^h[21]^h[31]^h[41],D=h[2]^h[12]^h[22]^h[32]^h[42],U=h[3]^h[13]^h[23]^h[33]^h[43],te=h[4]^h[14]^h[24]^h[34]^h[44],V=h[5]^h[15]^h[25]^h[35]^h[45],Q=h[6]^h[16]^h[26]^h[36]^h[46],It=h[7]^h[17]^h[27]^h[37]^h[47],me=h[8]^h[18]^h[28]^h[38]^h[48],oe=h[9]^h[19]^h[29]^h[39]^h[49],x=me^(D<<1|U>>>31),S=oe^(U<<1|D>>>31),h[0]^=x,h[1]^=S,h[10]^=x,h[11]^=S,h[20]^=x,h[21]^=S,h[30]^=x,h[31]^=S,h[40]^=x,h[41]^=S,x=L^(te<<1|V>>>31),S=z^(V<<1|te>>>31),h[2]^=x,h[3]^=S,h[12]^=x,h[13]^=S,h[22]^=x,h[23]^=S,h[32]^=x,h[33]^=S,h[42]^=x,h[43]^=S,x=D^(Q<<1|It>>>31),S=U^(It<<1|Q>>>31),h[4]^=x,h[5]^=S,h[14]^=x,h[15]^=S,h[24]^=x,h[25]^=S,h[34]^=x,h[35]^=S,h[44]^=x,h[45]^=S,x=te^(me<<1|oe>>>31),S=V^(oe<<1|me>>>31),h[6]^=x,h[7]^=S,h[16]^=x,h[17]^=S,h[26]^=x,h[27]^=S,h[36]^=x,h[37]^=S,h[46]^=x,h[47]^=S,x=Q^(L<<1|z>>>31),S=It^(z<<1|L>>>31),h[8]^=x,h[9]^=S,h[18]^=x,h[19]^=S,h[28]^=x,h[29]^=S,h[38]^=x,h[39]^=S,h[48]^=x,h[49]^=S,tt=h[0],Ae=h[1],ze=h[11]<<4|h[10]>>>28,Vr=h[10]<<4|h[11]>>>28,Te=h[20]<<3|h[21]>>>29,Hr=h[21]<<3|h[20]>>>29,Er=h[31]<<9|h[30]>>>23,xr=h[30]<<9|h[31]>>>23,Fe=h[40]<<18|h[41]>>>14,He=h[41]<<18|h[40]>>>14,Re=h[2]<<1|h[3]>>>31,zr=h[3]<<1|h[2]>>>31,Ee=h[13]<<12|h[12]>>>20,Lr=h[12]<<12|h[13]>>>20,Ge=h[22]<<10|h[23]>>>22,je=h[23]<<10|h[22]>>>22,Ce=h[33]<<13|h[32]>>>19,Oe=h[32]<<13|h[33]>>>19,_r=h[42]<<2|h[43]>>>30,Sr=h[43]<<2|h[42]>>>30,Ke=h[5]<<30|h[4]>>>2,$e=h[4]<<30|h[5]>>>2,Be=h[14]<<6|h[15]>>>26,Le=h[15]<<6|h[14]>>>26,xe=h[25]<<11|h[24]>>>21,_e=h[24]<<11|h[25]>>>21,Kr=h[34]<<15|h[35]>>>17,We=h[35]<<15|h[34]>>>17,qr=h[45]<<29|h[44]>>>3,Pe=h[44]<<29|h[45]>>>3,Me=h[6]<<28|h[7]>>>4,Ne=h[7]<<28|h[6]>>>4,Jr=h[17]<<23|h[16]>>>9,Je=h[16]<<23|h[17]>>>9,Gr=h[26]<<25|h[27]>>>7,De=h[27]<<25|h[26]>>>7,Dr=h[36]<<21|h[37]>>>11,Se=h[37]<<21|h[36]>>>11,Ve=h[47]<<24|h[46]>>>8,$r=h[46]<<24|h[47]>>>8,Wr=h[8]<<27|h[9]>>>5,qe=h[9]<<27|h[8]>>>5,Fr=h[18]<<20|h[19]>>>12,ke=h[19]<<20|h[18]>>>12,Ye=h[29]<<7|h[28]>>>25,Ar=h[28]<<7|h[29]>>>25,Ue=h[38]<<8|h[39]>>>24,jr=h[39]<<8|h[38]>>>24,Ie=h[48]<<14|h[49]>>>18,Ur=h[49]<<14|h[48]>>>18,h[0]=tt^~Ee&xe,h[1]=Ae^~Lr&_e,h[10]=Me^~Fr&Te,h[11]=Ne^~ke&Hr,h[20]=Re^~Be&Gr,h[21]=zr^~Le&De,h[30]=Wr^~ze&Ge,h[31]=qe^~Vr&je,h[40]=Ke^~Jr&Ye,h[41]=$e^~Je&Ar,h[2]=Ee^~xe&Dr,h[3]=Lr^~_e&Se,h[12]=Fr^~Te&Ce,h[13]=ke^~Hr&Oe,h[22]=Be^~Gr&Ue,h[23]=Le^~De&jr,h[32]=ze^~Ge&Kr,h[33]=Vr^~je&We,h[42]=Jr^~Ye&Er,h[43]=Je^~Ar&xr,h[4]=xe^~Dr&Ie,h[5]=_e^~Se&Ur,h[14]=Te^~Ce&qr,h[15]=Hr^~Oe&Pe,h[24]=Gr^~Ue&Fe,h[25]=De^~jr&He,h[34]=Ge^~Kr&Ve,h[35]=je^~We&$r,h[44]=Ye^~Er&_r,h[45]=Ar^~xr&Sr,h[6]=Dr^~Ie&tt,h[7]=Se^~Ur&Ae,h[16]=Ce^~qr&Me,h[17]=Oe^~Pe&Ne,h[26]=Ue^~Fe&Re,h[27]=jr^~He&zr,h[36]=Kr^~Ve&Wr,h[37]=We^~$r&qe,h[46]=Er^~_r&Ke,h[47]=xr^~Sr&$e,h[8]=Ie^~tt&Ee,h[9]=Ur^~Ae&Lr,h[18]=qr^~Me&Fr,h[19]=Pe^~Ne&ke,h[28]=Fe^~Re&Be,h[29]=He^~zr&Le,h[38]=Ve^~Wr&ze,h[39]=$r^~qe&Vr,h[48]=_r^~Ke&Jr,h[49]=Sr^~$e&Je,h[0]^=P[N],h[1]^=P[N+1]};if(a)t.exports=u;else for(w=0;w<d.length;++w)i[d[w]]=u[d[w]]})()})(Za);var Ll=Za.exports;const Dl=ji(Ll);function fe(t){return"0x"+Dl.keccak_256(q(t))}const Ul="rlp/5.7.0",Xt=new R(Ul);function na(t){const e=[];for(;t;)e.unshift(t&255),t>>=8;return e}function ia(t,e,r){let n=0;for(let i=0;i<r;i++)n=n*256+t[e+i];return n}function ef(t){if(Array.isArray(t)){let n=[];if(t.forEach(function(s){n=n.concat(ef(s))}),n.length<=55)return n.unshift(192+n.length),n;const i=na(n.length);return i.unshift(247+i.length),i.concat(n)}Or(t)||Xt.throwArgumentError("RLP object must be BytesLike","object",t);const e=Array.prototype.slice.call(q(t));if(e.length===1&&e[0]<=127)return e;if(e.length<=55)return e.unshift(128+e.length),e;const r=na(e.length);return r.unshift(183+r.length),r.concat(e)}function Ki(t){return F(ef(t))}function sa(t,e,r,n){const i=[];for(;r<e+1+n;){const s=tf(t,r);i.push(s.result),r+=s.consumed,r>e+1+n&&Xt.throwError("child data too short",R.errors.BUFFER_OVERRUN,{})}return{consumed:1+n,result:i}}function tf(t,e){if(t.length===0&&Xt.throwError("data too short",R.errors.BUFFER_OVERRUN,{}),t[e]>=248){const r=t[e]-247;e+1+r>t.length&&Xt.throwError("data short segment too short",R.errors.BUFFER_OVERRUN,{});const n=ia(t,e+1,r);return e+1+r+n>t.length&&Xt.throwError("data long segment too short",R.errors.BUFFER_OVERRUN,{}),sa(t,e,e+1+r,r+n)}else if(t[e]>=192){const r=t[e]-192;return e+1+r>t.length&&Xt.throwError("data array too short",R.errors.BUFFER_OVERRUN,{}),sa(t,e,e+1,r)}else if(t[e]>=184){const r=t[e]-183;e+1+r>t.length&&Xt.throwError("data array too short",R.errors.BUFFER_OVERRUN,{});const n=ia(t,e+1,r);e+1+r+n>t.length&&Xt.throwError("data array too short",R.errors.BUFFER_OVERRUN,{});const i=F(t.slice(e+1+r,e+1+r+n));return{consumed:1+r+n,result:i}}else if(t[e]>=128){const r=t[e]-128;e+1+r>t.length&&Xt.throwError("data too short",R.errors.BUFFER_OVERRUN,{});const n=F(t.slice(e+1,e+1+r));return{consumed:1+r,result:n}}return{consumed:1,result:F(t[e])}}function yo(t){const e=q(t),r=tf(e,0);return r.consumed!==e.length&&Xt.throwArgumentError("invalid rlp data","data",t),r.result}const Fl="address/5.7.0",gn=new R(Fl);function oa(t){pe(t,20)||gn.throwArgumentError("invalid address","address",t),t=t.toLowerCase();const e=t.substring(2).split(""),r=new Uint8Array(40);for(let i=0;i<40;i++)r[i]=e[i].charCodeAt(0);const n=q(fe(r));for(let i=0;i<40;i+=2)n[i>>1]>>4>=8&&(e[i]=e[i].toUpperCase()),(n[i>>1]&15)>=8&&(e[i+1]=e[i+1].toUpperCase());return"0x"+e.join("")}const Hl=9007199254740991;function ql(t){return Math.log10?Math.log10(t):Math.log(t)/Math.LN10}const bo={};for(let t=0;t<10;t++)bo[String(t)]=String(t);for(let t=0;t<26;t++)bo[String.fromCharCode(65+t)]=String(10+t);const aa=Math.floor(ql(Hl));function zl(t){t=t.toUpperCase(),t=t.substring(4)+t.substring(0,2)+"00";let e=t.split("").map(n=>bo[n]).join("");for(;e.length>=aa;){let n=e.substring(0,aa);e=parseInt(n,10)%97+e.substring(n.length)}let r=String(98-parseInt(e,10)%97);for(;r.length<2;)r="0"+r;return r}function Xe(t){let e=null;if(typeof t!="string"&&gn.throwArgumentError("invalid address","address",t),t.match(/^(0x)?[0-9a-fA-F]{40}$/))t.substring(0,2)!=="0x"&&(t="0x"+t),e=oa(t),t.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&e!==t&&gn.throwArgumentError("bad address checksum","address",t);else if(t.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(t.substring(2,4)!==zl(t)&&gn.throwArgumentError("bad icap checksum","address",t),e=Sl(t.substring(4));e.length<40;)e="0"+e;e=oa("0x"+e)}else gn.throwArgumentError("invalid address","address",t);return e}function Gl(t){try{return Xe(t),!0}catch{}return!1}function rf(t){let e=null;try{e=Xe(t.from)}catch{gn.throwArgumentError("missing from address","transaction",t)}const r=En(q(O.from(t.nonce).toHexString()));return Xe(gt(fe(Ki([e,r])),12))}class jl extends mr{constructor(e){super("address","address",e,!1)}defaultValue(){return"0x0000000000000000000000000000000000000000"}encode(e,r){try{r=Xe(r)}catch(n){this._throwError(n.message,r)}return e.writeValue(r)}decode(e){return Xe(it(e.readValue().toHexString(),20))}}class Wl extends mr{constructor(e){super(e.name,e.type,void 0,e.dynamic),this.coder=e}defaultValue(){return this.coder.defaultValue()}encode(e,r){return this.coder.encode(e,r)}decode(e){return this.coder.decode(e)}}const pn=new R(ni);function nf(t,e,r){let n=null;if(Array.isArray(r))n=r;else if(r&&typeof r=="object"){let l={};n=e.map(g=>{const y=g.localName;return y||pn.throwError("cannot encode object for signature with missing names",R.errors.INVALID_ARGUMENT,{argument:"values",coder:g,value:r}),l[y]&&pn.throwError("cannot encode object for signature with duplicate names",R.errors.INVALID_ARGUMENT,{argument:"values",coder:g,value:r}),l[y]=!0,r[y]})}else pn.throwArgumentError("invalid tuple value","tuple",r);e.length!==n.length&&pn.throwArgumentError("types/value length mismatch","tuple",r);let i=new js(t.wordSize),s=new js(t.wordSize),o=[];e.forEach((l,g)=>{let y=n[g];if(l.dynamic){let A=s.length;l.encode(s,y);let I=i.writeUpdatableValue();o.push(M=>{I(M+A)})}else l.encode(i,y)}),o.forEach(l=>{l(i.length)});let a=t.appendWriter(i);return a+=t.appendWriter(s),a}function sf(t,e){let r=[],n=t.subReader(0);e.forEach(s=>{let o=null;if(s.dynamic){let a=t.readValue(),l=n.subReader(a.toNumber());try{o=s.decode(l)}catch(g){if(g.code===R.errors.BUFFER_OVERRUN)throw g;o=g,o.baseType=s.name,o.name=s.localName,o.type=s.type}}else try{o=s.decode(t)}catch(a){if(a.code===R.errors.BUFFER_OVERRUN)throw a;o=a,o.baseType=s.name,o.name=s.localName,o.type=s.type}o!=null&&r.push(o)});const i=e.reduce((s,o)=>{const a=o.localName;return a&&(s[a]||(s[a]=0),s[a]++),s},{});e.forEach((s,o)=>{let a=s.localName;if(!a||i[a]!==1||(a==="length"&&(a="_length"),r[a]!=null))return;const l=r[o];l instanceof Error?Object.defineProperty(r,a,{enumerable:!0,get:()=>{throw l}}):r[a]=l});for(let s=0;s<r.length;s++){const o=r[s];o instanceof Error&&Object.defineProperty(r,s,{enumerable:!0,get:()=>{throw o}})}return Object.freeze(r)}class Vl extends mr{constructor(e,r,n){const i=e.type+"["+(r>=0?r:"")+"]",s=r===-1||e.dynamic;super("array",i,n,s),this.coder=e,this.length=r}defaultValue(){const e=this.coder.defaultValue(),r=[];for(let n=0;n<this.length;n++)r.push(e);return r}encode(e,r){Array.isArray(r)||this._throwError("expected array value",r);let n=this.length;n===-1&&(n=r.length,e.writeValue(r.length)),pn.checkArgumentCount(r.length,n,"coder array"+(this.localName?" "+this.localName:""));let i=[];for(let s=0;s<r.length;s++)i.push(this.coder);return nf(e,i,r)}decode(e){let r=this.length;r===-1&&(r=e.readValue().toNumber(),r*32>e._data.length&&pn.throwError("insufficient data length",R.errors.BUFFER_OVERRUN,{length:e._data.length,count:r}));let n=[];for(let i=0;i<r;i++)n.push(new Wl(this.coder));return e.coerce(this.name,sf(e,n))}}class Kl extends mr{constructor(e){super("bool","bool",e,!1)}defaultValue(){return!1}encode(e,r){return e.writeValue(r?1:0)}decode(e){return e.coerce(this.type,!e.readValue().isZero())}}class of extends mr{constructor(e,r){super(e,e,r,!0)}defaultValue(){return"0x"}encode(e,r){r=q(r);let n=e.writeValue(r.length);return n+=e.writeBytes(r),n}decode(e){return e.readBytes(e.readValue().toNumber(),!0)}}class $l extends of{constructor(e){super("bytes",e)}decode(e){return e.coerce(this.name,F(super.decode(e)))}}class Jl extends mr{constructor(e,r){let n="bytes"+String(e);super(n,n,r,!1),this.size=e}defaultValue(){return"0x0000000000000000000000000000000000000000000000000000000000000000".substring(0,2+this.size*2)}encode(e,r){let n=q(r);return n.length!==this.size&&this._throwError("incorrect data length",r),e.writeBytes(n)}decode(e){return e.coerce(this.name,F(e.readBytes(this.size)))}}class Yl extends mr{constructor(e){super("null","",e,!1)}defaultValue(){return null}encode(e,r){return r!=null&&this._throwError("not null",r),e.writeBytes([])}decode(e){return e.readBytes(0),e.coerce(this.name,null)}}const wo="0x0000000000000000000000000000000000000000",Ql=O.from(-1),ct=O.from(0),Xl=O.from(1),af=O.from(2),ff=O.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Ws="0x0000000000000000000000000000000000000000000000000000000000000000";class Zl extends mr{constructor(e,r,n){const i=(r?"int":"uint")+e*8;super(i,i,n,!1),this.size=e,this.signed=r}defaultValue(){return 0}encode(e,r){let n=O.from(r),i=ff.mask(e.wordSize*8);if(this.signed){let s=i.mask(this.size*8-1);(n.gt(s)||n.lt(s.add(Xl).mul(Ql)))&&this._throwError("value out-of-bounds",r)}else(n.lt(ct)||n.gt(i.mask(this.size*8)))&&this._throwError("value out-of-bounds",r);return n=n.toTwos(this.size*8).mask(this.size*8),this.signed&&(n=n.fromTwos(this.size*8).toTwos(8*e.wordSize)),e.writeValue(n)}decode(e){let r=e.readValue().mask(this.size*8);return this.signed&&(r=r.fromTwos(this.size*8)),e.coerce(this.name,r)}}const ec="strings/5.7.0",uf=new R(ec);var Xn;(function(t){t.current="",t.NFC="NFC",t.NFD="NFD",t.NFKC="NFKC",t.NFKD="NFKD"})(Xn||(Xn={}));var Nt;(function(t){t.UNEXPECTED_CONTINUE="unexpected continuation byte",t.BAD_PREFIX="bad codepoint prefix",t.OVERRUN="string overrun",t.MISSING_CONTINUE="missing continuation byte",t.OUT_OF_RANGE="out of UTF-8 range",t.UTF16_SURROGATE="UTF-16 surrogate",t.OVERLONG="overlong representation"})(Nt||(Nt={}));function tc(t,e,r,n,i){return uf.throwArgumentError(`invalid codepoint at offset ${e}; ${t}`,"bytes",r)}function lf(t,e,r,n,i){if(t===Nt.BAD_PREFIX||t===Nt.UNEXPECTED_CONTINUE){let s=0;for(let o=e+1;o<r.length&&r[o]>>6===2;o++)s++;return s}return t===Nt.OVERRUN?r.length-e-1:0}function rc(t,e,r,n,i){return t===Nt.OVERLONG?(n.push(i),0):(n.push(65533),lf(t,e,r))}const nc=Object.freeze({error:tc,ignore:lf,replace:rc});function cf(t,e){e==null&&(e=nc.error),t=q(t);const r=[];let n=0;for(;n<t.length;){const i=t[n++];if(!(i>>7)){r.push(i);continue}let s=null,o=null;if((i&224)===192)s=1,o=127;else if((i&240)===224)s=2,o=2047;else if((i&248)===240)s=3,o=65535;else{(i&192)===128?n+=e(Nt.UNEXPECTED_CONTINUE,n-1,t,r):n+=e(Nt.BAD_PREFIX,n-1,t,r);continue}if(n-1+s>=t.length){n+=e(Nt.OVERRUN,n-1,t,r);continue}let a=i&(1<<8-s-1)-1;for(let l=0;l<s;l++){let g=t[n];if((g&192)!=128){n+=e(Nt.MISSING_CONTINUE,n,t,r),a=null;break}a=a<<6|g&63,n++}if(a!==null){if(a>1114111){n+=e(Nt.OUT_OF_RANGE,n-1-s,t,r,a);continue}if(a>=55296&&a<=57343){n+=e(Nt.UTF16_SURROGATE,n-1-s,t,r,a);continue}if(a<=o){n+=e(Nt.OVERLONG,n-1-s,t,r,a);continue}r.push(a)}}return r}function mt(t,e=Xn.current){e!=Xn.current&&(uf.checkNormalize(),t=t.normalize(e));let r=[];for(let n=0;n<t.length;n++){const i=t.charCodeAt(n);if(i<128)r.push(i);else if(i<2048)r.push(i>>6|192),r.push(i&63|128);else if((i&64512)==55296){n++;const s=t.charCodeAt(n);if(n>=t.length||(s&64512)!==56320)throw new Error("invalid utf-8 string");const o=65536+((i&1023)<<10)+(s&1023);r.push(o>>18|240),r.push(o>>12&63|128),r.push(o>>6&63|128),r.push(o&63|128)}else r.push(i>>12|224),r.push(i>>6&63|128),r.push(i&63|128)}return q(r)}function ic(t){return t.map(e=>e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10&1023)+55296,(e&1023)+56320))).join("")}function Mn(t,e){return ic(cf(t,e))}function sc(t,e=Xn.current){return cf(mt(t,e))}class oc extends of{constructor(e){super("string",e)}defaultValue(){return""}encode(e,r){return super.encode(e,mt(r))}decode(e){return Mn(super.decode(e))}}class ci extends mr{constructor(e,r){let n=!1;const i=[];e.forEach(o=>{o.dynamic&&(n=!0),i.push(o.type)});const s="tuple("+i.join(",")+")";super("tuple",s,r,n),this.coders=e}defaultValue(){const e=[];this.coders.forEach(n=>{e.push(n.defaultValue())});const r=this.coders.reduce((n,i)=>{const s=i.localName;return s&&(n[s]||(n[s]=0),n[s]++),n},{});return this.coders.forEach((n,i)=>{let s=n.localName;!s||r[s]!==1||(s==="length"&&(s="_length"),e[s]==null&&(e[s]=e[i]))}),Object.freeze(e)}encode(e,r){return nf(e,this.coders,r)}decode(e){return e.coerce(this.name,sf(e,this.coders))}}const hi=new R(ni),ac=new RegExp(/^bytes([0-9]*)$/),fc=new RegExp(/^(u?int)([0-9]*)$/);class hf{constructor(e){G(this,"coerceFunc",e||null)}_getCoder(e){switch(e.baseType){case"address":return new jl(e.name);case"bool":return new Kl(e.name);case"string":return new oc(e.name);case"bytes":return new $l(e.name);case"array":return new Vl(this._getCoder(e.arrayChildren),e.arrayLength,e.name);case"tuple":return new ci((e.components||[]).map(n=>this._getCoder(n)),e.name);case"":return new Yl(e.name)}let r=e.type.match(fc);if(r){let n=parseInt(r[2]||"256");return(n===0||n>256||n%8!==0)&&hi.throwArgumentError("invalid "+r[1]+" bit length","param",e),new Zl(n/8,r[1]==="int",e.name)}if(r=e.type.match(ac),r){let n=parseInt(r[1]);return(n===0||n>32)&&hi.throwArgumentError("invalid bytes length","param",e),new Jl(n,e.name)}return hi.throwArgumentError("invalid type","type",e.type)}_getWordSize(){return 32}_getReader(e,r){return new Ti(e,this._getWordSize(),this.coerceFunc,r)}_getWriter(){return new js(this._getWordSize())}getDefaultValue(e){const r=e.map(i=>this._getCoder(ut.from(i)));return new ci(r,"_").defaultValue()}encode(e,r){e.length!==r.length&&hi.throwError("types/values length mismatch",R.errors.INVALID_ARGUMENT,{count:{types:e.length,values:r.length},value:{types:e,values:r}});const n=e.map(o=>this._getCoder(ut.from(o))),i=new ci(n,"_"),s=this._getWriter();return i.encode(s,r),s.data}decode(e,r,n){const i=e.map(o=>this._getCoder(ut.from(o)));return new ci(i,"_").decode(this._getReader(q(r),n))}}const dr=new hf;function mn(t){return fe(mt(t))}const df="hash/5.7.0";function gf(t){t=atob(t);const e=[];for(let r=0;r<t.length;r++)e.push(t.charCodeAt(r));return q(e)}function pf(t){t=q(t);let e="";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return btoa(e)}function mf(t,e){e==null&&(e=1);const r=[],n=r.forEach,i=function(s,o){n.call(s,function(a){o>0&&Array.isArray(a)?i(a,o-1):r.push(a)})};return i(t,e),r}function uc(t){const e={};for(let r=0;r<t.length;r++){const n=t[r];e[n[0]]=n[1]}return e}function lc(t){let e=0;function r(){return t[e++]<<8|t[e++]}let n=r(),i=1,s=[0,1];for(let K=1;K<n;K++)s.push(i+=r());let o=r(),a=e;e+=o;let l=0,g=0;function y(){return l==0&&(g=g<<8|t[e++],l=8),g>>--l&1}const A=31,I=Math.pow(2,A),M=I>>>1,k=M>>1,P=I-1;let j=0;for(let K=0;K<A;K++)j=j<<1|y();let B=[],W=0,H=I;for(;;){let K=Math.floor(((j-W+1)*i-1)/H),Y=0,ye=n;for(;ye-Y>1;){let we=Y+ye>>>1;K<s[we]?ye=we:Y=we}if(Y==0)break;B.push(Y);let de=W+Math.floor(H*s[Y]/i),X=W+Math.floor(H*s[Y+1]/i)-1;for(;!((de^X)&M);)j=j<<1&P|y(),de=de<<1&P,X=X<<1&P|1;for(;de&~X&k;)j=j&M|j<<1&P>>>1|y(),de=de<<1^M,X=(X^M)<<1|M|1;W=de,H=1+X-de}let J=n-4;return B.map(K=>{switch(K-J){case 3:return J+65792+(t[a++]<<16|t[a++]<<8|t[a++]);case 2:return J+256+(t[a++]<<8|t[a++]);case 1:return J+t[a++];default:return K-1}})}function cc(t){let e=0;return()=>t[e++]}function hc(t){return cc(lc(t))}function dc(t){return t&1?~t>>1:t>>1}function gc(t,e){let r=Array(t);for(let n=0;n<t;n++)r[n]=1+e();return r}function fa(t,e){let r=Array(t);for(let n=0,i=-1;n<t;n++)r[n]=i+=1+e();return r}function pc(t,e){let r=Array(t);for(let n=0,i=0;n<t;n++)r[n]=i+=dc(e());return r}function Ci(t,e){let r=fa(t(),t),n=t(),i=fa(n,t),s=gc(n,t);for(let o=0;o<n;o++)for(let a=0;a<s[o];a++)r.push(i[o]+a);return e?r.map(o=>e[o]):r}function mc(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(yc(r,t))}for(;;){let r=t()-1;if(r<0)break;e.push(bc(r,t))}return uc(mf(e))}function vc(t){let e=[];for(;;){let r=t();if(r==0)break;e.push(r)}return e}function vf(t,e,r){let n=Array(t).fill(void 0).map(()=>[]);for(let i=0;i<e;i++)pc(t,r).forEach((s,o)=>n[o].push(s));return n}function yc(t,e){let r=1+e(),n=e(),i=vc(e),s=vf(i.length,1+t,e);return mf(s.map((o,a)=>{const l=o[0],g=o.slice(1);return Array(i[a]).fill(void 0).map((y,A)=>{let I=A*n;return[l+A*r,g.map(M=>M+I)]})}))}function bc(t,e){let r=1+e();return vf(r,1+t,e).map(i=>[i[0],i.slice(1)])}function wc(t){let e=Ci(t).sort((n,i)=>n-i);return r();function r(){let n=[];for(;;){let g=Ci(t,e);if(g.length==0)break;n.push({set:new Set(g),node:r()})}n.sort((g,y)=>y.set.size-g.set.size);let i=t(),s=i%3;i=i/3|0;let o=!!(i&1);i>>=1;let a=i==1,l=i==2;return{branches:n,valid:s,fe0f:o,save:a,check:l}}}function Ac(){return hc(gf("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const $i=Ac(),Ec=new Set(Ci($i)),xc=new Set(Ci($i)),_c=mc($i),Sc=wc($i),ua=45,la=95;function yf(t){return sc(t)}function Ic(t){return t.filter(e=>e!=65039)}function bf(t){for(let e of t.split(".")){let r=yf(e);try{for(let n=r.lastIndexOf(la)-1;n>=0;n--)if(r[n]!==la)throw new Error("underscore only allowed at start");if(r.length>=4&&r.every(n=>n<128)&&r[2]===ua&&r[3]===ua)throw new Error("invalid label extension")}catch(n){throw new Error(`Invalid label "${e}": ${n.message}`)}}return t}function Mc(t){return bf(Nc(t,Ic))}function Nc(t,e){let r=yf(t).reverse(),n=[];for(;r.length;){let i=Tc(r);if(i){n.push(...e(i));continue}let s=r.pop();if(Ec.has(s)){n.push(s);continue}if(xc.has(s))continue;let o=_c[s];if(o){n.push(...o);continue}throw new Error(`Disallowed codepoint: 0x${s.toString(16).toUpperCase()}`)}return bf(kc(String.fromCodePoint(...n)))}function kc(t){return t.normalize("NFC")}function Tc(t,e){var r;let n=Sc,i,s,o=[],a=t.length;for(e&&(e.length=0);a;){let l=t[--a];if(n=(r=n.branches.find(g=>g.set.has(l)))===null||r===void 0?void 0:r.node,!n)break;if(n.save)s=l;else if(n.check&&l===s)break;o.push(l),n.fe0f&&(o.push(65039),a>0&&t[a-1]==65039&&a--),n.valid&&(i=o.slice(),n.valid==2&&i.splice(1,1),e&&e.push(...t.slice(a).reverse()),t.length=a)}return i}const Cc=new R(df),wf=new Uint8Array(32);wf.fill(0);function ca(t){if(t.length===0)throw new Error("invalid ENS name; empty component");return t}function Af(t){const e=mt(Mc(t)),r=[];if(t.length===0)return r;let n=0;for(let i=0;i<e.length;i++)e[i]===46&&(r.push(ca(e.slice(n,i))),n=i+1);if(n>=e.length)throw new Error("invalid ENS name; empty component");return r.push(ca(e.slice(n))),r}function wi(t){typeof t!="string"&&Cc.throwArgumentError("invalid ENS name; not a string","name",t);let e=wf;const r=Af(t);for(;r.length;)e=fe(ht([e,fe(r.pop())]));return F(e)}function Oc(t){return F(ht(Af(t).map(e=>{if(e.length>63)throw new Error("invalid DNS encoded entry; length exceeds 63 bytes");const r=new Uint8Array(e.length+1);return r.set(e,1),r[0]=r.length-1,r})))+"00"}const Pc=`Ethereum Signed Message:
`;function Rc(t){return typeof t=="string"&&(t=mt(t)),fe(ht([mt(Pc),mt(String(t.length)),t]))}var Bc=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(y){try{g(n.next(y))}catch(A){o(A)}}function l(y){try{g(n.throw(y))}catch(A){o(A)}}function g(y){y.done?s(y.value):i(y.value).then(a,l)}g((n=n.apply(t,e||[])).next())})};const et=new R(df),Ef=new Uint8Array(32);Ef.fill(0);const Lc=O.from(-1),xf=O.from(0),_f=O.from(1),Dc=O.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function Uc(t){const e=q(t),r=e.length%32;return r?_t([e,Ef.slice(r)]):F(e)}const Fc=it(_f.toHexString(),32),Hc=it(xf.toHexString(),32),ha={name:"string",version:"string",chainId:"uint256",verifyingContract:"address",salt:"bytes32"},Ss=["name","version","chainId","verifyingContract","salt"];function da(t){return function(e){return typeof e!="string"&&et.throwArgumentError(`invalid domain value for ${JSON.stringify(t)}`,`domain.${t}`,e),e}}const qc={name:da("name"),version:da("version"),chainId:function(t){try{return O.from(t).toString()}catch{}return et.throwArgumentError('invalid domain value for "chainId"',"domain.chainId",t)},verifyingContract:function(t){try{return Xe(t).toLowerCase()}catch{}return et.throwArgumentError('invalid domain value "verifyingContract"',"domain.verifyingContract",t)},salt:function(t){try{const e=q(t);if(e.length!==32)throw new Error("bad length");return F(e)}catch{}return et.throwArgumentError('invalid domain value "salt"',"domain.salt",t)}};function Is(t){{const e=t.match(/^(u?)int(\d*)$/);if(e){const r=e[1]==="",n=parseInt(e[2]||"256");(n%8!==0||n>256||e[2]&&e[2]!==String(n))&&et.throwArgumentError("invalid numeric width","type",t);const i=Dc.mask(r?n-1:n),s=r?i.add(_f).mul(Lc):xf;return function(o){const a=O.from(o);return(a.lt(s)||a.gt(i))&&et.throwArgumentError(`value out-of-bounds for ${t}`,"value",o),it(a.toTwos(256).toHexString(),32)}}}{const e=t.match(/^bytes(\d+)$/);if(e){const r=parseInt(e[1]);return(r===0||r>32||e[1]!==String(r))&&et.throwArgumentError("invalid bytes width","type",t),function(n){return q(n).length!==r&&et.throwArgumentError(`invalid length for ${t}`,"value",n),Uc(n)}}}switch(t){case"address":return function(e){return it(Xe(e),32)};case"bool":return function(e){return e?Fc:Hc};case"bytes":return function(e){return fe(e)};case"string":return function(e){return mn(e)}}return null}function ga(t,e){return`${t}(${e.map(({name:r,type:n})=>n+" "+r).join(",")})`}class Rt{constructor(e){G(this,"types",Object.freeze(xn(e))),G(this,"_encoderCache",{}),G(this,"_types",{});const r={},n={},i={};Object.keys(e).forEach(a=>{r[a]={},n[a]=[],i[a]={}});for(const a in e){const l={};e[a].forEach(g=>{l[g.name]&&et.throwArgumentError(`duplicate variable name ${JSON.stringify(g.name)} in ${JSON.stringify(a)}`,"types",e),l[g.name]=!0;const y=g.type.match(/^([^\x5b]*)(\x5b|$)/)[1];y===a&&et.throwArgumentError(`circular type reference to ${JSON.stringify(y)}`,"types",e),!Is(y)&&(n[y]||et.throwArgumentError(`unknown type ${JSON.stringify(y)}`,"types",e),n[y].push(a),r[a][y]=!0)})}const s=Object.keys(n).filter(a=>n[a].length===0);s.length===0?et.throwArgumentError("missing primary type","types",e):s.length>1&&et.throwArgumentError(`ambiguous primary types or unused types: ${s.map(a=>JSON.stringify(a)).join(", ")}`,"types",e),G(this,"primaryType",s[0]);function o(a,l){l[a]&&et.throwArgumentError(`circular type reference to ${JSON.stringify(a)}`,"types",e),l[a]=!0,Object.keys(r[a]).forEach(g=>{n[g]&&(o(g,l),Object.keys(l).forEach(y=>{i[y][g]=!0}))}),delete l[a]}o(this.primaryType,{});for(const a in i){const l=Object.keys(i[a]);l.sort(),this._types[a]=ga(a,e[a])+l.map(g=>ga(g,e[g])).join("")}}getEncoder(e){let r=this._encoderCache[e];return r||(r=this._encoderCache[e]=this._getEncoder(e)),r}_getEncoder(e){{const i=Is(e);if(i)return i}const r=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(r){const i=r[1],s=this.getEncoder(i),o=parseInt(r[3]);return a=>{o>=0&&a.length!==o&&et.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",a);let l=a.map(s);return this._types[i]&&(l=l.map(fe)),fe(_t(l))}}const n=this.types[e];if(n){const i=mn(this._types[e]);return s=>{const o=n.map(({name:a,type:l})=>{const g=this.getEncoder(l)(s[a]);return this._types[l]?fe(g):g});return o.unshift(i),_t(o)}}return et.throwArgumentError(`unknown type: ${e}`,"type",e)}encodeType(e){const r=this._types[e];return r||et.throwArgumentError(`unknown type: ${JSON.stringify(e)}`,"name",e),r}encodeData(e,r){return this.getEncoder(e)(r)}hashStruct(e,r){return fe(this.encodeData(e,r))}encode(e){return this.encodeData(this.primaryType,e)}hash(e){return this.hashStruct(this.primaryType,e)}_visit(e,r,n){if(Is(e))return n(e,r);const i=e.match(/^(.*)(\x5b(\d*)\x5d)$/);if(i){const o=i[1],a=parseInt(i[3]);return a>=0&&r.length!==a&&et.throwArgumentError("array length mismatch; expected length ${ arrayLength }","value",r),r.map(l=>this._visit(o,l,n))}const s=this.types[e];return s?s.reduce((o,{name:a,type:l})=>(o[a]=this._visit(l,r[a],n),o),{}):et.throwArgumentError(`unknown type: ${e}`,"type",e)}visit(e,r){return this._visit(this.primaryType,e,r)}static from(e){return new Rt(e)}static getPrimaryType(e){return Rt.from(e).primaryType}static hashStruct(e,r,n){return Rt.from(r).hashStruct(e,n)}static hashDomain(e){const r=[];for(const n in e){const i=ha[n];i||et.throwArgumentError(`invalid typed-data domain key: ${JSON.stringify(n)}`,"domain",e),r.push({name:n,type:i})}return r.sort((n,i)=>Ss.indexOf(n.name)-Ss.indexOf(i.name)),Rt.hashStruct("EIP712Domain",{EIP712Domain:r},e)}static encode(e,r,n){return _t(["0x1901",Rt.hashDomain(e),Rt.from(r).hash(n)])}static hash(e,r,n){return fe(Rt.encode(e,r,n))}static resolveNames(e,r,n,i){return Bc(this,void 0,void 0,function*(){e=Tt(e);const s={};e.verifyingContract&&!pe(e.verifyingContract,20)&&(s[e.verifyingContract]="0x");const o=Rt.from(r);o.visit(n,(a,l)=>(a==="address"&&!pe(l,20)&&(s[l]="0x"),l));for(const a in s)s[a]=yield i(a);return e.verifyingContract&&s[e.verifyingContract]&&(e.verifyingContract=s[e.verifyingContract]),n=o.visit(n,(a,l)=>a==="address"&&s[l]?s[l]:l),{domain:e,value:n}})}static getPayload(e,r,n){Rt.hashDomain(e);const i={},s=[];Ss.forEach(l=>{const g=e[l];g!=null&&(i[l]=qc[l](g),s.push({name:l,type:ha[l]}))});const o=Rt.from(r),a=Tt(r);return a.EIP712Domain?et.throwArgumentError("types must not contain EIP712Domain type","types.EIP712Domain",r):a.EIP712Domain=s,o.encode(n),{types:a,domain:i,primaryType:o.primaryType,message:o.visit(n,(l,g)=>{if(l.match(/^bytes(\d*)/))return F(q(g));if(l.match(/^u?int/))return O.from(g).toString();switch(l){case"address":return g.toLowerCase();case"bool":return!!g;case"string":return typeof g!="string"&&et.throwArgumentError("invalid string","value",g),g}return et.throwArgumentError("unsupported type","type",l)})}}}const Ze=new R(ni);class zc extends ri{}class Gc extends ri{}class jc extends ri{}class Vs extends ri{static isIndexed(e){return!!(e&&e._isIndexed)}}const Wc={"0x08c379a0":{signature:"Error(string)",name:"Error",inputs:["string"],reason:!0},"0x4e487b71":{signature:"Panic(uint256)",name:"Panic",inputs:["uint256"]}};function pa(t,e){const r=new Error(`deferred error during ABI decoding triggered accessing ${t}`);return r.error=e,r}class $t{constructor(e){let r=[];typeof e=="string"?r=JSON.parse(e):r=e,G(this,"fragments",r.map(n=>hr.from(n)).filter(n=>n!=null)),G(this,"_abiCoder",dn(new.target,"getAbiCoder")()),G(this,"functions",{}),G(this,"errors",{}),G(this,"events",{}),G(this,"structs",{}),this.fragments.forEach(n=>{let i=null;switch(n.type){case"constructor":if(this.deploy){Ze.warn("duplicate definition - constructor");return}G(this,"deploy",n);return;case"function":i=this.functions;break;case"event":i=this.events;break;case"error":i=this.errors;break;default:return}let s=n.format();if(i[s]){Ze.warn("duplicate definition - "+s);return}i[s]=n}),this.deploy||G(this,"deploy",er.from({payable:!1,type:"constructor"})),G(this,"_isInterface",!0)}format(e){e||(e=he.full),e===he.sighash&&Ze.throwArgumentError("interface does not support formatting sighash","format",e);const r=this.fragments.map(n=>n.format(e));return e===he.json?JSON.stringify(r.map(n=>JSON.parse(n))):r}static getAbiCoder(){return dr}static getAddress(e){return Xe(e)}static getSighash(e){return gt(mn(e.format()),0,4)}static getEventTopic(e){return mn(e.format())}getFunction(e){if(pe(e)){for(const n in this.functions)if(e===this.getSighash(n))return this.functions[n];Ze.throwArgumentError("no matching function","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.functions).filter(s=>s.split("(")[0]===n);return i.length===0?Ze.throwArgumentError("no matching function","name",n):i.length>1&&Ze.throwArgumentError("multiple matching functions","name",n),this.functions[i[0]]}const r=this.functions[tr.fromString(e).format()];return r||Ze.throwArgumentError("no matching function","signature",e),r}getEvent(e){if(pe(e)){const n=e.toLowerCase();for(const i in this.events)if(n===this.getEventTopic(i))return this.events[i];Ze.throwArgumentError("no matching event","topichash",n)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.events).filter(s=>s.split("(")[0]===n);return i.length===0?Ze.throwArgumentError("no matching event","name",n):i.length>1&&Ze.throwArgumentError("multiple matching events","name",n),this.events[i[0]]}const r=this.events[cr.fromString(e).format()];return r||Ze.throwArgumentError("no matching event","signature",e),r}getError(e){if(pe(e)){const n=dn(this.constructor,"getSighash");for(const i in this.errors){const s=this.errors[i];if(e===n(s))return this.errors[i]}Ze.throwArgumentError("no matching error","sighash",e)}if(e.indexOf("(")===-1){const n=e.trim(),i=Object.keys(this.errors).filter(s=>s.split("(")[0]===n);return i.length===0?Ze.throwArgumentError("no matching error","name",n):i.length>1&&Ze.throwArgumentError("multiple matching errors","name",n),this.errors[i[0]]}const r=this.errors[tr.fromString(e).format()];return r||Ze.throwArgumentError("no matching error","signature",e),r}getSighash(e){if(typeof e=="string")try{e=this.getFunction(e)}catch(r){try{e=this.getError(e)}catch{throw r}}return dn(this.constructor,"getSighash")(e)}getEventTopic(e){return typeof e=="string"&&(e=this.getEvent(e)),dn(this.constructor,"getEventTopic")(e)}_decodeParams(e,r){return this._abiCoder.decode(e,r)}_encodeParams(e,r){return this._abiCoder.encode(e,r)}encodeDeploy(e){return this._encodeParams(this.deploy.inputs,e||[])}decodeErrorResult(e,r){typeof e=="string"&&(e=this.getError(e));const n=q(r);return F(n.slice(0,4))!==this.getSighash(e)&&Ze.throwArgumentError(`data signature does not match error ${e.name}.`,"data",F(n)),this._decodeParams(e.inputs,n.slice(4))}encodeErrorResult(e,r){return typeof e=="string"&&(e=this.getError(e)),F(ht([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionData(e,r){typeof e=="string"&&(e=this.getFunction(e));const n=q(r);return F(n.slice(0,4))!==this.getSighash(e)&&Ze.throwArgumentError(`data signature does not match function ${e.name}.`,"data",F(n)),this._decodeParams(e.inputs,n.slice(4))}encodeFunctionData(e,r){return typeof e=="string"&&(e=this.getFunction(e)),F(ht([this.getSighash(e),this._encodeParams(e.inputs,r||[])]))}decodeFunctionResult(e,r){typeof e=="string"&&(e=this.getFunction(e));let n=q(r),i=null,s="",o=null,a=null,l=null;switch(n.length%this._abiCoder._getWordSize()){case 0:try{return this._abiCoder.decode(e.outputs,n)}catch{}break;case 4:{const g=F(n.slice(0,4)),y=Wc[g];if(y)o=this._abiCoder.decode(y.inputs,n.slice(4)),a=y.name,l=y.signature,y.reason&&(i=o[0]),a==="Error"?s=`; VM Exception while processing transaction: reverted with reason string ${JSON.stringify(o[0])}`:a==="Panic"&&(s=`; VM Exception while processing transaction: reverted with panic code ${o[0]}`);else try{const A=this.getError(g);o=this._abiCoder.decode(A.inputs,n.slice(4)),a=A.name,l=A.format()}catch{}break}}return Ze.throwError("call revert exception"+s,R.errors.CALL_EXCEPTION,{method:e.format(),data:F(r),errorArgs:o,errorName:a,errorSignature:l,reason:i})}encodeFunctionResult(e,r){return typeof e=="string"&&(e=this.getFunction(e)),F(this._abiCoder.encode(e.outputs,r||[]))}encodeFilterTopics(e,r){typeof e=="string"&&(e=this.getEvent(e)),r.length>e.inputs.length&&Ze.throwError("too many arguments for "+e.format(),R.errors.UNEXPECTED_ARGUMENT,{argument:"values",value:r});let n=[];e.anonymous||n.push(this.getEventTopic(e));const i=(s,o)=>s.type==="string"?mn(o):s.type==="bytes"?fe(F(o)):(s.type==="bool"&&typeof o=="boolean"&&(o=o?"0x01":"0x00"),s.type.match(/^u?int/)&&(o=O.from(o).toHexString()),s.type==="address"&&this._abiCoder.encode(["address"],[o]),it(F(o),32));for(r.forEach((s,o)=>{let a=e.inputs[o];if(!a.indexed){s!=null&&Ze.throwArgumentError("cannot filter non-indexed parameters; must be null","contract."+a.name,s);return}s==null?n.push(null):a.baseType==="array"||a.baseType==="tuple"?Ze.throwArgumentError("filtering with tuples or arrays not supported","contract."+a.name,s):Array.isArray(s)?n.push(s.map(l=>i(a,l))):n.push(i(a,s))});n.length&&n[n.length-1]===null;)n.pop();return n}encodeEventLog(e,r){typeof e=="string"&&(e=this.getEvent(e));const n=[],i=[],s=[];return e.anonymous||n.push(this.getEventTopic(e)),r.length!==e.inputs.length&&Ze.throwArgumentError("event arguments/values mismatch","values",r),e.inputs.forEach((o,a)=>{const l=r[a];if(o.indexed)if(o.type==="string")n.push(mn(l));else if(o.type==="bytes")n.push(fe(l));else{if(o.baseType==="tuple"||o.baseType==="array")throw new Error("not implemented");n.push(this._abiCoder.encode([o.type],[l]))}else i.push(o),s.push(l)}),{data:this._abiCoder.encode(i,s),topics:n}}decodeEventLog(e,r,n){if(typeof e=="string"&&(e=this.getEvent(e)),n!=null&&!e.anonymous){let I=this.getEventTopic(e);(!pe(n[0],32)||n[0].toLowerCase()!==I)&&Ze.throwError("fragment/topic mismatch",R.errors.INVALID_ARGUMENT,{argument:"topics[0]",expected:I,value:n[0]}),n=n.slice(1)}let i=[],s=[],o=[];e.inputs.forEach((I,M)=>{I.indexed?I.type==="string"||I.type==="bytes"||I.baseType==="tuple"||I.baseType==="array"?(i.push(ut.fromObject({type:"bytes32",name:I.name})),o.push(!0)):(i.push(I),o.push(!1)):(s.push(I),o.push(!1))});let a=n!=null?this._abiCoder.decode(i,ht(n)):null,l=this._abiCoder.decode(s,r,!0),g=[],y=0,A=0;e.inputs.forEach((I,M)=>{if(I.indexed)if(a==null)g[M]=new Vs({_isIndexed:!0,hash:null});else if(o[M])g[M]=new Vs({_isIndexed:!0,hash:a[A++]});else try{g[M]=a[A++]}catch(k){g[M]=k}else try{g[M]=l[y++]}catch(k){g[M]=k}if(I.name&&g[I.name]==null){const k=g[M];k instanceof Error?Object.defineProperty(g,I.name,{enumerable:!0,get:()=>{throw pa(`property ${JSON.stringify(I.name)}`,k)}}):g[I.name]=k}});for(let I=0;I<g.length;I++){const M=g[I];M instanceof Error&&Object.defineProperty(g,I,{enumerable:!0,get:()=>{throw pa(`index ${I}`,M)}})}return Object.freeze(g)}parseTransaction(e){let r=this.getFunction(e.data.substring(0,10).toLowerCase());return r?new Gc({args:this._abiCoder.decode(r.inputs,"0x"+e.data.substring(10)),functionFragment:r,name:r.name,signature:r.format(),sighash:this.getSighash(r),value:O.from(e.value||"0")}):null}parseLog(e){let r=this.getEvent(e.topics[0]);return!r||r.anonymous?null:new zc({eventFragment:r,name:r.name,signature:r.format(),topic:this.getEventTopic(r),args:this.decodeEventLog(r,e.data,e.topics)})}parseError(e){const r=F(e);let n=this.getError(r.substring(0,10).toLowerCase());return n?new jc({args:this._abiCoder.decode(n.inputs,"0x"+r.substring(10)),errorFragment:n,name:n.name,signature:n.format(),sighash:this.getSighash(n)}):null}static isInterface(e){return!!(e&&e._isInterface)}}const Vc="abstract-provider/5.7.0";var Kc=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(y){try{g(n.next(y))}catch(A){o(A)}}function l(y){try{g(n.throw(y))}catch(A){o(A)}}function g(y){y.done?s(y.value):i(y.value).then(a,l)}g((n=n.apply(t,e||[])).next())})};const $c=new R(Vc);class Jc extends ri{static isForkEvent(e){return!!(e&&e._isForkEvent)}}class Ji{constructor(){$c.checkAbstract(new.target,Ji),G(this,"_isProvider",!0)}getFeeData(){return Kc(this,void 0,void 0,function*(){const{block:e,gasPrice:r}=yield ot({block:this.getBlock("latest"),gasPrice:this.getGasPrice().catch(o=>null)});let n=null,i=null,s=null;return e&&e.baseFeePerGas&&(n=e.baseFeePerGas,s=O.from("1500000000"),i=e.baseFeePerGas.mul(2).add(s)),{lastBaseFeePerGas:n,maxFeePerGas:i,maxPriorityFeePerGas:s,gasPrice:r}})}addListener(e,r){return this.on(e,r)}removeListener(e,r){return this.off(e,r)}static isProvider(e){return!!(e&&e._isProvider)}}const Yc="abstract-signer/5.7.0";var Ht=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(y){try{g(n.next(y))}catch(A){o(A)}}function l(y){try{g(n.throw(y))}catch(A){o(A)}}function g(y){y.done?s(y.value):i(y.value).then(a,l)}g((n=n.apply(t,e||[])).next())})};const Pt=new R(Yc),Qc=["accessList","ccipReadEnabled","chainId","customData","data","from","gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","nonce","to","type","value"],Xc=[R.errors.INSUFFICIENT_FUNDS,R.errors.NONCE_EXPIRED,R.errors.REPLACEMENT_UNDERPRICED];let Sf=class If{constructor(){Pt.checkAbstract(new.target,If),G(this,"_isSigner",!0)}getBalance(e){return Ht(this,void 0,void 0,function*(){return this._checkProvider("getBalance"),yield this.provider.getBalance(this.getAddress(),e)})}getTransactionCount(e){return Ht(this,void 0,void 0,function*(){return this._checkProvider("getTransactionCount"),yield this.provider.getTransactionCount(this.getAddress(),e)})}estimateGas(e){return Ht(this,void 0,void 0,function*(){this._checkProvider("estimateGas");const r=yield ot(this.checkTransaction(e));return yield this.provider.estimateGas(r)})}call(e,r){return Ht(this,void 0,void 0,function*(){this._checkProvider("call");const n=yield ot(this.checkTransaction(e));return yield this.provider.call(n,r)})}sendTransaction(e){return Ht(this,void 0,void 0,function*(){this._checkProvider("sendTransaction");const r=yield this.populateTransaction(e),n=yield this.signTransaction(r);return yield this.provider.sendTransaction(n)})}getChainId(){return Ht(this,void 0,void 0,function*(){return this._checkProvider("getChainId"),(yield this.provider.getNetwork()).chainId})}getGasPrice(){return Ht(this,void 0,void 0,function*(){return this._checkProvider("getGasPrice"),yield this.provider.getGasPrice()})}getFeeData(){return Ht(this,void 0,void 0,function*(){return this._checkProvider("getFeeData"),yield this.provider.getFeeData()})}resolveName(e){return Ht(this,void 0,void 0,function*(){return this._checkProvider("resolveName"),yield this.provider.resolveName(e)})}checkTransaction(e){for(const n in e)Qc.indexOf(n)===-1&&Pt.throwArgumentError("invalid transaction key: "+n,"transaction",e);const r=Tt(e);return r.from==null?r.from=this.getAddress():r.from=Promise.all([Promise.resolve(r.from),this.getAddress()]).then(n=>(n[0].toLowerCase()!==n[1].toLowerCase()&&Pt.throwArgumentError("from address mismatch","transaction",e),n[0])),r}populateTransaction(e){return Ht(this,void 0,void 0,function*(){const r=yield ot(this.checkTransaction(e));r.to!=null&&(r.to=Promise.resolve(r.to).then(i=>Ht(this,void 0,void 0,function*(){if(i==null)return null;const s=yield this.resolveName(i);return s==null&&Pt.throwArgumentError("provided ENS name resolves to null","tx.to",i),s})),r.to.catch(i=>{}));const n=r.maxFeePerGas!=null||r.maxPriorityFeePerGas!=null;if(r.gasPrice!=null&&(r.type===2||n)?Pt.throwArgumentError("eip-1559 transaction do not support gasPrice","transaction",e):(r.type===0||r.type===1)&&n&&Pt.throwArgumentError("pre-eip-1559 transaction do not support maxFeePerGas/maxPriorityFeePerGas","transaction",e),(r.type===2||r.type==null)&&r.maxFeePerGas!=null&&r.maxPriorityFeePerGas!=null)r.type=2;else if(r.type===0||r.type===1)r.gasPrice==null&&(r.gasPrice=this.getGasPrice());else{const i=yield this.getFeeData();if(r.type==null)if(i.maxFeePerGas!=null&&i.maxPriorityFeePerGas!=null)if(r.type=2,r.gasPrice!=null){const s=r.gasPrice;delete r.gasPrice,r.maxFeePerGas=s,r.maxPriorityFeePerGas=s}else r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas);else i.gasPrice!=null?(n&&Pt.throwError("network does not support EIP-1559",R.errors.UNSUPPORTED_OPERATION,{operation:"populateTransaction"}),r.gasPrice==null&&(r.gasPrice=i.gasPrice),r.type=0):Pt.throwError("failed to get consistent fee data",R.errors.UNSUPPORTED_OPERATION,{operation:"signer.getFeeData"});else r.type===2&&(r.maxFeePerGas==null&&(r.maxFeePerGas=i.maxFeePerGas),r.maxPriorityFeePerGas==null&&(r.maxPriorityFeePerGas=i.maxPriorityFeePerGas))}return r.nonce==null&&(r.nonce=this.getTransactionCount("pending")),r.gasLimit==null&&(r.gasLimit=this.estimateGas(r).catch(i=>{if(Xc.indexOf(i.code)>=0)throw i;return Pt.throwError("cannot estimate gas; transaction may fail or may require manual gas limit",R.errors.UNPREDICTABLE_GAS_LIMIT,{error:i,tx:r})})),r.chainId==null?r.chainId=this.getChainId():r.chainId=Promise.all([Promise.resolve(r.chainId),this.getChainId()]).then(i=>(i[1]!==0&&i[0]!==i[1]&&Pt.throwArgumentError("chainId address mismatch","transaction",e),i[0])),yield ot(r)})}_checkProvider(e){this.provider||Pt.throwError("missing provider",R.errors.UNSUPPORTED_OPERATION,{operation:e||"_checkProvider"})}static isSigner(e){return!!(e&&e._isSigner)}};class Ao extends Sf{constructor(e,r){super(),G(this,"address",e),G(this,"provider",r||null)}getAddress(){return Promise.resolve(this.address)}_fail(e,r){return Promise.resolve().then(()=>{Pt.throwError(e,R.errors.UNSUPPORTED_OPERATION,{operation:r})})}signMessage(e){return this._fail("VoidSigner cannot sign messages","signMessage")}signTransaction(e){return this._fail("VoidSigner cannot sign transactions","signTransaction")}_signTypedData(e,r,n){return this._fail("VoidSigner cannot sign typed data","signTypedData")}connect(e){return new Ao(this.address,e)}}var Mf={},se={},ii=Nf;function Nf(t,e){if(!t)throw new Error(e||"Assertion failed")}Nf.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Ks={exports:{}};typeof Object.create=="function"?Ks.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Ks.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}};var Zc=Ks.exports,e0=ii,t0=Zc;se.inherits=t0;function r0(t,e){return(t.charCodeAt(e)&64512)!==55296||e<0||e+1>=t.length?!1:(t.charCodeAt(e+1)&64512)===56320}function n0(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var r=[];if(typeof t=="string")if(e){if(e==="hex")for(t=t.replace(/[^a-z0-9]+/ig,""),t.length%2!==0&&(t="0"+t),i=0;i<t.length;i+=2)r.push(parseInt(t[i]+t[i+1],16))}else for(var n=0,i=0;i<t.length;i++){var s=t.charCodeAt(i);s<128?r[n++]=s:s<2048?(r[n++]=s>>6|192,r[n++]=s&63|128):r0(t,i)?(s=65536+((s&1023)<<10)+(t.charCodeAt(++i)&1023),r[n++]=s>>18|240,r[n++]=s>>12&63|128,r[n++]=s>>6&63|128,r[n++]=s&63|128):(r[n++]=s>>12|224,r[n++]=s>>6&63|128,r[n++]=s&63|128)}else for(i=0;i<t.length;i++)r[i]=t[i]|0;return r}se.toArray=n0;function i0(t){for(var e="",r=0;r<t.length;r++)e+=Tf(t[r].toString(16));return e}se.toHex=i0;function kf(t){var e=t>>>24|t>>>8&65280|t<<8&16711680|(t&255)<<24;return e>>>0}se.htonl=kf;function s0(t,e){for(var r="",n=0;n<t.length;n++){var i=t[n];e==="little"&&(i=kf(i)),r+=Cf(i.toString(16))}return r}se.toHex32=s0;function Tf(t){return t.length===1?"0"+t:t}se.zero2=Tf;function Cf(t){return t.length===7?"0"+t:t.length===6?"00"+t:t.length===5?"000"+t:t.length===4?"0000"+t:t.length===3?"00000"+t:t.length===2?"000000"+t:t.length===1?"0000000"+t:t}se.zero8=Cf;function o0(t,e,r,n){var i=r-e;e0(i%4===0);for(var s=new Array(i/4),o=0,a=e;o<s.length;o++,a+=4){var l;n==="big"?l=t[a]<<24|t[a+1]<<16|t[a+2]<<8|t[a+3]:l=t[a+3]<<24|t[a+2]<<16|t[a+1]<<8|t[a],s[o]=l>>>0}return s}se.join32=o0;function a0(t,e){for(var r=new Array(t.length*4),n=0,i=0;n<t.length;n++,i+=4){var s=t[n];e==="big"?(r[i]=s>>>24,r[i+1]=s>>>16&255,r[i+2]=s>>>8&255,r[i+3]=s&255):(r[i+3]=s>>>24,r[i+2]=s>>>16&255,r[i+1]=s>>>8&255,r[i]=s&255)}return r}se.split32=a0;function f0(t,e){return t>>>e|t<<32-e}se.rotr32=f0;function u0(t,e){return t<<e|t>>>32-e}se.rotl32=u0;function l0(t,e){return t+e>>>0}se.sum32=l0;function c0(t,e,r){return t+e+r>>>0}se.sum32_3=c0;function h0(t,e,r,n){return t+e+r+n>>>0}se.sum32_4=h0;function d0(t,e,r,n,i){return t+e+r+n+i>>>0}se.sum32_5=d0;function g0(t,e,r,n){var i=t[e],s=t[e+1],o=n+s>>>0,a=(o<n?1:0)+r+i;t[e]=a>>>0,t[e+1]=o}se.sum64=g0;function p0(t,e,r,n){var i=e+n>>>0,s=(i<e?1:0)+t+r;return s>>>0}se.sum64_hi=p0;function m0(t,e,r,n){var i=e+n;return i>>>0}se.sum64_lo=m0;function v0(t,e,r,n,i,s,o,a){var l=0,g=e;g=g+n>>>0,l+=g<e?1:0,g=g+s>>>0,l+=g<s?1:0,g=g+a>>>0,l+=g<a?1:0;var y=t+r+i+o+l;return y>>>0}se.sum64_4_hi=v0;function y0(t,e,r,n,i,s,o,a){var l=e+n+s+a;return l>>>0}se.sum64_4_lo=y0;function b0(t,e,r,n,i,s,o,a,l,g){var y=0,A=e;A=A+n>>>0,y+=A<e?1:0,A=A+s>>>0,y+=A<s?1:0,A=A+a>>>0,y+=A<a?1:0,A=A+g>>>0,y+=A<g?1:0;var I=t+r+i+o+l+y;return I>>>0}se.sum64_5_hi=b0;function w0(t,e,r,n,i,s,o,a,l,g){var y=e+n+s+a+g;return y>>>0}se.sum64_5_lo=w0;function A0(t,e,r){var n=e<<32-r|t>>>r;return n>>>0}se.rotr64_hi=A0;function E0(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}se.rotr64_lo=E0;function x0(t,e,r){return t>>>r}se.shr64_hi=x0;function _0(t,e,r){var n=t<<32-r|e>>>r;return n>>>0}se.shr64_lo=_0;var Nn={},ma=se,S0=ii;function Yi(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Nn.BlockHash=Yi;Yi.prototype.update=function(e,r){if(e=ma.toArray(e,r),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=ma.join32(e,0,e.length-n,this.endian);for(var i=0;i<e.length;i+=this._delta32)this._update(e,i,i+this._delta32)}return this};Yi.prototype.digest=function(e){return this.update(this._pad()),S0(this.pending===null),this._digest(e)};Yi.prototype._pad=function(){var e=this.pendingTotal,r=this._delta8,n=r-(e+this.padLength)%r,i=new Array(n+this.padLength);i[0]=128;for(var s=1;s<n;s++)i[s]=0;if(e<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=e>>>24&255,i[s++]=e>>>16&255,i[s++]=e>>>8&255,i[s++]=e&255}else for(i[s++]=e&255,i[s++]=e>>>8&255,i[s++]=e>>>16&255,i[s++]=e>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var kn={},fr={},I0=se,rr=I0.rotr32;function M0(t,e,r,n){if(t===0)return Of(e,r,n);if(t===1||t===3)return Rf(e,r,n);if(t===2)return Pf(e,r,n)}fr.ft_1=M0;function Of(t,e,r){return t&e^~t&r}fr.ch32=Of;function Pf(t,e,r){return t&e^t&r^e&r}fr.maj32=Pf;function Rf(t,e,r){return t^e^r}fr.p32=Rf;function N0(t){return rr(t,2)^rr(t,13)^rr(t,22)}fr.s0_256=N0;function k0(t){return rr(t,6)^rr(t,11)^rr(t,25)}fr.s1_256=k0;function T0(t){return rr(t,7)^rr(t,18)^t>>>3}fr.g0_256=T0;function C0(t){return rr(t,17)^rr(t,19)^t>>>10}fr.g1_256=C0;var _n=se,O0=Nn,P0=fr,Ms=_n.rotl32,Pn=_n.sum32,R0=_n.sum32_5,B0=P0.ft_1,Bf=O0.BlockHash,L0=[1518500249,1859775393,2400959708,3395469782];function sr(){if(!(this instanceof sr))return new sr;Bf.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}_n.inherits(sr,Bf);var D0=sr;sr.blockSize=512;sr.outSize=160;sr.hmacStrength=80;sr.padLength=64;sr.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=Ms(n[i-3]^n[i-8]^n[i-14]^n[i-16],1);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],g=this.h[4];for(i=0;i<n.length;i++){var y=~~(i/20),A=R0(Ms(s,5),B0(y,o,a,l),g,n[i],L0[y]);g=l,l=a,a=Ms(o,30),o=s,s=A}this.h[0]=Pn(this.h[0],s),this.h[1]=Pn(this.h[1],o),this.h[2]=Pn(this.h[2],a),this.h[3]=Pn(this.h[3],l),this.h[4]=Pn(this.h[4],g)};sr.prototype._digest=function(e){return e==="hex"?_n.toHex32(this.h,"big"):_n.split32(this.h,"big")};var Sn=se,U0=Nn,Tn=fr,F0=ii,qt=Sn.sum32,H0=Sn.sum32_4,q0=Sn.sum32_5,z0=Tn.ch32,G0=Tn.maj32,j0=Tn.s0_256,W0=Tn.s1_256,V0=Tn.g0_256,K0=Tn.g1_256,Lf=U0.BlockHash,$0=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function or(){if(!(this instanceof or))return new or;Lf.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=$0,this.W=new Array(64)}Sn.inherits(or,Lf);var Df=or;or.blockSize=512;or.outSize=256;or.hmacStrength=192;or.padLength=64;or.prototype._update=function(e,r){for(var n=this.W,i=0;i<16;i++)n[i]=e[r+i];for(;i<n.length;i++)n[i]=H0(K0(n[i-2]),n[i-7],V0(n[i-15]),n[i-16]);var s=this.h[0],o=this.h[1],a=this.h[2],l=this.h[3],g=this.h[4],y=this.h[5],A=this.h[6],I=this.h[7];for(F0(this.k.length===n.length),i=0;i<n.length;i++){var M=q0(I,W0(g),z0(g,y,A),this.k[i],n[i]),k=qt(j0(s),G0(s,o,a));I=A,A=y,y=g,g=qt(l,M),l=a,a=o,o=s,s=qt(M,k)}this.h[0]=qt(this.h[0],s),this.h[1]=qt(this.h[1],o),this.h[2]=qt(this.h[2],a),this.h[3]=qt(this.h[3],l),this.h[4]=qt(this.h[4],g),this.h[5]=qt(this.h[5],y),this.h[6]=qt(this.h[6],A),this.h[7]=qt(this.h[7],I)};or.prototype._digest=function(e){return e==="hex"?Sn.toHex32(this.h,"big"):Sn.split32(this.h,"big")};var $s=se,Uf=Df;function gr(){if(!(this instanceof gr))return new gr;Uf.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}$s.inherits(gr,Uf);var J0=gr;gr.blockSize=512;gr.outSize=224;gr.hmacStrength=192;gr.padLength=64;gr.prototype._digest=function(e){return e==="hex"?$s.toHex32(this.h.slice(0,7),"big"):$s.split32(this.h.slice(0,7),"big")};var St=se,Y0=Nn,Q0=ii,nr=St.rotr64_hi,ir=St.rotr64_lo,Ff=St.shr64_hi,Hf=St.shr64_lo,Ir=St.sum64,Ns=St.sum64_hi,ks=St.sum64_lo,X0=St.sum64_4_hi,Z0=St.sum64_4_lo,eh=St.sum64_5_hi,th=St.sum64_5_lo,qf=Y0.BlockHash,rh=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Jt(){if(!(this instanceof Jt))return new Jt;qf.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=rh,this.W=new Array(160)}St.inherits(Jt,qf);var zf=Jt;Jt.blockSize=1024;Jt.outSize=512;Jt.hmacStrength=192;Jt.padLength=128;Jt.prototype._prepareBlock=function(e,r){for(var n=this.W,i=0;i<32;i++)n[i]=e[r+i];for(;i<n.length;i+=2){var s=dh(n[i-4],n[i-3]),o=gh(n[i-4],n[i-3]),a=n[i-14],l=n[i-13],g=ch(n[i-30],n[i-29]),y=hh(n[i-30],n[i-29]),A=n[i-32],I=n[i-31];n[i]=X0(s,o,a,l,g,y,A,I),n[i+1]=Z0(s,o,a,l,g,y,A,I)}};Jt.prototype._update=function(e,r){this._prepareBlock(e,r);var n=this.W,i=this.h[0],s=this.h[1],o=this.h[2],a=this.h[3],l=this.h[4],g=this.h[5],y=this.h[6],A=this.h[7],I=this.h[8],M=this.h[9],k=this.h[10],P=this.h[11],j=this.h[12],B=this.h[13],W=this.h[14],H=this.h[15];Q0(this.k.length===n.length);for(var J=0;J<n.length;J+=2){var K=W,Y=H,ye=uh(I,M),de=lh(I,M),X=nh(I,M,k,P,j),we=ih(I,M,k,P,j,B),le=this.k[J],at=this.k[J+1],_=n[J],u=n[J+1],d=eh(K,Y,ye,de,X,we,le,at,_,u),w=th(K,Y,ye,de,X,we,le,at,_,u);K=ah(i,s),Y=fh(i,s),ye=sh(i,s,o,a,l),de=oh(i,s,o,a,l,g);var E=Ns(K,Y,ye,de),c=ks(K,Y,ye,de);W=j,H=B,j=k,B=P,k=I,P=M,I=Ns(y,A,d,w),M=ks(A,A,d,w),y=l,A=g,l=o,g=a,o=i,a=s,i=Ns(d,w,E,c),s=ks(d,w,E,c)}Ir(this.h,0,i,s),Ir(this.h,2,o,a),Ir(this.h,4,l,g),Ir(this.h,6,y,A),Ir(this.h,8,I,M),Ir(this.h,10,k,P),Ir(this.h,12,j,B),Ir(this.h,14,W,H)};Jt.prototype._digest=function(e){return e==="hex"?St.toHex32(this.h,"big"):St.split32(this.h,"big")};function nh(t,e,r,n,i){var s=t&r^~t&i;return s<0&&(s+=4294967296),s}function ih(t,e,r,n,i,s){var o=e&n^~e&s;return o<0&&(o+=4294967296),o}function sh(t,e,r,n,i){var s=t&r^t&i^r&i;return s<0&&(s+=4294967296),s}function oh(t,e,r,n,i,s){var o=e&n^e&s^n&s;return o<0&&(o+=4294967296),o}function ah(t,e){var r=nr(t,e,28),n=nr(e,t,2),i=nr(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function fh(t,e){var r=ir(t,e,28),n=ir(e,t,2),i=ir(e,t,7),s=r^n^i;return s<0&&(s+=4294967296),s}function uh(t,e){var r=nr(t,e,14),n=nr(t,e,18),i=nr(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function lh(t,e){var r=ir(t,e,14),n=ir(t,e,18),i=ir(e,t,9),s=r^n^i;return s<0&&(s+=4294967296),s}function ch(t,e){var r=nr(t,e,1),n=nr(t,e,8),i=Ff(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function hh(t,e){var r=ir(t,e,1),n=ir(t,e,8),i=Hf(t,e,7),s=r^n^i;return s<0&&(s+=4294967296),s}function dh(t,e){var r=nr(t,e,19),n=nr(e,t,29),i=Ff(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}function gh(t,e){var r=ir(t,e,19),n=ir(e,t,29),i=Hf(t,e,6),s=r^n^i;return s<0&&(s+=4294967296),s}var Js=se,Gf=zf;function pr(){if(!(this instanceof pr))return new pr;Gf.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Js.inherits(pr,Gf);var ph=pr;pr.blockSize=1024;pr.outSize=384;pr.hmacStrength=192;pr.padLength=128;pr.prototype._digest=function(e){return e==="hex"?Js.toHex32(this.h.slice(0,12),"big"):Js.split32(this.h.slice(0,12),"big")};kn.sha1=D0;kn.sha224=J0;kn.sha256=Df;kn.sha384=ph;kn.sha512=zf;var jf={},on=se,mh=Nn,di=on.rotl32,va=on.sum32,Rn=on.sum32_3,ya=on.sum32_4,Wf=mh.BlockHash;function ar(){if(!(this instanceof ar))return new ar;Wf.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}on.inherits(ar,Wf);jf.ripemd160=ar;ar.blockSize=512;ar.outSize=160;ar.hmacStrength=192;ar.padLength=64;ar.prototype._update=function(e,r){for(var n=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],a=this.h[4],l=n,g=i,y=s,A=o,I=a,M=0;M<80;M++){var k=va(di(ya(n,ba(M,i,s,o),e[bh[M]+r],vh(M)),Ah[M]),a);n=a,a=o,o=di(s,10),s=i,i=k,k=va(di(ya(l,ba(79-M,g,y,A),e[wh[M]+r],yh(M)),Eh[M]),I),l=I,I=A,A=di(y,10),y=g,g=k}k=Rn(this.h[1],s,A),this.h[1]=Rn(this.h[2],o,I),this.h[2]=Rn(this.h[3],a,l),this.h[3]=Rn(this.h[4],n,g),this.h[4]=Rn(this.h[0],i,y),this.h[0]=k};ar.prototype._digest=function(e){return e==="hex"?on.toHex32(this.h,"little"):on.split32(this.h,"little")};function ba(t,e,r,n){return t<=15?e^r^n:t<=31?e&r|~e&n:t<=47?(e|~r)^n:t<=63?e&n|r&~n:e^(r|~n)}function vh(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function yh(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}var bh=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],wh=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],Ah=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],Eh=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],xh=se,_h=ii;function In(t,e,r){if(!(this instanceof In))return new In(t,e,r);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(xh.toArray(e,r))}var Sh=In;In.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),_h(e.length<=this.blockSize);for(var r=e.length;r<this.blockSize;r++)e.push(0);for(r=0;r<e.length;r++)e[r]^=54;for(this.inner=new this.Hash().update(e),r=0;r<e.length;r++)e[r]^=106;this.outer=new this.Hash().update(e)};In.prototype.update=function(e,r){return this.inner.update(e,r),this};In.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)};(function(t){var e=t;e.utils=se,e.common=Nn,e.sha=kn,e.ripemd=jf,e.hmac=Sh,e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Mf);const Qt=ji(Mf);function Cn(t,e,r){return r={path:e,exports:{},require:function(n,i){return Ih(n,i??r.path)}},t(r,r.exports),r.exports}function Ih(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var Eo=Vf;function Vf(t,e){if(!t)throw new Error(e||"Assertion failed")}Vf.equal=function(e,r,n){if(e!=r)throw new Error(n||"Assertion failed: "+e+" != "+r)};var Kt=Cn(function(t,e){var r=e;function n(o,a){if(Array.isArray(o))return o.slice();if(!o)return[];var l=[];if(typeof o!="string"){for(var g=0;g<o.length;g++)l[g]=o[g]|0;return l}if(a==="hex"){o=o.replace(/[^a-z0-9]+/ig,""),o.length%2!==0&&(o="0"+o);for(var g=0;g<o.length;g+=2)l.push(parseInt(o[g]+o[g+1],16))}else for(var g=0;g<o.length;g++){var y=o.charCodeAt(g),A=y>>8,I=y&255;A?l.push(A,I):l.push(I)}return l}r.toArray=n;function i(o){return o.length===1?"0"+o:o}r.zero2=i;function s(o){for(var a="",l=0;l<o.length;l++)a+=i(o[l].toString(16));return a}r.toHex=s,r.encode=function(a,l){return l==="hex"?s(a):a}}),Ct=Cn(function(t,e){var r=e;r.assert=Eo,r.toArray=Kt.toArray,r.zero2=Kt.zero2,r.toHex=Kt.toHex,r.encode=Kt.encode;function n(l,g,y){var A=new Array(Math.max(l.bitLength(),y)+1);A.fill(0);for(var I=1<<g+1,M=l.clone(),k=0;k<A.length;k++){var P,j=M.andln(I-1);M.isOdd()?(j>(I>>1)-1?P=(I>>1)-j:P=j,M.isubn(P)):P=0,A[k]=P,M.iushrn(1)}return A}r.getNAF=n;function i(l,g){var y=[[],[]];l=l.clone(),g=g.clone();for(var A=0,I=0,M;l.cmpn(-A)>0||g.cmpn(-I)>0;){var k=l.andln(3)+A&3,P=g.andln(3)+I&3;k===3&&(k=-1),P===3&&(P=-1);var j;k&1?(M=l.andln(7)+A&7,(M===3||M===5)&&P===2?j=-k:j=k):j=0,y[0].push(j);var B;P&1?(M=g.andln(7)+I&7,(M===3||M===5)&&k===2?B=-P:B=P):B=0,y[1].push(B),2*A===j+1&&(A=1-A),2*I===B+1&&(I=1-I),l.iushrn(1),g.iushrn(1)}return y}r.getJSF=i;function s(l,g,y){var A="_"+g;l.prototype[g]=function(){return this[A]!==void 0?this[A]:this[A]=y.call(this)}}r.cachedProperty=s;function o(l){return typeof l=="string"?r.toArray(l,"hex"):l}r.parseBytes=o;function a(l){return new ee(l,"hex","le")}r.intFromLE=a}),Oi=Ct.getNAF,Mh=Ct.getJSF,Pi=Ct.assert;function Br(t,e){this.type=t,this.p=new ee(e.p,16),this.red=e.prime?ee.red(e.prime):ee.mont(this.p),this.zero=new ee(0).toRed(this.red),this.one=new ee(1).toRed(this.red),this.two=new ee(2).toRed(this.red),this.n=e.n&&new ee(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var r=this.n&&this.p.div(this.n);!r||r.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var un=Br;Br.prototype.point=function(){throw new Error("Not implemented")};Br.prototype.validate=function(){throw new Error("Not implemented")};Br.prototype._fixedNafMul=function(e,r){Pi(e.precomputed);var n=e._getDoubles(),i=Oi(r,1,this._bitLength),s=(1<<n.step+1)-(n.step%2===0?2:1);s/=3;var o=[],a,l;for(a=0;a<i.length;a+=n.step){l=0;for(var g=a+n.step-1;g>=a;g--)l=(l<<1)+i[g];o.push(l)}for(var y=this.jpoint(null,null,null),A=this.jpoint(null,null,null),I=s;I>0;I--){for(a=0;a<o.length;a++)l=o[a],l===I?A=A.mixedAdd(n.points[a]):l===-I&&(A=A.mixedAdd(n.points[a].neg()));y=y.add(A)}return y.toP()};Br.prototype._wnafMul=function(e,r){var n=4,i=e._getNAFPoints(n);n=i.wnd;for(var s=i.points,o=Oi(r,n,this._bitLength),a=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var g=0;l>=0&&o[l]===0;l--)g++;if(l>=0&&g++,a=a.dblp(g),l<0)break;var y=o[l];Pi(y!==0),e.type==="affine"?y>0?a=a.mixedAdd(s[y-1>>1]):a=a.mixedAdd(s[-y-1>>1].neg()):y>0?a=a.add(s[y-1>>1]):a=a.add(s[-y-1>>1].neg())}return e.type==="affine"?a.toP():a};Br.prototype._wnafMulAdd=function(e,r,n,i,s){var o=this._wnafT1,a=this._wnafT2,l=this._wnafT3,g=0,y,A,I;for(y=0;y<i;y++){I=r[y];var M=I._getNAFPoints(e);o[y]=M.wnd,a[y]=M.points}for(y=i-1;y>=1;y-=2){var k=y-1,P=y;if(o[k]!==1||o[P]!==1){l[k]=Oi(n[k],o[k],this._bitLength),l[P]=Oi(n[P],o[P],this._bitLength),g=Math.max(l[k].length,g),g=Math.max(l[P].length,g);continue}var j=[r[k],null,null,r[P]];r[k].y.cmp(r[P].y)===0?(j[1]=r[k].add(r[P]),j[2]=r[k].toJ().mixedAdd(r[P].neg())):r[k].y.cmp(r[P].y.redNeg())===0?(j[1]=r[k].toJ().mixedAdd(r[P]),j[2]=r[k].add(r[P].neg())):(j[1]=r[k].toJ().mixedAdd(r[P]),j[2]=r[k].toJ().mixedAdd(r[P].neg()));var B=[-3,-1,-5,-7,0,7,5,1,3],W=Mh(n[k],n[P]);for(g=Math.max(W[0].length,g),l[k]=new Array(g),l[P]=new Array(g),A=0;A<g;A++){var H=W[0][A]|0,J=W[1][A]|0;l[k][A]=B[(H+1)*3+(J+1)],l[P][A]=0,a[k]=j}}var K=this.jpoint(null,null,null),Y=this._wnafT4;for(y=g;y>=0;y--){for(var ye=0;y>=0;){var de=!0;for(A=0;A<i;A++)Y[A]=l[A][y]|0,Y[A]!==0&&(de=!1);if(!de)break;ye++,y--}if(y>=0&&ye++,K=K.dblp(ye),y<0)break;for(A=0;A<i;A++){var X=Y[A];X!==0&&(X>0?I=a[A][X-1>>1]:X<0&&(I=a[A][-X-1>>1].neg()),I.type==="affine"?K=K.mixedAdd(I):K=K.add(I))}}for(y=0;y<i;y++)a[y]=null;return s?K:K.toP()};function Ut(t,e){this.curve=t,this.type=e,this.precomputed=null}Br.BasePoint=Ut;Ut.prototype.eq=function(){throw new Error("Not implemented")};Ut.prototype.validate=function(){return this.curve.validate(this)};Br.prototype.decodePoint=function(e,r){e=Ct.toArray(e,r);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?Pi(e[e.length-1]%2===0):e[0]===7&&Pi(e[e.length-1]%2===1);var i=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return i}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Ut.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Ut.prototype._encode=function(e){var r=this.curve.p.byteLength(),n=this.getX().toArray("be",r);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",r))};Ut.prototype.encode=function(e,r){return Ct.encode(this._encode(r),e)};Ut.prototype.precompute=function(e){if(this.precomputed)return this;var r={doubles:null,naf:null,beta:null};return r.naf=this._getNAFPoints(8),r.doubles=this._getDoubles(4,e),r.beta=this._getBeta(),this.precomputed=r,this};Ut.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var r=this.precomputed.doubles;return r?r.points.length>=Math.ceil((e.bitLength()+1)/r.step):!1};Ut.prototype._getDoubles=function(e,r){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],i=this,s=0;s<r;s+=e){for(var o=0;o<e;o++)i=i.dbl();n.push(i)}return{step:e,points:n}};Ut.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var r=[this],n=(1<<e)-1,i=n===1?null:this.dbl(),s=1;s<n;s++)r[s]=r[s-1].add(i);return{wnd:e,points:r}};Ut.prototype._getBeta=function(){return null};Ut.prototype.dblp=function(e){for(var r=this,n=0;n<e;n++)r=r.dbl();return r};var xo=Cn(function(t){typeof Object.create=="function"?t.exports=function(r,n){n&&(r.super_=n,r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(r,n){if(n){r.super_=n;var i=function(){};i.prototype=n.prototype,r.prototype=new i,r.prototype.constructor=r}}}),Nh=Ct.assert;function Ft(t){un.call(this,"short",t),this.a=new ee(t.a,16).toRed(this.red),this.b=new ee(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}xo(Ft,un);var kh=Ft;Ft.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var r,n;if(e.beta)r=new ee(e.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);r=i[0].cmp(i[1])<0?i[0]:i[1],r=r.toRed(this.red)}if(e.lambda)n=new ee(e.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(r))===0?n=s[0]:(n=s[1],Nh(this.g.mul(n).x.cmp(this.g.x.redMul(r))===0))}var o;return e.basis?o=e.basis.map(function(a){return{a:new ee(a.a,16),b:new ee(a.b,16)}}):o=this._getEndoBasis(n),{beta:r,lambda:n,basis:o}}};Ft.prototype._getEndoRoots=function(e){var r=e===this.p?this.red:ee.mont(e),n=new ee(2).toRed(r).redInvm(),i=n.redNeg(),s=new ee(3).toRed(r).redNeg().redSqrt().redMul(n),o=i.redAdd(s).fromRed(),a=i.redSub(s).fromRed();return[o,a]};Ft.prototype._getEndoBasis=function(e){for(var r=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,i=this.n.clone(),s=new ee(1),o=new ee(0),a=new ee(0),l=new ee(1),g,y,A,I,M,k,P,j=0,B,W;n.cmpn(0)!==0;){var H=i.div(n);B=i.sub(H.mul(n)),W=a.sub(H.mul(s));var J=l.sub(H.mul(o));if(!A&&B.cmp(r)<0)g=P.neg(),y=s,A=B.neg(),I=W;else if(A&&++j===2)break;P=B,i=n,n=B,a=s,s=W,l=o,o=J}M=B.neg(),k=W;var K=A.sqr().add(I.sqr()),Y=M.sqr().add(k.sqr());return Y.cmp(K)>=0&&(M=g,k=y),A.negative&&(A=A.neg(),I=I.neg()),M.negative&&(M=M.neg(),k=k.neg()),[{a:A,b:I},{a:M,b:k}]};Ft.prototype._endoSplit=function(e){var r=this.endo.basis,n=r[0],i=r[1],s=i.b.mul(e).divRound(this.n),o=n.b.neg().mul(e).divRound(this.n),a=s.mul(n.a),l=o.mul(i.a),g=s.mul(n.b),y=o.mul(i.b),A=e.sub(a).sub(l),I=g.add(y).neg();return{k1:A,k2:I}};Ft.prototype.pointFromX=function(e,r){e=new ee(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),i=n.redSqrt();if(i.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(r&&!s||!r&&s)&&(i=i.redNeg()),this.point(e,i)};Ft.prototype.validate=function(e){if(e.inf)return!0;var r=e.x,n=e.y,i=this.a.redMul(r),s=r.redSqr().redMul(r).redIAdd(i).redIAdd(this.b);return n.redSqr().redISub(s).cmpn(0)===0};Ft.prototype._endoWnafMulAdd=function(e,r,n){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<e.length;o++){var a=this._endoSplit(r[o]),l=e[o],g=l._getBeta();a.k1.negative&&(a.k1.ineg(),l=l.neg(!0)),a.k2.negative&&(a.k2.ineg(),g=g.neg(!0)),i[o*2]=l,i[o*2+1]=g,s[o*2]=a.k1,s[o*2+1]=a.k2}for(var y=this._wnafMulAdd(1,i,s,o*2,n),A=0;A<o*2;A++)i[A]=null,s[A]=null;return y};function dt(t,e,r,n){un.BasePoint.call(this,t,"affine"),e===null&&r===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new ee(e,16),this.y=new ee(r,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}xo(dt,un.BasePoint);Ft.prototype.point=function(e,r,n){return new dt(this,e,r,n)};Ft.prototype.pointFromJSON=function(e,r){return dt.fromJSON(this,e,r)};dt.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var r=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,i=function(s){return n.point(s.x.redMul(n.endo.beta),s.y)};e.beta=r,r.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return r}};dt.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};dt.fromJSON=function(e,r,n){typeof r=="string"&&(r=JSON.parse(r));var i=e.point(r[0],r[1],n);if(!r[2])return i;function s(a){return e.point(a[0],a[1],n)}var o=r[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i};dt.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};dt.prototype.isInfinity=function(){return this.inf};dt.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var r=this.y.redSub(e.y);r.cmpn(0)!==0&&(r=r.redMul(this.x.redSub(e.x).redInvm()));var n=r.redSqr().redISub(this.x).redISub(e.x),i=r.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,i)};dt.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var r=this.curve.a,n=this.x.redSqr(),i=e.redInvm(),s=n.redAdd(n).redIAdd(n).redIAdd(r).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),a=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,a)};dt.prototype.getX=function(){return this.x.fromRed()};dt.prototype.getY=function(){return this.y.fromRed()};dt.prototype.mul=function(e){return e=new ee(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};dt.prototype.mulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)};dt.prototype.jmulAdd=function(e,r,n){var i=[this,r],s=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)};dt.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};dt.prototype.neg=function(e){if(this.inf)return this;var r=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,i=function(s){return s.neg()};r.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(i)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(i)}}}return r};dt.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function vt(t,e,r,n){un.BasePoint.call(this,t,"jacobian"),e===null&&r===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ee(0)):(this.x=new ee(e,16),this.y=new ee(r,16),this.z=new ee(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}xo(vt,un.BasePoint);Ft.prototype.jpoint=function(e,r,n){return new vt(this,e,r,n)};vt.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),r=e.redSqr(),n=this.x.redMul(r),i=this.y.redMul(r).redMul(e);return this.curve.point(n,i)};vt.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};vt.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var r=e.z.redSqr(),n=this.z.redSqr(),i=this.x.redMul(r),s=e.x.redMul(n),o=this.y.redMul(r.redMul(e.z)),a=e.y.redMul(n.redMul(this.z)),l=i.redSub(s),g=o.redSub(a);if(l.cmpn(0)===0)return g.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var y=l.redSqr(),A=y.redMul(l),I=i.redMul(y),M=g.redSqr().redIAdd(A).redISub(I).redISub(I),k=g.redMul(I.redISub(M)).redISub(o.redMul(A)),P=this.z.redMul(e.z).redMul(l);return this.curve.jpoint(M,k,P)};vt.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var r=this.z.redSqr(),n=this.x,i=e.x.redMul(r),s=this.y,o=e.y.redMul(r).redMul(this.z),a=n.redSub(i),l=s.redSub(o);if(a.cmpn(0)===0)return l.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var g=a.redSqr(),y=g.redMul(a),A=n.redMul(g),I=l.redSqr().redIAdd(y).redISub(A).redISub(A),M=l.redMul(A.redISub(I)).redISub(s.redMul(y)),k=this.z.redMul(a);return this.curve.jpoint(I,M,k)};vt.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var r;if(this.curve.zeroA||this.curve.threeA){var n=this;for(r=0;r<e;r++)n=n.dbl();return n}var i=this.curve.a,s=this.curve.tinv,o=this.x,a=this.y,l=this.z,g=l.redSqr().redSqr(),y=a.redAdd(a);for(r=0;r<e;r++){var A=o.redSqr(),I=y.redSqr(),M=I.redSqr(),k=A.redAdd(A).redIAdd(A).redIAdd(i.redMul(g)),P=o.redMul(I),j=k.redSqr().redISub(P.redAdd(P)),B=P.redISub(j),W=k.redMul(B);W=W.redIAdd(W).redISub(M);var H=y.redMul(l);r+1<e&&(g=g.redMul(M)),o=j,l=H,y=W}return this.curve.jpoint(o,y.redMul(s),l)};vt.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};vt.prototype._zeroDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i),g=l.redSqr().redISub(a).redISub(a),y=o.redIAdd(o);y=y.redIAdd(y),y=y.redIAdd(y),e=g,r=l.redMul(a.redISub(g)).redISub(y),n=this.y.redAdd(this.y)}else{var A=this.x.redSqr(),I=this.y.redSqr(),M=I.redSqr(),k=this.x.redAdd(I).redSqr().redISub(A).redISub(M);k=k.redIAdd(k);var P=A.redAdd(A).redIAdd(A),j=P.redSqr(),B=M.redIAdd(M);B=B.redIAdd(B),B=B.redIAdd(B),e=j.redISub(k).redISub(k),r=P.redMul(k.redISub(e)).redISub(B),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,r,n)};vt.prototype._threeDbl=function(){var e,r,n;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),a=this.x.redAdd(s).redSqr().redISub(i).redISub(o);a=a.redIAdd(a);var l=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),g=l.redSqr().redISub(a).redISub(a);e=g;var y=o.redIAdd(o);y=y.redIAdd(y),y=y.redIAdd(y),r=l.redMul(a.redISub(g)).redISub(y),n=this.y.redAdd(this.y)}else{var A=this.z.redSqr(),I=this.y.redSqr(),M=this.x.redMul(I),k=this.x.redSub(A).redMul(this.x.redAdd(A));k=k.redAdd(k).redIAdd(k);var P=M.redIAdd(M);P=P.redIAdd(P);var j=P.redAdd(P);e=k.redSqr().redISub(j),n=this.y.redAdd(this.z).redSqr().redISub(I).redISub(A);var B=I.redSqr();B=B.redIAdd(B),B=B.redIAdd(B),B=B.redIAdd(B),r=k.redMul(P.redISub(e)).redISub(B)}return this.curve.jpoint(e,r,n)};vt.prototype._dbl=function(){var e=this.curve.a,r=this.x,n=this.y,i=this.z,s=i.redSqr().redSqr(),o=r.redSqr(),a=n.redSqr(),l=o.redAdd(o).redIAdd(o).redIAdd(e.redMul(s)),g=r.redAdd(r);g=g.redIAdd(g);var y=g.redMul(a),A=l.redSqr().redISub(y.redAdd(y)),I=y.redISub(A),M=a.redSqr();M=M.redIAdd(M),M=M.redIAdd(M),M=M.redIAdd(M);var k=l.redMul(I).redISub(M),P=n.redAdd(n).redMul(i);return this.curve.jpoint(A,k,P)};vt.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),r=this.y.redSqr(),n=this.z.redSqr(),i=r.redSqr(),s=e.redAdd(e).redIAdd(e),o=s.redSqr(),a=this.x.redAdd(r).redSqr().redISub(e).redISub(i);a=a.redIAdd(a),a=a.redAdd(a).redIAdd(a),a=a.redISub(o);var l=a.redSqr(),g=i.redIAdd(i);g=g.redIAdd(g),g=g.redIAdd(g),g=g.redIAdd(g);var y=s.redIAdd(a).redSqr().redISub(o).redISub(l).redISub(g),A=r.redMul(y);A=A.redIAdd(A),A=A.redIAdd(A);var I=this.x.redMul(l).redISub(A);I=I.redIAdd(I),I=I.redIAdd(I);var M=this.y.redMul(y.redMul(g.redISub(y)).redISub(a.redMul(l)));M=M.redIAdd(M),M=M.redIAdd(M),M=M.redIAdd(M);var k=this.z.redAdd(a).redSqr().redISub(n).redISub(l);return this.curve.jpoint(I,M,k)};vt.prototype.mul=function(e,r){return e=new ee(e,r),this.curve._wnafMul(this,e)};vt.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var r=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(r)).cmpn(0)!==0)return!1;var i=r.redMul(this.z),s=n.redMul(e.z);return this.y.redMul(s).redISub(e.y.redMul(i)).cmpn(0)===0};vt.prototype.eqXToP=function(e){var r=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(r);if(this.x.cmp(n)===0)return!0;for(var i=e.clone(),s=this.curve.redN.redMul(r);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(s),this.x.cmp(n)===0)return!0}};vt.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};vt.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ai=Cn(function(t,e){var r=e;r.base=un,r.short=kh,r.mont=null,r.edwards=null}),Ei=Cn(function(t,e){var r=e,n=Ct.assert;function i(a){a.type==="short"?this.curve=new Ai.short(a):a.type==="edwards"?this.curve=new Ai.edwards(a):this.curve=new Ai.mont(a),this.g=this.curve.g,this.n=this.curve.n,this.hash=a.hash,n(this.g.validate(),"Invalid curve"),n(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}r.PresetCurve=i;function s(a,l){Object.defineProperty(r,a,{configurable:!0,enumerable:!0,get:function(){var g=new i(l);return Object.defineProperty(r,a,{configurable:!0,enumerable:!0,value:g}),g}})}s("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:Qt.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),s("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:Qt.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),s("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:Qt.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),s("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:Qt.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),s("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:Qt.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),s("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Qt.sha256,gRed:!1,g:["9"]}),s("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:Qt.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var o;try{o=null.crash()}catch{o=void 0}s("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:Qt.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",o]})});function Pr(t){if(!(this instanceof Pr))return new Pr(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=Kt.toArray(t.entropy,t.entropyEnc||"hex"),r=Kt.toArray(t.nonce,t.nonceEnc||"hex"),n=Kt.toArray(t.pers,t.persEnc||"hex");Eo(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,r,n)}var Kf=Pr;Pr.prototype._init=function(e,r,n){var i=e.concat(r).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656};Pr.prototype._hmac=function(){return new Qt.hmac(this.hash,this.K)};Pr.prototype._update=function(e){var r=this._hmac().update(this.V).update([0]);e&&(r=r.update(e)),this.K=r.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};Pr.prototype.reseed=function(e,r,n,i){typeof r!="string"&&(i=n,n=r,r=null),e=Kt.toArray(e,r),n=Kt.toArray(n,i),Eo(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};Pr.prototype.generate=function(e,r,n,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof r!="string"&&(i=n,n=r,r=null),n&&(n=Kt.toArray(n,i||"hex"),this._update(n));for(var s=[];s.length<e;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,e);return this._update(n),this._reseed++,Kt.encode(o,r)};var Ys=Ct.assert;function wt(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}var _o=wt;wt.fromPublic=function(e,r,n){return r instanceof wt?r:new wt(e,{pub:r,pubEnc:n})};wt.fromPrivate=function(e,r,n){return r instanceof wt?r:new wt(e,{priv:r,privEnc:n})};wt.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};wt.prototype.getPublic=function(e,r){return typeof e=="string"&&(r=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),r?this.pub.encode(r,e):this.pub};wt.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};wt.prototype._importPrivate=function(e,r){this.priv=new ee(e,r||16),this.priv=this.priv.umod(this.ec.curve.n)};wt.prototype._importPublic=function(e,r){if(e.x||e.y){this.ec.curve.type==="mont"?Ys(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Ys(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,r)};wt.prototype.derive=function(e){return e.validate()||Ys(e.validate(),"public point not validated"),e.mul(this.priv).getX()};wt.prototype.sign=function(e,r,n){return this.ec.sign(e,this,r,n)};wt.prototype.verify=function(e,r){return this.ec.verify(e,r,this)};wt.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var Th=Ct.assert;function Qi(t,e){if(t instanceof Qi)return t;this._importDER(t,e)||(Th(t.r&&t.s,"Signature without r or s"),this.r=new ee(t.r,16),this.s=new ee(t.s,16),t.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}var Xi=Qi;function Ch(){this.place=0}function Ts(t,e){var r=t[e.place++];if(!(r&128))return r;var n=r&15;if(n===0||n>4)return!1;for(var i=0,s=0,o=e.place;s<n;s++,o++)i<<=8,i|=t[o],i>>>=0;return i<=127?!1:(e.place=o,i)}function wa(t){for(var e=0,r=t.length-1;!t[e]&&!(t[e+1]&128)&&e<r;)e++;return e===0?t:t.slice(e)}Qi.prototype._importDER=function(e,r){e=Ct.toArray(e,r);var n=new Ch;if(e[n.place++]!==48)return!1;var i=Ts(e,n);if(i===!1||i+n.place!==e.length||e[n.place++]!==2)return!1;var s=Ts(e,n);if(s===!1)return!1;var o=e.slice(n.place,s+n.place);if(n.place+=s,e[n.place++]!==2)return!1;var a=Ts(e,n);if(a===!1||e.length!==a+n.place)return!1;var l=e.slice(n.place,a+n.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(l[0]===0)if(l[1]&128)l=l.slice(1);else return!1;return this.r=new ee(o),this.s=new ee(l),this.recoveryParam=null,!0};function Cs(t,e){if(e<128){t.push(e);return}var r=1+(Math.log(e)/Math.LN2>>>3);for(t.push(r|128);--r;)t.push(e>>>(r<<3)&255);t.push(e)}Qi.prototype.toDER=function(e){var r=this.r.toArray(),n=this.s.toArray();for(r[0]&128&&(r=[0].concat(r)),n[0]&128&&(n=[0].concat(n)),r=wa(r),n=wa(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var i=[2];Cs(i,r.length),i=i.concat(r),i.push(2),Cs(i,n.length);var s=i.concat(n),o=[48];return Cs(o,s.length),o=o.concat(s),Ct.encode(o,e)};var Oh=function(){throw new Error("unsupported")},$f=Ct.assert;function Dt(t){if(!(this instanceof Dt))return new Dt(t);typeof t=="string"&&($f(Object.prototype.hasOwnProperty.call(Ei,t),"Unknown curve "+t),t=Ei[t]),t instanceof Ei.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}var Ph=Dt;Dt.prototype.keyPair=function(e){return new _o(this,e)};Dt.prototype.keyFromPrivate=function(e,r){return _o.fromPrivate(this,e,r)};Dt.prototype.keyFromPublic=function(e,r){return _o.fromPublic(this,e,r)};Dt.prototype.genKeyPair=function(e){e||(e={});for(var r=new Kf({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||Oh(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),i=this.n.sub(new ee(2));;){var s=new ee(r.generate(n));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}};Dt.prototype._truncateToN=function(e,r){var n=e.byteLength()*8-this.n.bitLength();return n>0&&(e=e.ushrn(n)),!r&&e.cmp(this.n)>=0?e.sub(this.n):e};Dt.prototype.sign=function(e,r,n,i){typeof n=="object"&&(i=n,n=null),i||(i={}),r=this.keyFromPrivate(r,n),e=this._truncateToN(new ee(e,16));for(var s=this.n.byteLength(),o=r.getPrivate().toArray("be",s),a=e.toArray("be",s),l=new Kf({hash:this.hash,entropy:o,nonce:a,pers:i.pers,persEnc:i.persEnc||"utf8"}),g=this.n.sub(new ee(1)),y=0;;y++){var A=i.k?i.k(y):new ee(l.generate(this.n.byteLength()));if(A=this._truncateToN(A,!0),!(A.cmpn(1)<=0||A.cmp(g)>=0)){var I=this.g.mul(A);if(!I.isInfinity()){var M=I.getX(),k=M.umod(this.n);if(k.cmpn(0)!==0){var P=A.invm(this.n).mul(k.mul(r.getPrivate()).iadd(e));if(P=P.umod(this.n),P.cmpn(0)!==0){var j=(I.getY().isOdd()?1:0)|(M.cmp(k)!==0?2:0);return i.canonical&&P.cmp(this.nh)>0&&(P=this.n.sub(P),j^=1),new Xi({r:k,s:P,recoveryParam:j})}}}}}};Dt.prototype.verify=function(e,r,n,i){e=this._truncateToN(new ee(e,16)),n=this.keyFromPublic(n,i),r=new Xi(r,"hex");var s=r.r,o=r.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a=o.invm(this.n),l=a.mul(e).umod(this.n),g=a.mul(s).umod(this.n),y;return this.curve._maxwellTrick?(y=this.g.jmulAdd(l,n.getPublic(),g),y.isInfinity()?!1:y.eqXToP(s)):(y=this.g.mulAdd(l,n.getPublic(),g),y.isInfinity()?!1:y.getX().umod(this.n).cmp(s)===0)};Dt.prototype.recoverPubKey=function(t,e,r,n){$f((3&r)===r,"The recovery param is more than two bits"),e=new Xi(e,n);var i=this.n,s=new ee(t),o=e.r,a=e.s,l=r&1,g=r>>1;if(o.cmp(this.curve.p.umod(this.curve.n))>=0&&g)throw new Error("Unable to find sencond key candinate");g?o=this.curve.pointFromX(o.add(this.curve.n),l):o=this.curve.pointFromX(o,l);var y=e.r.invm(i),A=i.sub(s).mul(y).umod(i),I=a.mul(y).umod(i);return this.g.mulAdd(A,o,I)};Dt.prototype.getKeyRecoveryParam=function(t,e,r,n){if(e=new Xi(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var i=0;i<4;i++){var s;try{s=this.recoverPubKey(t,e,i)}catch{continue}if(s.eq(r))return i}throw new Error("Unable to find valid recovery factor")};var Rh=Cn(function(t,e){var r=e;r.version="6.5.4",r.utils=Ct,r.rand=function(){throw new Error("unsupported")},r.curve=Ai,r.curves=Ei,r.ec=Ph,r.eddsa=null}),Bh=Rh.ec;const Lh="signing-key/5.7.0",Qs=new R(Lh);let Os=null;function Zt(){return Os||(Os=new Bh("secp256k1")),Os}class Dh{constructor(e){G(this,"curve","secp256k1"),G(this,"privateKey",F(e)),nn(this.privateKey)!==32&&Qs.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const r=Zt().keyFromPrivate(q(this.privateKey));G(this,"publicKey","0x"+r.getPublic(!1,"hex")),G(this,"compressedPublicKey","0x"+r.getPublic(!0,"hex")),G(this,"_isSigningKey",!0)}_addPoint(e){const r=Zt().keyFromPublic(q(this.publicKey)),n=Zt().keyFromPublic(q(e));return"0x"+r.pub.add(n.pub).encodeCompressed("hex")}signDigest(e){const r=Zt().keyFromPrivate(q(this.privateKey)),n=q(e);n.length!==32&&Qs.throwArgumentError("bad digest length","digest",e);const i=r.sign(n,{canonical:!0});return Vi({recoveryParam:i.recoveryParam,r:it("0x"+i.r.toString(16),32),s:it("0x"+i.s.toString(16),32)})}computeSharedSecret(e){const r=Zt().keyFromPrivate(q(this.privateKey)),n=Zt().keyFromPublic(q(Jf(e)));return it("0x"+r.derive(n.getPublic()).toString(16),32)}static isSigningKey(e){return!!(e&&e._isSigningKey)}}function Uh(t,e){const r=Vi(e),n={r:q(r.r),s:q(r.s)};return"0x"+Zt().recoverPubKey(q(t),n,r.recoveryParam).encode("hex",!1)}function Jf(t,e){const r=q(t);if(r.length===32){const n=new Dh(r);return e?"0x"+Zt().keyFromPrivate(r).getPublic(!0,"hex"):n.publicKey}else{if(r.length===33)return e?F(r):"0x"+Zt().keyFromPublic(r).getPublic(!1,"hex");if(r.length===65)return e?"0x"+Zt().keyFromPublic(r).getPublic(!0,"hex"):F(r)}return Qs.throwArgumentError("invalid public or private key","key","[REDACTED]")}const Fh="transactions/5.7.0",vr=new R(Fh);var Aa;(function(t){t[t.legacy=0]="legacy",t[t.eip2930=1]="eip2930",t[t.eip1559=2]="eip1559"})(Aa||(Aa={}));function So(t){return t==="0x"?null:Xe(t)}function bt(t){return t==="0x"?ct:O.from(t)}function Hh(t){const e=Jf(t);return Xe(gt(fe(gt(e,1)),12))}function Ri(t,e){return Hh(Uh(q(t),e))}function kt(t,e){const r=En(O.from(t).toHexString());return r.length>32&&vr.throwArgumentError("invalid length for "+e,"transaction:"+e,t),r}function Ps(t,e){return{address:Xe(t),storageKeys:(e||[]).map((r,n)=>(nn(r)!==32&&vr.throwArgumentError("invalid access list storageKey",`accessList[${t}:${n}]`,r),r.toLowerCase()))}}function si(t){if(Array.isArray(t))return t.map((r,n)=>Array.isArray(r)?(r.length>2&&vr.throwArgumentError("access list expected to be [ address, storageKeys[] ]",`value[${n}]`,r),Ps(r[0],r[1])):Ps(r.address,r.storageKeys));const e=Object.keys(t).map(r=>{const n=t[r].reduce((i,s)=>(i[s]=!0,i),{});return Ps(r,Object.keys(n).sort())});return e.sort((r,n)=>r.address.localeCompare(n.address)),e}function Yf(t){return si(t).map(e=>[e.address,e.storageKeys])}function qh(t,e){if(t.gasPrice!=null){const n=O.from(t.gasPrice),i=O.from(t.maxFeePerGas||0);n.eq(i)||vr.throwArgumentError("mismatch EIP-1559 gasPrice != maxFeePerGas","tx",{gasPrice:n,maxFeePerGas:i})}const r=[kt(t.chainId||0,"chainId"),kt(t.nonce||0,"nonce"),kt(t.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),kt(t.maxFeePerGas||0,"maxFeePerGas"),kt(t.gasLimit||0,"gasLimit"),t.to!=null?Xe(t.to):"0x",kt(t.value||0,"value"),t.data||"0x",Yf(t.accessList||[])];if(e){const n=Vi(e);r.push(kt(n.recoveryParam,"recoveryParam")),r.push(En(n.r)),r.push(En(n.s))}return _t(["0x02",Ki(r)])}function zh(t,e){const r=[kt(t.chainId||0,"chainId"),kt(t.nonce||0,"nonce"),kt(t.gasPrice||0,"gasPrice"),kt(t.gasLimit||0,"gasLimit"),t.to!=null?Xe(t.to):"0x",kt(t.value||0,"value"),t.data||"0x",Yf(t.accessList||[])];if(e){const n=Vi(e);r.push(kt(n.recoveryParam,"recoveryParam")),r.push(En(n.r)),r.push(En(n.s))}return _t(["0x01",Ki(r)])}function Qf(t,e,r){try{const n=bt(e[0]).toNumber();if(n!==0&&n!==1)throw new Error("bad recid");t.v=n}catch{vr.throwArgumentError("invalid v for transaction type: 1","v",e[0])}t.r=it(e[1],32),t.s=it(e[2],32);try{const n=fe(r(t));t.from=Ri(n,{r:t.r,s:t.s,recoveryParam:t.v})}catch{}}function Gh(t){const e=yo(t.slice(1));e.length!==9&&e.length!==12&&vr.throwArgumentError("invalid component count for transaction type: 2","payload",F(t));const r=bt(e[2]),n=bt(e[3]),i={type:2,chainId:bt(e[0]).toNumber(),nonce:bt(e[1]).toNumber(),maxPriorityFeePerGas:r,maxFeePerGas:n,gasPrice:null,gasLimit:bt(e[4]),to:So(e[5]),value:bt(e[6]),data:e[7],accessList:si(e[8])};return e.length===9||(i.hash=fe(t),Qf(i,e.slice(9),qh)),i}function jh(t){const e=yo(t.slice(1));e.length!==8&&e.length!==11&&vr.throwArgumentError("invalid component count for transaction type: 1","payload",F(t));const r={type:1,chainId:bt(e[0]).toNumber(),nonce:bt(e[1]).toNumber(),gasPrice:bt(e[2]),gasLimit:bt(e[3]),to:So(e[4]),value:bt(e[5]),data:e[6],accessList:si(e[7])};return e.length===8||(r.hash=fe(t),Qf(r,e.slice(8),zh)),r}function Wh(t){const e=yo(t);e.length!==9&&e.length!==6&&vr.throwArgumentError("invalid raw transaction","rawTransaction",t);const r={nonce:bt(e[0]).toNumber(),gasPrice:bt(e[1]),gasLimit:bt(e[2]),to:So(e[3]),value:bt(e[4]),data:e[5],chainId:0};if(e.length===6)return r;try{r.v=O.from(e[6]).toNumber()}catch{return r}if(r.r=it(e[7],32),r.s=it(e[8],32),O.from(r.r).isZero()&&O.from(r.s).isZero())r.chainId=r.v,r.v=0;else{r.chainId=Math.floor((r.v-35)/2),r.chainId<0&&(r.chainId=0);let n=r.v-27;const i=e.slice(0,6);r.chainId!==0&&(i.push(F(r.chainId)),i.push("0x"),i.push("0x"),n-=r.chainId*2+8);const s=fe(Ki(i));try{r.from=Ri(s,{r:F(r.r),s:F(r.s),recoveryParam:n})}catch{}r.hash=fe(t)}return r.type=null,r}function Vh(t){const e=q(t);if(e[0]>127)return Wh(e);switch(e[0]){case 1:return jh(e);case 2:return Gh(e)}return vr.throwError(`unsupported transaction type: ${e[0]}`,R.errors.UNSUPPORTED_OPERATION,{operation:"parseTransaction",transactionType:e[0]})}const Kh="contracts/5.7.0";var an=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(y){try{g(n.next(y))}catch(A){o(A)}}function l(y){try{g(n.throw(y))}catch(A){o(A)}}function g(y){y.done?s(y.value):i(y.value).then(a,l)}g((n=n.apply(t,e||[])).next())})};const st=new R(Kh);function Bi(t,e){return an(this,void 0,void 0,function*(){const r=yield e;typeof r!="string"&&st.throwArgumentError("invalid address or ENS name","name",r);try{return Xe(r)}catch{}t||st.throwError("a provider or signer is needed to resolve ENS names",R.errors.UNSUPPORTED_OPERATION,{operation:"resolveName"});const n=yield t.resolveName(r);return n==null&&st.throwArgumentError("resolver or addr is not configured for ENS name","name",r),n})}function xi(t,e,r){return an(this,void 0,void 0,function*(){return Array.isArray(r)?yield Promise.all(r.map((n,i)=>xi(t,Array.isArray(e)?e[i]:e[n.name],n))):r.type==="address"?yield Bi(t,e):r.type==="tuple"?yield xi(t,e,r.components):r.baseType==="array"?Array.isArray(e)?yield Promise.all(e.map(n=>xi(t,n,r.arrayChildren))):Promise.reject(st.makeError("invalid value for array",R.errors.INVALID_ARGUMENT,{argument:"value",value:e})):e})}function Zi(t,e,r){return an(this,void 0,void 0,function*(){let n={};r.length===e.inputs.length+1&&typeof r[r.length-1]=="object"&&(n=Tt(r.pop())),st.checkArgumentCount(r.length,e.inputs.length,"passed to contract"),t.signer?n.from?n.from=ot({override:Bi(t.signer,n.from),signer:t.signer.getAddress()}).then(g=>an(this,void 0,void 0,function*(){return Xe(g.signer)!==g.override&&st.throwError("Contract with a Signer cannot override from",R.errors.UNSUPPORTED_OPERATION,{operation:"overrides.from"}),g.override})):n.from=t.signer.getAddress():n.from&&(n.from=Bi(t.provider,n.from));const i=yield ot({args:xi(t.signer||t.provider,r,e.inputs),address:t.resolvedAddress,overrides:ot(n)||{}}),s=t.interface.encodeFunctionData(e,i.args),o={data:s,to:i.address},a=i.overrides;if(a.nonce!=null&&(o.nonce=O.from(a.nonce).toNumber()),a.gasLimit!=null&&(o.gasLimit=O.from(a.gasLimit)),a.gasPrice!=null&&(o.gasPrice=O.from(a.gasPrice)),a.maxFeePerGas!=null&&(o.maxFeePerGas=O.from(a.maxFeePerGas)),a.maxPriorityFeePerGas!=null&&(o.maxPriorityFeePerGas=O.from(a.maxPriorityFeePerGas)),a.from!=null&&(o.from=a.from),a.type!=null&&(o.type=a.type),a.accessList!=null&&(o.accessList=si(a.accessList)),o.gasLimit==null&&e.gas!=null){let g=21e3;const y=q(s);for(let A=0;A<y.length;A++)g+=4,y[A]&&(g+=64);o.gasLimit=O.from(e.gas).add(g)}if(a.value){const g=O.from(a.value);!g.isZero()&&!e.payable&&st.throwError("non-payable method cannot override value",R.errors.UNSUPPORTED_OPERATION,{operation:"overrides.value",value:n.value}),o.value=g}a.customData&&(o.customData=Tt(a.customData)),a.ccipReadEnabled&&(o.ccipReadEnabled=!!a.ccipReadEnabled),delete n.nonce,delete n.gasLimit,delete n.gasPrice,delete n.from,delete n.value,delete n.type,delete n.accessList,delete n.maxFeePerGas,delete n.maxPriorityFeePerGas,delete n.customData,delete n.ccipReadEnabled;const l=Object.keys(n).filter(g=>n[g]!=null);return l.length&&st.throwError(`cannot override ${l.map(g=>JSON.stringify(g)).join(",")}`,R.errors.UNSUPPORTED_OPERATION,{operation:"overrides",overrides:l}),o})}function $h(t,e){return function(...r){return Zi(t,e,r)}}function Jh(t,e){const r=t.signer||t.provider;return function(...n){return an(this,void 0,void 0,function*(){r||st.throwError("estimate require a provider or signer",R.errors.UNSUPPORTED_OPERATION,{operation:"estimateGas"});const i=yield Zi(t,e,n);return yield r.estimateGas(i)})}}function Yh(t,e){const r=e.wait.bind(e);e.wait=n=>r(n).then(i=>(i.events=i.logs.map(s=>{let o=xn(s),a=null;try{a=t.interface.parseLog(s)}catch{}return a&&(o.args=a.args,o.decode=(l,g)=>t.interface.decodeEventLog(a.eventFragment,l,g),o.event=a.name,o.eventSignature=a.signature),o.removeListener=()=>t.provider,o.getBlock=()=>t.provider.getBlock(i.blockHash),o.getTransaction=()=>t.provider.getTransaction(i.transactionHash),o.getTransactionReceipt=()=>Promise.resolve(i),o}),i))}function Xf(t,e,r){const n=t.signer||t.provider;return function(...i){return an(this,void 0,void 0,function*(){let s;if(i.length===e.inputs.length+1&&typeof i[i.length-1]=="object"){const l=Tt(i.pop());l.blockTag!=null&&(s=yield l.blockTag),delete l.blockTag,i.push(l)}t.deployTransaction!=null&&(yield t._deployed(s));const o=yield Zi(t,e,i),a=yield n.call(o,s);try{let l=t.interface.decodeFunctionResult(e,a);return r&&e.outputs.length===1&&(l=l[0]),l}catch(l){throw l.code===R.errors.CALL_EXCEPTION&&(l.address=t.address,l.args=i,l.transaction=o),l}})}}function Qh(t,e){return function(...r){return an(this,void 0,void 0,function*(){t.signer||st.throwError("sending a transaction requires a signer",R.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction"}),t.deployTransaction!=null&&(yield t._deployed());const n=yield Zi(t,e,r),i=yield t.signer.sendTransaction(n);return Yh(t,i),i})}}function Ea(t,e,r){return e.constant?Xf(t,e,r):Qh(t,e)}function Zf(t){return t.address&&(t.topics==null||t.topics.length===0)?"*":(t.address||"*")+"@"+(t.topics?t.topics.map(e=>Array.isArray(e)?e.join("|"):e).join(":"):"")}class Zn{constructor(e,r){G(this,"tag",e),G(this,"filter",r),this._listeners=[]}addListener(e,r){this._listeners.push({listener:e,once:r})}removeListener(e){let r=!1;this._listeners=this._listeners.filter(n=>r||n.listener!==e?!0:(r=!0,!1))}removeAllListeners(){this._listeners=[]}listeners(){return this._listeners.map(e=>e.listener)}listenerCount(){return this._listeners.length}run(e){const r=this.listenerCount();return this._listeners=this._listeners.filter(n=>{const i=e.slice();return setTimeout(()=>{n.listener.apply(this,i)},0),!n.once}),r}prepareEvent(e){}getEmit(e){return[e]}}class Xh extends Zn{constructor(){super("error",null)}}class xa extends Zn{constructor(e,r,n,i){const s={address:e};let o=r.getEventTopic(n);i?(o!==i[0]&&st.throwArgumentError("topic mismatch","topics",i),s.topics=i.slice()):s.topics=[o],super(Zf(s),s),G(this,"address",e),G(this,"interface",r),G(this,"fragment",n)}prepareEvent(e){super.prepareEvent(e),e.event=this.fragment.name,e.eventSignature=this.fragment.format(),e.decode=(r,n)=>this.interface.decodeEventLog(this.fragment,r,n);try{e.args=this.interface.decodeEventLog(this.fragment,e.data,e.topics)}catch(r){e.args=null,e.decodeError=r}}getEmit(e){const r=Bl(e.args);if(r.length)throw r[0].error;const n=(e.args||[]).slice();return n.push(e),n}}class _a extends Zn{constructor(e,r){super("*",{address:e}),G(this,"address",e),G(this,"interface",r)}prepareEvent(e){super.prepareEvent(e);try{const r=this.interface.parseLog(e);e.event=r.name,e.eventSignature=r.signature,e.decode=(n,i)=>this.interface.decodeEventLog(r.eventFragment,n,i),e.args=r.args}catch{}}}class Zh{constructor(e,r,n){G(this,"interface",dn(new.target,"getInterface")(r)),n==null?(G(this,"provider",null),G(this,"signer",null)):Sf.isSigner(n)?(G(this,"provider",n.provider||null),G(this,"signer",n)):Ji.isProvider(n)?(G(this,"provider",n),G(this,"signer",null)):st.throwArgumentError("invalid signer or provider","signerOrProvider",n),G(this,"callStatic",{}),G(this,"estimateGas",{}),G(this,"functions",{}),G(this,"populateTransaction",{}),G(this,"filters",{});{const o={};Object.keys(this.interface.events).forEach(a=>{const l=this.interface.events[a];G(this.filters,a,(...g)=>({address:this.address,topics:this.interface.encodeFilterTopics(l,g)})),o[l.name]||(o[l.name]=[]),o[l.name].push(a)}),Object.keys(o).forEach(a=>{const l=o[a];l.length===1?G(this.filters,a,this.filters[l[0]]):st.warn(`Duplicate definition of ${a} (${l.join(", ")})`)})}if(G(this,"_runningEvents",{}),G(this,"_wrappedEmits",{}),e==null&&st.throwArgumentError("invalid contract address or ENS name","addressOrName",e),G(this,"address",e),this.provider)G(this,"resolvedAddress",Bi(this.provider,e));else try{G(this,"resolvedAddress",Promise.resolve(Xe(e)))}catch{st.throwError("provider is required to use ENS name as contract address",R.errors.UNSUPPORTED_OPERATION,{operation:"new Contract"})}this.resolvedAddress.catch(o=>{});const i={},s={};Object.keys(this.interface.functions).forEach(o=>{const a=this.interface.functions[o];if(s[o]){st.warn(`Duplicate ABI entry for ${JSON.stringify(o)}`);return}s[o]=!0;{const l=a.name;i[`%${l}`]||(i[`%${l}`]=[]),i[`%${l}`].push(o)}this[o]==null&&G(this,o,Ea(this,a,!0)),this.functions[o]==null&&G(this.functions,o,Ea(this,a,!1)),this.callStatic[o]==null&&G(this.callStatic,o,Xf(this,a,!0)),this.populateTransaction[o]==null&&G(this.populateTransaction,o,$h(this,a)),this.estimateGas[o]==null&&G(this.estimateGas,o,Jh(this,a))}),Object.keys(i).forEach(o=>{const a=i[o];if(a.length>1)return;o=o.substring(1);const l=a[0];try{this[o]==null&&G(this,o,this[l])}catch{}this.functions[o]==null&&G(this.functions,o,this.functions[l]),this.callStatic[o]==null&&G(this.callStatic,o,this.callStatic[l]),this.populateTransaction[o]==null&&G(this.populateTransaction,o,this.populateTransaction[l]),this.estimateGas[o]==null&&G(this.estimateGas,o,this.estimateGas[l])})}static getContractAddress(e){return rf(e)}static getInterface(e){return $t.isInterface(e)?e:new $t(e)}deployed(){return this._deployed()}_deployed(e){return this._deployedPromise||(this.deployTransaction?this._deployedPromise=this.deployTransaction.wait().then(()=>this):this._deployedPromise=this.provider.getCode(this.address,e).then(r=>(r==="0x"&&st.throwError("contract not deployed",R.errors.UNSUPPORTED_OPERATION,{contractAddress:this.address,operation:"getDeployed"}),this))),this._deployedPromise}fallback(e){this.signer||st.throwError("sending a transactions require a signer",R.errors.UNSUPPORTED_OPERATION,{operation:"sendTransaction(fallback)"});const r=Tt(e||{});return["from","to"].forEach(function(n){r[n]!=null&&st.throwError("cannot override "+n,R.errors.UNSUPPORTED_OPERATION,{operation:n})}),r.to=this.resolvedAddress,this.deployed().then(()=>this.signer.sendTransaction(r))}connect(e){typeof e=="string"&&(e=new Ao(e,this.provider));const r=new this.constructor(this.address,this.interface,e);return this.deployTransaction&&G(r,"deployTransaction",this.deployTransaction),r}attach(e){return new this.constructor(e,this.interface,this.signer||this.provider)}static isIndexed(e){return Vs.isIndexed(e)}_normalizeRunningEvent(e){return this._runningEvents[e.tag]?this._runningEvents[e.tag]:e}_getRunningEvent(e){if(typeof e=="string"){if(e==="error")return this._normalizeRunningEvent(new Xh);if(e==="event")return this._normalizeRunningEvent(new Zn("event",null));if(e==="*")return this._normalizeRunningEvent(new _a(this.address,this.interface));const r=this.interface.getEvent(e);return this._normalizeRunningEvent(new xa(this.address,this.interface,r))}if(e.topics&&e.topics.length>0){try{const n=e.topics[0];if(typeof n!="string")throw new Error("invalid topic");const i=this.interface.getEvent(n);return this._normalizeRunningEvent(new xa(this.address,this.interface,i,e.topics))}catch{}const r={address:this.address,topics:e.topics};return this._normalizeRunningEvent(new Zn(Zf(r),r))}return this._normalizeRunningEvent(new _a(this.address,this.interface))}_checkRunningEvents(e){if(e.listenerCount()===0){delete this._runningEvents[e.tag];const r=this._wrappedEmits[e.tag];r&&e.filter&&(this.provider.off(e.filter,r),delete this._wrappedEmits[e.tag])}}_wrapEvent(e,r,n){const i=xn(r);return i.removeListener=()=>{n&&(e.removeListener(n),this._checkRunningEvents(e))},i.getBlock=()=>this.provider.getBlock(r.blockHash),i.getTransaction=()=>this.provider.getTransaction(r.transactionHash),i.getTransactionReceipt=()=>this.provider.getTransactionReceipt(r.transactionHash),e.prepareEvent(i),i}_addEventListener(e,r,n){if(this.provider||st.throwError("events require a provider or a signer with a provider",R.errors.UNSUPPORTED_OPERATION,{operation:"once"}),e.addListener(r,n),this._runningEvents[e.tag]=e,!this._wrappedEmits[e.tag]){const i=s=>{let o=this._wrapEvent(e,s,r);if(o.decodeError==null)try{const a=e.getEmit(o);this.emit(e.filter,...a)}catch(a){o.decodeError=a.error}e.filter!=null&&this.emit("event",o),o.decodeError!=null&&this.emit("error",o.decodeError,o)};this._wrappedEmits[e.tag]=i,e.filter!=null&&this.provider.on(e.filter,i)}}queryFilter(e,r,n){const i=this._getRunningEvent(e),s=Tt(i.filter);return typeof r=="string"&&pe(r,32)?(n!=null&&st.throwArgumentError("cannot specify toBlock with blockhash","toBlock",n),s.blockHash=r):(s.fromBlock=r??0,s.toBlock=n??"latest"),this.provider.getLogs(s).then(o=>o.map(a=>this._wrapEvent(i,a,null)))}on(e,r){return this._addEventListener(this._getRunningEvent(e),r,!1),this}once(e,r){return this._addEventListener(this._getRunningEvent(e),r,!0),this}emit(e,...r){if(!this.provider)return!1;const n=this._getRunningEvent(e),i=n.run(r)>0;return this._checkRunningEvents(n),i}listenerCount(e){return this.provider?e==null?Object.keys(this._runningEvents).reduce((r,n)=>r+this._runningEvents[n].listenerCount(),0):this._getRunningEvent(e).listenerCount():0}listeners(e){if(!this.provider)return[];if(e==null){const r=[];for(let n in this._runningEvents)this._runningEvents[n].listeners().forEach(i=>{r.push(i)});return r}return this._getRunningEvent(e).listeners()}removeAllListeners(e){if(!this.provider)return this;if(e==null){for(const n in this._runningEvents){const i=this._runningEvents[n];i.removeAllListeners(),this._checkRunningEvents(i)}return this}const r=this._getRunningEvent(e);return r.removeAllListeners(),this._checkRunningEvents(r),this}off(e,r){if(!this.provider)return this;const n=this._getRunningEvent(e);return n.removeListener(r),this._checkRunningEvents(n),this}removeListener(e,r){return this.off(e,r)}}class Io extends Zh{}class eu{constructor(e){G(this,"alphabet",e),G(this,"base",e.length),G(this,"_alphabetMap",{}),G(this,"_leader",e.charAt(0));for(let r=0;r<e.length;r++)this._alphabetMap[e.charAt(r)]=r}encode(e){let r=q(e);if(r.length===0)return"";let n=[0];for(let s=0;s<r.length;++s){let o=r[s];for(let a=0;a<n.length;++a)o+=n[a]<<8,n[a]=o%this.base,o=o/this.base|0;for(;o>0;)n.push(o%this.base),o=o/this.base|0}let i="";for(let s=0;r[s]===0&&s<r.length-1;++s)i+=this._leader;for(let s=n.length-1;s>=0;--s)i+=this.alphabet[n[s]];return i}decode(e){if(typeof e!="string")throw new TypeError("Expected String");let r=[];if(e.length===0)return new Uint8Array(r);r.push(0);for(let n=0;n<e.length;n++){let i=this._alphabetMap[e[n]];if(i===void 0)throw new Error("Non-base"+this.base+" character");let s=i;for(let o=0;o<r.length;++o)s+=r[o]*this.base,r[o]=s&255,s>>=8;for(;s>0;)r.push(s&255),s>>=8}for(let n=0;e[n]===this._leader&&n<e.length-1;++n)r.push(0);return q(new Uint8Array(r.reverse()))}}new eu("abcdefghijklmnopqrstuvwxyz234567");const Xs=new eu("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz");function Sa(t){return"0x"+Qt.sha256().update(q(t)).digest("hex")}const ed="networks/5.7.1",Ia=new R(ed);function td(t){return t&&typeof t.renetwork=="function"}function lr(t){const e=function(r,n){n==null&&(n={});const i=[];if(r.InfuraProvider&&n.infura!=="-")try{i.push(new r.InfuraProvider(t,n.infura))}catch{}if(r.EtherscanProvider&&n.etherscan!=="-")try{i.push(new r.EtherscanProvider(t,n.etherscan))}catch{}if(r.AlchemyProvider&&n.alchemy!=="-")try{i.push(new r.AlchemyProvider(t,n.alchemy))}catch{}if(r.PocketProvider&&n.pocket!=="-"){const s=["goerli","ropsten","rinkeby","sepolia"];try{const o=new r.PocketProvider(t,n.pocket);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}}if(r.CloudflareProvider&&n.cloudflare!=="-")try{i.push(new r.CloudflareProvider(t))}catch{}if(r.AnkrProvider&&n.ankr!=="-")try{const s=["ropsten"],o=new r.AnkrProvider(t,n.ankr);o.network&&s.indexOf(o.network.name)===-1&&i.push(o)}catch{}if(i.length===0)return null;if(r.FallbackProvider){let s=1;return n.quorum!=null?s=n.quorum:t==="homestead"&&(s=2),new r.FallbackProvider(i,s)}return i[0]};return e.renetwork=function(r){return lr(r)},e}function Li(t,e){const r=function(n,i){return n.JsonRpcProvider?new n.JsonRpcProvider(t,e):null};return r.renetwork=function(n){return Li(t,n)},r}const Ma={chainId:1,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"homestead",_defaultProvider:lr("homestead")},Na={chainId:3,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"ropsten",_defaultProvider:lr("ropsten")},ka={chainId:63,name:"classicMordor",_defaultProvider:Li("https://www.ethercluster.com/mordor","classicMordor")},gi={unspecified:{chainId:0,name:"unspecified"},homestead:Ma,mainnet:Ma,morden:{chainId:2,name:"morden"},ropsten:Na,testnet:Na,rinkeby:{chainId:4,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"rinkeby",_defaultProvider:lr("rinkeby")},kovan:{chainId:42,name:"kovan",_defaultProvider:lr("kovan")},goerli:{chainId:5,ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",name:"goerli",_defaultProvider:lr("goerli")},kintsugi:{chainId:1337702,name:"kintsugi"},sepolia:{chainId:11155111,name:"sepolia",_defaultProvider:lr("sepolia")},classic:{chainId:61,name:"classic",_defaultProvider:Li("https://www.ethercluster.com/etc","classic")},classicMorden:{chainId:62,name:"classicMorden"},classicMordor:ka,classicTestnet:ka,classicKotti:{chainId:6,name:"classicKotti",_defaultProvider:Li("https://www.ethercluster.com/kotti","classicKotti")},xdai:{chainId:100,name:"xdai"},matic:{chainId:137,name:"matic",_defaultProvider:lr("matic")},maticmum:{chainId:80001,name:"maticmum"},optimism:{chainId:10,name:"optimism",_defaultProvider:lr("optimism")},"optimism-kovan":{chainId:69,name:"optimism-kovan"},"optimism-goerli":{chainId:420,name:"optimism-goerli"},arbitrum:{chainId:42161,name:"arbitrum"},"arbitrum-rinkeby":{chainId:421611,name:"arbitrum-rinkeby"},"arbitrum-goerli":{chainId:421613,name:"arbitrum-goerli"},bnb:{chainId:56,name:"bnb"},bnbt:{chainId:97,name:"bnbt"}};function rd(t){if(t==null)return null;if(typeof t=="number"){for(const n in gi){const i=gi[n];if(i.chainId===t)return{name:i.name,chainId:i.chainId,ensAddress:i.ensAddress||null,_defaultProvider:i._defaultProvider||null}}return{chainId:t,name:"unknown"}}if(typeof t=="string"){const n=gi[t];return n==null?null:{name:n.name,chainId:n.chainId,ensAddress:n.ensAddress,_defaultProvider:n._defaultProvider||null}}const e=gi[t.name];if(!e)return typeof t.chainId!="number"&&Ia.throwArgumentError("invalid network chainId","network",t),t;t.chainId!==0&&t.chainId!==e.chainId&&Ia.throwArgumentError("network chainId mismatch","network",t);let r=t._defaultProvider||null;return r==null&&e._defaultProvider&&(td(e._defaultProvider)?r=e._defaultProvider.renetwork(t):r=e._defaultProvider),{name:t.name,chainId:e.chainId,ensAddress:t.ensAddress||e.ensAddress||null,_defaultProvider:r}}const nd="web/5.7.1";var id=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(y){try{g(n.next(y))}catch(A){o(A)}}function l(y){try{g(n.throw(y))}catch(A){o(A)}}function g(y){y.done?s(y.value):i(y.value).then(a,l)}g((n=n.apply(t,e||[])).next())})};function sd(t,e){return id(this,void 0,void 0,function*(){e==null&&(e={});const r={method:e.method||"GET",headers:e.headers||{},body:e.body||void 0};if(e.skipFetchSetup!==!0&&(r.mode="cors",r.cache="no-cache",r.credentials="same-origin",r.redirect="follow",r.referrer="client"),e.fetchOptions!=null){const o=e.fetchOptions;o.mode&&(r.mode=o.mode),o.cache&&(r.cache=o.cache),o.credentials&&(r.credentials=o.credentials),o.redirect&&(r.redirect=o.redirect),o.referrer&&(r.referrer=o.referrer)}const n=yield fetch(t,r),i=yield n.arrayBuffer(),s={};return n.headers.forEach?n.headers.forEach((o,a)=>{s[a.toLowerCase()]=o}):n.headers.keys().forEach(o=>{s[o.toLowerCase()]=n.headers.get(o)}),{headers:s,statusCode:n.status,statusMessage:n.statusText,body:q(new Uint8Array(i))}})}var od=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(y){try{g(n.next(y))}catch(A){o(A)}}function l(y){try{g(n.throw(y))}catch(A){o(A)}}function g(y){y.done?s(y.value):i(y.value).then(a,l)}g((n=n.apply(t,e||[])).next())})};const jt=new R(nd);function Ta(t){return new Promise(e=>{setTimeout(e,t)})}function Mr(t,e){if(t==null)return null;if(typeof t=="string")return t;if(Or(t)){if(e&&(e.split("/")[0]==="text"||e.split(";")[0].trim()==="application/json"))try{return Mn(t)}catch{}return F(t)}return t}function ad(t){return mt(t.replace(/%([0-9a-f][0-9a-f])/gi,(e,r)=>String.fromCharCode(parseInt(r,16))))}function fd(t,e,r){const n=typeof t=="object"&&t.throttleLimit!=null?t.throttleLimit:12;jt.assertArgument(n>0&&n%1===0,"invalid connection throttle limit","connection.throttleLimit",n);const i=typeof t=="object"?t.throttleCallback:null,s=typeof t=="object"&&typeof t.throttleSlotInterval=="number"?t.throttleSlotInterval:100;jt.assertArgument(s>0&&s%1===0,"invalid connection throttle slot interval","connection.throttleSlotInterval",s);const o=typeof t=="object"?!!t.errorPassThrough:!1,a={};let l=null;const g={method:"GET"};let y=!1,A=2*60*1e3;if(typeof t=="string")l=t;else if(typeof t=="object"){if((t==null||t.url==null)&&jt.throwArgumentError("missing URL","connection.url",t),l=t.url,typeof t.timeout=="number"&&t.timeout>0&&(A=t.timeout),t.headers)for(const B in t.headers)a[B.toLowerCase()]={key:B,value:String(t.headers[B])},["if-none-match","if-modified-since"].indexOf(B.toLowerCase())>=0&&(y=!0);if(g.allowGzip=!!t.allowGzip,t.user!=null&&t.password!=null){l.substring(0,6)!=="https:"&&t.allowInsecureAuthentication!==!0&&jt.throwError("basic authentication requires a secure https url",R.errors.INVALID_ARGUMENT,{argument:"url",url:l,user:t.user,password:"[REDACTED]"});const B=t.user+":"+t.password;a.authorization={key:"Authorization",value:"Basic "+pf(mt(B))}}t.skipFetchSetup!=null&&(g.skipFetchSetup=!!t.skipFetchSetup),t.fetchOptions!=null&&(g.fetchOptions=Tt(t.fetchOptions))}const I=new RegExp("^data:([^;:]*)?(;base64)?,(.*)$","i"),M=l?l.match(I):null;if(M)try{const B={statusCode:200,statusMessage:"OK",headers:{"content-type":M[1]||"text/plain"},body:M[2]?gf(M[3]):ad(M[3])};let W=B.body;return r&&(W=r(B.body,B)),Promise.resolve(W)}catch(B){jt.throwError("processing response error",R.errors.SERVER_ERROR,{body:Mr(M[1],M[2]),error:B,requestBody:null,requestMethod:"GET",url:l})}e&&(g.method="POST",g.body=e,a["content-type"]==null&&(a["content-type"]={key:"Content-Type",value:"application/octet-stream"}),a["content-length"]==null&&(a["content-length"]={key:"Content-Length",value:String(e.length)}));const k={};Object.keys(a).forEach(B=>{const W=a[B];k[W.key]=W.value}),g.headers=k;const P=function(){let B=null;return{promise:new Promise(function(J,K){A&&(B=setTimeout(()=>{B!=null&&(B=null,K(jt.makeError("timeout",R.errors.TIMEOUT,{requestBody:Mr(g.body,k["content-type"]),requestMethod:g.method,timeout:A,url:l})))},A))}),cancel:function(){B!=null&&(clearTimeout(B),B=null)}}}(),j=function(){return od(this,void 0,void 0,function*(){for(let B=0;B<n;B++){let W=null;try{if(W=yield sd(l,g),B<n){if(W.statusCode===301||W.statusCode===302){const J=W.headers.location||"";if(g.method==="GET"&&J.match(/^https:/)){l=W.headers.location;continue}}else if(W.statusCode===429){let J=!0;if(i&&(J=yield i(B,l)),J){let K=0;const Y=W.headers["retry-after"];typeof Y=="string"&&Y.match(/^[1-9][0-9]*$/)?K=parseInt(Y)*1e3:K=s*parseInt(String(Math.random()*Math.pow(2,B))),yield Ta(K);continue}}}}catch(J){W=J.response,W==null&&(P.cancel(),jt.throwError("missing response",R.errors.SERVER_ERROR,{requestBody:Mr(g.body,k["content-type"]),requestMethod:g.method,serverError:J,url:l}))}let H=W.body;if(y&&W.statusCode===304?H=null:!o&&(W.statusCode<200||W.statusCode>=300)&&(P.cancel(),jt.throwError("bad response",R.errors.SERVER_ERROR,{status:W.statusCode,headers:W.headers,body:Mr(H,W.headers?W.headers["content-type"]:null),requestBody:Mr(g.body,k["content-type"]),requestMethod:g.method,url:l})),r)try{const J=yield r(H,W);return P.cancel(),J}catch(J){if(J.throttleRetry&&B<n){let K=!0;if(i&&(K=yield i(B,l)),K){const Y=s*parseInt(String(Math.random()*Math.pow(2,B)));yield Ta(Y);continue}}P.cancel(),jt.throwError("processing response error",R.errors.SERVER_ERROR,{body:Mr(H,W.headers?W.headers["content-type"]:null),error:J,requestBody:Mr(g.body,k["content-type"]),requestMethod:g.method,url:l})}return P.cancel(),H}return jt.throwError("failed response",R.errors.SERVER_ERROR,{requestBody:Mr(g.body,k["content-type"]),requestMethod:g.method,url:l})})}();return Promise.race([P.promise,j])}function tu(t,e,r){let n=(s,o)=>{let a=null;if(s!=null)try{a=JSON.parse(Mn(s))}catch(l){jt.throwError("invalid JSON",R.errors.SERVER_ERROR,{body:s,error:l})}return r&&(a=r(a,o)),a},i=null;if(e!=null){i=mt(e);const s=typeof t=="string"?{url:t}:Tt(t);s.headers?Object.keys(s.headers).filter(a=>a.toLowerCase()==="content-type").length!==0||(s.headers=Tt(s.headers),s.headers["content-type"]="application/json"):s.headers={"content-type":"application/json"},t=s}return fd(t,i,n)}function Dn(t,e){return e||(e={}),e=Tt(e),e.floor==null&&(e.floor=0),e.ceiling==null&&(e.ceiling=1e4),e.interval==null&&(e.interval=250),new Promise(function(r,n){let i=null,s=!1;const o=()=>s?!1:(s=!0,i&&clearTimeout(i),!0);e.timeout&&(i=setTimeout(()=>{o()&&n(new Error("timeout"))},e.timeout));const a=e.retryLimit;let l=0;function g(){return t().then(function(y){if(y!==void 0)o()&&r(y);else if(e.oncePoll)e.oncePoll.once("poll",g);else if(e.onceBlock)e.onceBlock.once("block",g);else if(!s){if(l++,l>a){o()&&n(new Error("retry limit reached"));return}let A=e.interval*parseInt(String(Math.random()*Math.pow(2,l)));A<e.floor&&(A=e.floor),A>e.ceiling&&(A=e.ceiling),setTimeout(g,A)}return null},function(y){o()&&n(y)})}g()})}var Di="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Zs={};for(var pi=0;pi<Di.length;pi++){var Rs=Di.charAt(pi);if(Zs[Rs]!==void 0)throw new TypeError(Rs+" is ambiguous");Zs[Rs]=pi}function bn(t){var e=t>>25;return(t&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function ru(t){for(var e=1,r=0;r<t.length;++r){var n=t.charCodeAt(r);if(n<33||n>126)return"Invalid prefix ("+t+")";e=bn(e)^n>>5}for(e=bn(e),r=0;r<t.length;++r){var i=t.charCodeAt(r);e=bn(e)^i&31}return e}function ud(t,e,r){if(r=r||90,t.length+7+e.length>r)throw new TypeError("Exceeds length limit");t=t.toLowerCase();var n=ru(t);if(typeof n=="string")throw new Error(n);for(var i=t+"1",s=0;s<e.length;++s){var o=e[s];if(o>>5)throw new Error("Non 5-bit word");n=bn(n)^o,i+=Di.charAt(o)}for(s=0;s<6;++s)n=bn(n);for(n^=1,s=0;s<6;++s){var a=n>>(5-s)*5&31;i+=Di.charAt(a)}return i}function nu(t,e){if(e=e||90,t.length<8)return t+" too short";if(t.length>e)return"Exceeds length limit";var r=t.toLowerCase(),n=t.toUpperCase();if(t!==r&&t!==n)return"Mixed-case string "+t;t=r;var i=t.lastIndexOf("1");if(i===-1)return"No separator character for "+t;if(i===0)return"Missing prefix for "+t;var s=t.slice(0,i),o=t.slice(i+1);if(o.length<6)return"Data too short";var a=ru(s);if(typeof a=="string")return a;for(var l=[],g=0;g<o.length;++g){var y=o.charAt(g),A=Zs[y];if(A===void 0)return"Unknown character "+y;a=bn(a)^A,!(g+6>=o.length)&&l.push(A)}return a!==1?"Invalid checksum for "+t:{prefix:s,words:l}}function ld(){var t=nu.apply(null,arguments);if(typeof t=="object")return t}function cd(t){var e=nu.apply(null,arguments);if(typeof e=="object")return e;throw new Error(e)}function es(t,e,r,n){for(var i=0,s=0,o=(1<<r)-1,a=[],l=0;l<t.length;++l)for(i=i<<e|t[l],s+=e;s>=r;)s-=r,a.push(i>>s&o);if(n)s>0&&a.push(i<<r-s&o);else{if(s>=e)return"Excess padding";if(i<<r-s&o)return"Non-zero padding"}return a}function hd(t){var e=es(t,8,5,!0);if(Array.isArray(e))return e}function dd(t){var e=es(t,8,5,!0);if(Array.isArray(e))return e;throw new Error(e)}function gd(t){var e=es(t,5,8,!1);if(Array.isArray(e))return e}function pd(t){var e=es(t,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}var md={decodeUnsafe:ld,decode:cd,encode:ud,toWordsUnsafe:hd,toWords:dd,fromWordsUnsafe:gd,fromWords:pd};const Ca=ji(md),iu="providers/5.7.2",Bn=new R(iu);class ${constructor(){this.formats=this.getDefaultFormats()}getDefaultFormats(){const e={},r=this.address.bind(this),n=this.bigNumber.bind(this),i=this.blockTag.bind(this),s=this.data.bind(this),o=this.hash.bind(this),a=this.hex.bind(this),l=this.number.bind(this),g=this.type.bind(this),y=A=>this.data(A,!0);return e.transaction={hash:o,type:g,accessList:$.allowNull(this.accessList.bind(this),null),blockHash:$.allowNull(o,null),blockNumber:$.allowNull(l,null),transactionIndex:$.allowNull(l,null),confirmations:$.allowNull(l,null),from:r,gasPrice:$.allowNull(n),maxPriorityFeePerGas:$.allowNull(n),maxFeePerGas:$.allowNull(n),gasLimit:n,to:$.allowNull(r,null),value:n,nonce:l,data:s,r:$.allowNull(this.uint256),s:$.allowNull(this.uint256),v:$.allowNull(l),creates:$.allowNull(r,null),raw:$.allowNull(s)},e.transactionRequest={from:$.allowNull(r),nonce:$.allowNull(l),gasLimit:$.allowNull(n),gasPrice:$.allowNull(n),maxPriorityFeePerGas:$.allowNull(n),maxFeePerGas:$.allowNull(n),to:$.allowNull(r),value:$.allowNull(n),data:$.allowNull(y),type:$.allowNull(l),accessList:$.allowNull(this.accessList.bind(this),null)},e.receiptLog={transactionIndex:l,blockNumber:l,transactionHash:o,address:r,topics:$.arrayOf(o),data:s,logIndex:l,blockHash:o},e.receipt={to:$.allowNull(this.address,null),from:$.allowNull(this.address,null),contractAddress:$.allowNull(r,null),transactionIndex:l,root:$.allowNull(a),gasUsed:n,logsBloom:$.allowNull(s),blockHash:o,transactionHash:o,logs:$.arrayOf(this.receiptLog.bind(this)),blockNumber:l,confirmations:$.allowNull(l,null),cumulativeGasUsed:n,effectiveGasPrice:$.allowNull(n),status:$.allowNull(l),type:g},e.block={hash:$.allowNull(o),parentHash:o,number:l,timestamp:l,nonce:$.allowNull(a),difficulty:this.difficulty.bind(this),gasLimit:n,gasUsed:n,miner:$.allowNull(r),extraData:s,transactions:$.allowNull($.arrayOf(o)),baseFeePerGas:$.allowNull(n)},e.blockWithTransactions=Tt(e.block),e.blockWithTransactions.transactions=$.allowNull($.arrayOf(this.transactionResponse.bind(this))),e.filter={fromBlock:$.allowNull(i,void 0),toBlock:$.allowNull(i,void 0),blockHash:$.allowNull(o,void 0),address:$.allowNull(r,void 0),topics:$.allowNull(this.topics.bind(this),void 0)},e.filterLog={blockNumber:$.allowNull(l),blockHash:$.allowNull(o),transactionIndex:l,removed:$.allowNull(this.boolean.bind(this)),address:r,data:$.allowFalsish(s,"0x"),topics:$.arrayOf(o),transactionHash:o,logIndex:l},e}accessList(e){return si(e||[])}number(e){return e==="0x"?0:O.from(e).toNumber()}type(e){return e==="0x"||e==null?0:O.from(e).toNumber()}bigNumber(e){return O.from(e)}boolean(e){if(typeof e=="boolean")return e;if(typeof e=="string"){if(e=e.toLowerCase(),e==="true")return!0;if(e==="false")return!1}throw new Error("invalid boolean - "+e)}hex(e,r){return typeof e=="string"&&(!r&&e.substring(0,2)!=="0x"&&(e="0x"+e),pe(e))?e.toLowerCase():Bn.throwArgumentError("invalid hash","value",e)}data(e,r){const n=this.hex(e,r);if(n.length%2!==0)throw new Error("invalid data; odd-length - "+e);return n}address(e){return Xe(e)}callAddress(e){if(!pe(e,32))return null;const r=Xe(gt(e,12));return r===wo?null:r}contractAddress(e){return rf(e)}blockTag(e){if(e==null)return"latest";if(e==="earliest")return"0x0";switch(e){case"earliest":return"0x0";case"latest":case"pending":case"safe":case"finalized":return e}if(typeof e=="number"||pe(e))return mo(e);throw new Error("invalid blockTag")}hash(e,r){const n=this.hex(e,r);return nn(n)!==32?Bn.throwArgumentError("invalid hash","value",e):n}difficulty(e){if(e==null)return null;const r=O.from(e);try{return r.toNumber()}catch{}return null}uint256(e){if(!pe(e))throw new Error("invalid uint256");return it(e,32)}_block(e,r){e.author!=null&&e.miner==null&&(e.miner=e.author);const n=e._difficulty!=null?e._difficulty:e.difficulty,i=$.check(r,e);return i._difficulty=n==null?null:O.from(n),i}block(e){return this._block(e,this.formats.block)}blockWithTransactions(e){return this._block(e,this.formats.blockWithTransactions)}transactionRequest(e){return $.check(this.formats.transactionRequest,e)}transactionResponse(e){e.gas!=null&&e.gasLimit==null&&(e.gasLimit=e.gas),e.to&&O.from(e.to).isZero()&&(e.to="0x0000000000000000000000000000000000000000"),e.input!=null&&e.data==null&&(e.data=e.input),e.to==null&&e.creates==null&&(e.creates=this.contractAddress(e)),(e.type===1||e.type===2)&&e.accessList==null&&(e.accessList=[]);const r=$.check(this.formats.transaction,e);if(e.chainId!=null){let n=e.chainId;pe(n)&&(n=O.from(n).toNumber()),r.chainId=n}else{let n=e.networkId;n==null&&r.v==null&&(n=e.chainId),pe(n)&&(n=O.from(n).toNumber()),typeof n!="number"&&r.v!=null&&(n=(r.v-35)/2,n<0&&(n=0),n=parseInt(n)),typeof n!="number"&&(n=0),r.chainId=n}return r.blockHash&&r.blockHash.replace(/0/g,"")==="x"&&(r.blockHash=null),r}transaction(e){return Vh(e)}receiptLog(e){return $.check(this.formats.receiptLog,e)}receipt(e){const r=$.check(this.formats.receipt,e);if(r.root!=null)if(r.root.length<=4){const n=O.from(r.root).toNumber();n===0||n===1?(r.status!=null&&r.status!==n&&Bn.throwArgumentError("alt-root-status/status mismatch","value",{root:r.root,status:r.status}),r.status=n,delete r.root):Bn.throwArgumentError("invalid alt-root-status","value.root",r.root)}else r.root.length!==66&&Bn.throwArgumentError("invalid root hash","value.root",r.root);return r.status!=null&&(r.byzantium=!0),r}topics(e){return Array.isArray(e)?e.map(r=>this.topics(r)):e!=null?this.hash(e,!0):null}filter(e){return $.check(this.formats.filter,e)}filterLog(e){return $.check(this.formats.filterLog,e)}static check(e,r){const n={};for(const i in e)try{const s=e[i](r[i]);s!==void 0&&(n[i]=s)}catch(s){throw s.checkKey=i,s.checkValue=r[i],s}return n}static allowNull(e,r){return function(n){return n==null?r:e(n)}}static allowFalsish(e,r){return function(n){return n?e(n):r}}static arrayOf(e){return function(r){if(!Array.isArray(r))throw new Error("not an array");const n=[];return r.forEach(function(i){n.push(e(i))}),n}}}var Z=function(t,e,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function a(y){try{g(n.next(y))}catch(A){o(A)}}function l(y){try{g(n.throw(y))}catch(A){o(A)}}function g(y){y.done?s(y.value):i(y.value).then(a,l)}g((n=n.apply(t,e||[])).next())})};const re=new R(iu),vd=10;function Oa(t){return t==null?"null":(nn(t)!==32&&re.throwArgumentError("invalid topic","topic",t),t.toLowerCase())}function Pa(t){for(t=t.slice();t.length>0&&t[t.length-1]==null;)t.pop();return t.map(e=>{if(Array.isArray(e)){const r={};e.forEach(i=>{r[Oa(i)]=!0});const n=Object.keys(r);return n.sort(),n.join("|")}else return Oa(e)}).join("&")}function yd(t){return t===""?[]:t.split(/&/g).map(e=>{if(e==="")return[];const r=e.split("|").map(n=>n==="null"?null:n);return r.length===1?r[0]:r})}function ln(t){if(typeof t=="string"){if(t=t.toLowerCase(),nn(t)===32)return"tx:"+t;if(t.indexOf(":")===-1)return t}else{if(Array.isArray(t))return"filter:*:"+Pa(t);if(Jc.isForkEvent(t))throw re.warn("not implemented"),new Error("not implemented");if(t&&typeof t=="object")return"filter:"+(t.address||"*")+":"+Pa(t.topics||[])}throw new Error("invalid event - "+t)}function Ln(){return new Date().getTime()}function Ra(t){return new Promise(e=>{setTimeout(e,t)})}const bd=["block","network","pending","poll"];class wd{constructor(e,r,n){G(this,"tag",e),G(this,"listener",r),G(this,"once",n),this._lastBlockNumber=-2,this._inflight=!1}get event(){switch(this.type){case"tx":return this.hash;case"filter":return this.filter}return this.tag}get type(){return this.tag.split(":")[0]}get hash(){const e=this.tag.split(":");return e[0]!=="tx"?null:e[1]}get filter(){const e=this.tag.split(":");if(e[0]!=="filter")return null;const r=e[1],n=yd(e[2]),i={};return n.length>0&&(i.topics=n),r&&r!=="*"&&(i.address=r),i}pollable(){return this.tag.indexOf(":")>=0||bd.indexOf(this.tag)>=0}}const Ad={0:{symbol:"btc",p2pkh:0,p2sh:5,prefix:"bc"},2:{symbol:"ltc",p2pkh:48,p2sh:50,prefix:"ltc"},3:{symbol:"doge",p2pkh:30,p2sh:22},60:{symbol:"eth",ilk:"eth"},61:{symbol:"etc",ilk:"eth"},700:{symbol:"xdai",ilk:"eth"}};function Bs(t){return it(O.from(t).toHexString(),32)}function Ba(t){return Xs.encode(ht([t,gt(Sa(Sa(t)),0,4)]))}const su=new RegExp("^(ipfs)://(.*)$","i"),La=[new RegExp("^(https)://(.*)$","i"),new RegExp("^(data):(.*)$","i"),su,new RegExp("^eip155:[0-9]+/(erc[0-9]+):(.*)$","i")];function _i(t,e){try{return Mn(ei(t,e))}catch{}return null}function ei(t,e){if(t==="0x")return null;const r=O.from(gt(t,e,e+32)).toNumber(),n=O.from(gt(t,r,r+32)).toNumber();return gt(t,r+32,r+32+n)}function Ls(t){return t.match(/^ipfs:\/\/ipfs\//i)?t=t.substring(12):t.match(/^ipfs:\/\//i)?t=t.substring(7):re.throwArgumentError("unsupported IPFS format","link",t),`https://gateway.ipfs.io/ipfs/${t}`}function Da(t){const e=q(t);if(e.length>32)throw new Error("internal; should not happen");const r=new Uint8Array(32);return r.set(e,32-e.length),r}function Ed(t){if(t.length%32===0)return t;const e=new Uint8Array(Math.ceil(t.length/32)*32);return e.set(t),e}function ou(t){const e=[];let r=0;for(let n=0;n<t.length;n++)e.push(null),r+=32;for(let n=0;n<t.length;n++){const i=q(t[n]);e[n]=Da(r),e.push(Da(i.length)),e.push(Ed(i)),r+=32+Math.ceil(i.length/32)*32}return _t(e)}class Ua{constructor(e,r,n,i){G(this,"provider",e),G(this,"name",n),G(this,"address",e.formatter.address(r)),G(this,"_resolvedAddress",i)}supportsWildcard(){return this._supportsEip2544||(this._supportsEip2544=this.provider.call({to:this.address,data:"0x01ffc9a79061b92300000000000000000000000000000000000000000000000000000000"}).then(e=>O.from(e).eq(1)).catch(e=>{if(e.code===R.errors.CALL_EXCEPTION)return!1;throw this._supportsEip2544=null,e})),this._supportsEip2544}_fetch(e,r){return Z(this,void 0,void 0,function*(){const n={to:this.address,ccipReadEnabled:!0,data:_t([e,wi(this.name),r||"0x"])};let i=!1;(yield this.supportsWildcard())&&(i=!0,n.data=_t(["0x9061b923",ou([Oc(this.name),n.data])]));try{let s=yield this.provider.call(n);return q(s).length%32===4&&re.throwError("resolver threw error",R.errors.CALL_EXCEPTION,{transaction:n,data:s}),i&&(s=ei(s,0)),s}catch(s){if(s.code===R.errors.CALL_EXCEPTION)return null;throw s}})}_fetchBytes(e,r){return Z(this,void 0,void 0,function*(){const n=yield this._fetch(e,r);return n!=null?ei(n,0):null})}_getAddress(e,r){const n=Ad[String(e)];if(n==null&&re.throwError(`unsupported coin type: ${e}`,R.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`}),n.ilk==="eth")return this.provider.formatter.address(r);const i=q(r);if(n.p2pkh!=null){const s=r.match(/^0x76a9([0-9a-f][0-9a-f])([0-9a-f]*)88ac$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return Ba(ht([[n.p2pkh],"0x"+s[2]]))}}if(n.p2sh!=null){const s=r.match(/^0xa9([0-9a-f][0-9a-f])([0-9a-f]*)87$/);if(s){const o=parseInt(s[1],16);if(s[2].length===o*2&&o>=1&&o<=75)return Ba(ht([[n.p2sh],"0x"+s[2]]))}}if(n.prefix!=null){const s=i[1];let o=i[0];if(o===0?s!==20&&s!==32&&(o=-1):o=-1,o>=0&&i.length===2+s&&s>=1&&s<=75){const a=Ca.toWords(i.slice(2));return a.unshift(o),Ca.encode(n.prefix,a)}}return null}getAddress(e){return Z(this,void 0,void 0,function*(){if(e==null&&(e=60),e===60)try{const i=yield this._fetch("0x3b3b57de");return i==="0x"||i===Ws?null:this.provider.formatter.callAddress(i)}catch(i){if(i.code===R.errors.CALL_EXCEPTION)return null;throw i}const r=yield this._fetchBytes("0xf1cb7e06",Bs(e));if(r==null||r==="0x")return null;const n=this._getAddress(e,r);return n==null&&re.throwError("invalid or unsupported coin data",R.errors.UNSUPPORTED_OPERATION,{operation:`getAddress(${e})`,coinType:e,data:r}),n})}getAvatar(){return Z(this,void 0,void 0,function*(){const e=[{type:"name",content:this.name}];try{const r=yield this.getText("avatar");if(r==null)return null;for(let n=0;n<La.length;n++){const i=r.match(La[n]);if(i==null)continue;const s=i[1].toLowerCase();switch(s){case"https":return e.push({type:"url",content:r}),{linkage:e,url:r};case"data":return e.push({type:"data",content:r}),{linkage:e,url:r};case"ipfs":return e.push({type:"ipfs",content:r}),{linkage:e,url:Ls(r)};case"erc721":case"erc1155":{const o=s==="erc721"?"0xc87b56dd":"0x0e89341c";e.push({type:s,content:r});const a=this._resolvedAddress||(yield this.getAddress()),l=(i[2]||"").split("/");if(l.length!==2)return null;const g=yield this.provider.formatter.address(l[0]),y=it(O.from(l[1]).toHexString(),32);if(s==="erc721"){const P=this.provider.formatter.callAddress(yield this.provider.call({to:g,data:_t(["0x6352211e",y])}));if(a!==P)return null;e.push({type:"owner",content:P})}else if(s==="erc1155"){const P=O.from(yield this.provider.call({to:g,data:_t(["0x00fdd58e",it(a,32),y])}));if(P.isZero())return null;e.push({type:"balance",content:P.toString()})}const A={to:this.provider.formatter.address(l[0]),data:_t([o,y])};let I=_i(yield this.provider.call(A),0);if(I==null)return null;e.push({type:"metadata-url-base",content:I}),s==="erc1155"&&(I=I.replace("{id}",y.substring(2)),e.push({type:"metadata-url-expanded",content:I})),I.match(/^ipfs:/i)&&(I=Ls(I)),e.push({type:"metadata-url",content:I});const M=yield tu(I);if(!M)return null;e.push({type:"metadata",content:JSON.stringify(M)});let k=M.image;if(typeof k!="string")return null;if(!k.match(/^(https:\/\/|data:)/i)){if(k.match(su)==null)return null;e.push({type:"url-ipfs",content:k}),k=Ls(k)}return e.push({type:"url",content:k}),{linkage:e,url:k}}}}}catch{}return null})}getContentHash(){return Z(this,void 0,void 0,function*(){const e=yield this._fetchBytes("0xbc1c58d1");if(e==null||e==="0x")return null;const r=e.match(/^0xe3010170(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(r){const o=parseInt(r[3],16);if(r[4].length===o*2)return"ipfs://"+Xs.encode("0x"+r[1])}const n=e.match(/^0xe5010172(([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f]*))$/);if(n){const o=parseInt(n[3],16);if(n[4].length===o*2)return"ipns://"+Xs.encode("0x"+n[1])}const i=e.match(/^0xe40101fa011b20([0-9a-f]*)$/);if(i&&i[1].length===32*2)return"bzz://"+i[1];const s=e.match(/^0x90b2c605([0-9a-f]*)$/);if(s&&s[1].length===34*2){const o={"=":"","+":"-","/":"_"};return"sia://"+pf("0x"+s[1]).replace(/[=+\/]/g,l=>o[l])}return re.throwError("invalid or unsupported content hash data",R.errors.UNSUPPORTED_OPERATION,{operation:"getContentHash()",data:e})})}getText(e){return Z(this,void 0,void 0,function*(){let r=mt(e);r=ht([Bs(64),Bs(r.length),r]),r.length%32!==0&&(r=ht([r,it("0x",32-e.length%32)]));const n=yield this._fetchBytes("0x59d1d43c",F(r));return n==null||n==="0x"?null:Mn(n)})}}let Ds=null,xd=1;class _d extends Ji{constructor(e){if(super(),this._events=[],this._emitted={block:-2},this.disableCcipRead=!1,this.formatter=new.target.getFormatter(),G(this,"anyNetwork",e==="any"),this.anyNetwork&&(e=this.detectNetwork()),e instanceof Promise)this._networkPromise=e,e.catch(r=>{}),this._ready().catch(r=>{});else{const r=dn(new.target,"getNetwork")(e);r?(G(this,"_network",r),this.emit("network",r,null)):re.throwArgumentError("invalid network","network",e)}this._maxInternalBlockNumber=-1024,this._lastBlockNumber=-2,this._maxFilterBlockRange=10,this._pollingInterval=4e3,this._fastQueryDate=0}_ready(){return Z(this,void 0,void 0,function*(){if(this._network==null){let e=null;if(this._networkPromise)try{e=yield this._networkPromise}catch{}e==null&&(e=yield this.detectNetwork()),e||re.throwError("no network detected",R.errors.UNKNOWN_ERROR,{}),this._network==null&&(this.anyNetwork?this._network=e:G(this,"_network",e),this.emit("network",e,null))}return this._network})}get ready(){return Dn(()=>this._ready().then(e=>e,e=>{if(!(e.code===R.errors.NETWORK_ERROR&&e.event==="noNetwork"))throw e}))}static getFormatter(){return Ds==null&&(Ds=new $),Ds}static getNetwork(e){return rd(e??"homestead")}ccipReadFetch(e,r,n){return Z(this,void 0,void 0,function*(){if(this.disableCcipRead||n.length===0)return null;const i=e.to.toLowerCase(),s=r.toLowerCase(),o=[];for(let a=0;a<n.length;a++){const l=n[a],g=l.replace("{sender}",i).replace("{data}",s),y=l.indexOf("{data}")>=0?null:JSON.stringify({data:s,sender:i}),A=yield tu({url:g,errorPassThrough:!0},y,(M,k)=>(M.status=k.statusCode,M));if(A.data)return A.data;const I=A.message||"unknown error";if(A.status>=400&&A.status<500)return re.throwError(`response not found during CCIP fetch: ${I}`,R.errors.SERVER_ERROR,{url:l,errorMessage:I});o.push(I)}return re.throwError(`error encountered during CCIP fetch: ${o.map(a=>JSON.stringify(a)).join(", ")}`,R.errors.SERVER_ERROR,{urls:n,errorMessages:o})})}_getInternalBlockNumber(e){return Z(this,void 0,void 0,function*(){if(yield this._ready(),e>0)for(;this._internalBlockNumber;){const i=this._internalBlockNumber;try{const s=yield i;if(Ln()-s.respTime<=e)return s.blockNumber;break}catch{if(this._internalBlockNumber===i)break}}const r=Ln(),n=ot({blockNumber:this.perform("getBlockNumber",{}),networkError:this.getNetwork().then(i=>null,i=>i)}).then(({blockNumber:i,networkError:s})=>{if(s)throw this._internalBlockNumber===n&&(this._internalBlockNumber=null),s;const o=Ln();return i=O.from(i).toNumber(),i<this._maxInternalBlockNumber&&(i=this._maxInternalBlockNumber),this._maxInternalBlockNumber=i,this._setFastBlockNumber(i),{blockNumber:i,reqTime:r,respTime:o}});return this._internalBlockNumber=n,n.catch(i=>{this._internalBlockNumber===n&&(this._internalBlockNumber=null)}),(yield n).blockNumber})}poll(){return Z(this,void 0,void 0,function*(){const e=xd++,r=[];let n=null;try{n=yield this._getInternalBlockNumber(100+this.pollingInterval/2)}catch(i){this.emit("error",i);return}if(this._setFastBlockNumber(n),this.emit("poll",e,n),n===this._lastBlockNumber){this.emit("didPoll",e);return}if(this._emitted.block===-2&&(this._emitted.block=n-1),Math.abs(this._emitted.block-n)>1e3)re.warn(`network block skew detected; skipping block events (emitted=${this._emitted.block} blockNumber${n})`),this.emit("error",re.makeError("network block skew detected",R.errors.NETWORK_ERROR,{blockNumber:n,event:"blockSkew",previousBlockNumber:this._emitted.block})),this.emit("block",n);else for(let i=this._emitted.block+1;i<=n;i++)this.emit("block",i);this._emitted.block!==n&&(this._emitted.block=n,Object.keys(this._emitted).forEach(i=>{if(i==="block")return;const s=this._emitted[i];s!=="pending"&&n-s>12&&delete this._emitted[i]})),this._lastBlockNumber===-2&&(this._lastBlockNumber=n-1),this._events.forEach(i=>{switch(i.type){case"tx":{const s=i.hash;let o=this.getTransactionReceipt(s).then(a=>(!a||a.blockNumber==null||(this._emitted["t:"+s]=a.blockNumber,this.emit(s,a)),null)).catch(a=>{this.emit("error",a)});r.push(o);break}case"filter":{if(!i._inflight){i._inflight=!0,i._lastBlockNumber===-2&&(i._lastBlockNumber=n-1);const s=i.filter;s.fromBlock=i._lastBlockNumber+1,s.toBlock=n;const o=s.toBlock-this._maxFilterBlockRange;o>s.fromBlock&&(s.fromBlock=o),s.fromBlock<0&&(s.fromBlock=0);const a=this.getLogs(s).then(l=>{i._inflight=!1,l.length!==0&&l.forEach(g=>{g.blockNumber>i._lastBlockNumber&&(i._lastBlockNumber=g.blockNumber),this._emitted["b:"+g.blockHash]=g.blockNumber,this._emitted["t:"+g.transactionHash]=g.blockNumber,this.emit(s,g)})}).catch(l=>{this.emit("error",l),i._inflight=!1});r.push(a)}break}}}),this._lastBlockNumber=n,Promise.all(r).then(()=>{this.emit("didPoll",e)}).catch(i=>{this.emit("error",i)})})}resetEventsBlock(e){this._lastBlockNumber=e-1,this.polling&&this.poll()}get network(){return this._network}detectNetwork(){return Z(this,void 0,void 0,function*(){return re.throwError("provider does not support network detection",R.errors.UNSUPPORTED_OPERATION,{operation:"provider.detectNetwork"})})}getNetwork(){return Z(this,void 0,void 0,function*(){const e=yield this._ready(),r=yield this.detectNetwork();if(e.chainId!==r.chainId){if(this.anyNetwork)return this._network=r,this._lastBlockNumber=-2,this._fastBlockNumber=null,this._fastBlockNumberPromise=null,this._fastQueryDate=0,this._emitted.block=-2,this._maxInternalBlockNumber=-1024,this._internalBlockNumber=null,this.emit("network",r,e),yield Ra(0),this._network;const n=re.makeError("underlying network changed",R.errors.NETWORK_ERROR,{event:"changed",network:e,detectedNetwork:r});throw this.emit("error",n),n}return e})}get blockNumber(){return this._getInternalBlockNumber(100+this.pollingInterval/2).then(e=>{this._setFastBlockNumber(e)},e=>{}),this._fastBlockNumber!=null?this._fastBlockNumber:-1}get polling(){return this._poller!=null}set polling(e){e&&!this._poller?(this._poller=setInterval(()=>{this.poll()},this.pollingInterval),this._bootstrapPoll||(this._bootstrapPoll=setTimeout(()=>{this.poll(),this._bootstrapPoll=setTimeout(()=>{this._poller||this.poll(),this._bootstrapPoll=null},this.pollingInterval)},0))):!e&&this._poller&&(clearInterval(this._poller),this._poller=null)}get pollingInterval(){return this._pollingInterval}set pollingInterval(e){if(typeof e!="number"||e<=0||parseInt(String(e))!=e)throw new Error("invalid polling interval");this._pollingInterval=e,this._poller&&(clearInterval(this._poller),this._poller=setInterval(()=>{this.poll()},this._pollingInterval))}_getFastBlockNumber(){const e=Ln();return e-this._fastQueryDate>2*this._pollingInterval&&(this._fastQueryDate=e,this._fastBlockNumberPromise=this.getBlockNumber().then(r=>((this._fastBlockNumber==null||r>this._fastBlockNumber)&&(this._fastBlockNumber=r),this._fastBlockNumber))),this._fastBlockNumberPromise}_setFastBlockNumber(e){this._fastBlockNumber!=null&&e<this._fastBlockNumber||(this._fastQueryDate=Ln(),(this._fastBlockNumber==null||e>this._fastBlockNumber)&&(this._fastBlockNumber=e,this._fastBlockNumberPromise=Promise.resolve(e)))}waitForTransaction(e,r,n){return Z(this,void 0,void 0,function*(){return this._waitForTransaction(e,r??1,n||0,null)})}_waitForTransaction(e,r,n,i){return Z(this,void 0,void 0,function*(){const s=yield this.getTransactionReceipt(e);return(s?s.confirmations:0)>=r?s:new Promise((o,a)=>{const l=[];let g=!1;const y=function(){return g?!0:(g=!0,l.forEach(I=>{I()}),!1)},A=I=>{I.confirmations<r||y()||o(I)};if(this.on(e,A),l.push(()=>{this.removeListener(e,A)}),i){let I=i.startBlock,M=null;const k=P=>Z(this,void 0,void 0,function*(){g||(yield Ra(1e3),this.getTransactionCount(i.from).then(j=>Z(this,void 0,void 0,function*(){if(!g){if(j<=i.nonce)I=P;else{{const B=yield this.getTransaction(e);if(B&&B.blockNumber!=null)return}for(M==null&&(M=I-3,M<i.startBlock&&(M=i.startBlock));M<=P;){if(g)return;const B=yield this.getBlockWithTransactions(M);for(let W=0;W<B.transactions.length;W++){const H=B.transactions[W];if(H.hash===e)return;if(H.from===i.from&&H.nonce===i.nonce){if(g)return;const J=yield this.waitForTransaction(H.hash,r);if(y())return;let K="replaced";H.data===i.data&&H.to===i.to&&H.value.eq(i.value)?K="repriced":H.data==="0x"&&H.from===H.to&&H.value.isZero()&&(K="cancelled"),a(re.makeError("transaction was replaced",R.errors.TRANSACTION_REPLACED,{cancelled:K==="replaced"||K==="cancelled",reason:K,replacement:this._wrapTransaction(H),hash:e,receipt:J}));return}}M++}}g||this.once("block",k)}}),j=>{g||this.once("block",k)}))});if(g)return;this.once("block",k),l.push(()=>{this.removeListener("block",k)})}if(typeof n=="number"&&n>0){const I=setTimeout(()=>{y()||a(re.makeError("timeout exceeded",R.errors.TIMEOUT,{timeout:n}))},n);I.unref&&I.unref(),l.push(()=>{clearTimeout(I)})}})})}getBlockNumber(){return Z(this,void 0,void 0,function*(){return this._getInternalBlockNumber(0)})}getGasPrice(){return Z(this,void 0,void 0,function*(){yield this.getNetwork();const e=yield this.perform("getGasPrice",{});try{return O.from(e)}catch(r){return re.throwError("bad result from backend",R.errors.SERVER_ERROR,{method:"getGasPrice",result:e,error:r})}})}getBalance(e,r){return Z(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield ot({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getBalance",n);try{return O.from(i)}catch(s){return re.throwError("bad result from backend",R.errors.SERVER_ERROR,{method:"getBalance",params:n,result:i,error:s})}})}getTransactionCount(e,r){return Z(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield ot({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getTransactionCount",n);try{return O.from(i).toNumber()}catch(s){return re.throwError("bad result from backend",R.errors.SERVER_ERROR,{method:"getTransactionCount",params:n,result:i,error:s})}})}getCode(e,r){return Z(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield ot({address:this._getAddress(e),blockTag:this._getBlockTag(r)}),i=yield this.perform("getCode",n);try{return F(i)}catch(s){return re.throwError("bad result from backend",R.errors.SERVER_ERROR,{method:"getCode",params:n,result:i,error:s})}})}getStorageAt(e,r,n){return Z(this,void 0,void 0,function*(){yield this.getNetwork();const i=yield ot({address:this._getAddress(e),blockTag:this._getBlockTag(n),position:Promise.resolve(r).then(o=>mo(o))}),s=yield this.perform("getStorageAt",i);try{return F(s)}catch(o){return re.throwError("bad result from backend",R.errors.SERVER_ERROR,{method:"getStorageAt",params:i,result:s,error:o})}})}_wrapTransaction(e,r,n){if(r!=null&&nn(r)!==32)throw new Error("invalid response - sendTransaction");const i=e;return r!=null&&e.hash!==r&&re.throwError("Transaction hash mismatch from Provider.sendTransaction.",R.errors.UNKNOWN_ERROR,{expectedHash:e.hash,returnedHash:r}),i.wait=(s,o)=>Z(this,void 0,void 0,function*(){s==null&&(s=1),o==null&&(o=0);let a;s!==0&&n!=null&&(a={data:e.data,from:e.from,nonce:e.nonce,to:e.to,value:e.value,startBlock:n});const l=yield this._waitForTransaction(e.hash,s,o,a);return l==null&&s===0?null:(this._emitted["t:"+e.hash]=l.blockNumber,l.status===0&&re.throwError("transaction failed",R.errors.CALL_EXCEPTION,{transactionHash:e.hash,transaction:e,receipt:l}),l)}),i}sendTransaction(e){return Z(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield Promise.resolve(e).then(s=>F(s)),n=this.formatter.transaction(e);n.confirmations==null&&(n.confirmations=0);const i=yield this._getInternalBlockNumber(100+2*this.pollingInterval);try{const s=yield this.perform("sendTransaction",{signedTransaction:r});return this._wrapTransaction(n,s,i)}catch(s){throw s.transaction=n,s.transactionHash=n.hash,s}})}_getTransactionRequest(e){return Z(this,void 0,void 0,function*(){const r=yield e,n={};return["from","to"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?this._getAddress(s):null))}),["gasLimit","gasPrice","maxFeePerGas","maxPriorityFeePerGas","value"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?O.from(s):null))}),["type"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s??null))}),r.accessList&&(n.accessList=this.formatter.accessList(r.accessList)),["data"].forEach(i=>{r[i]!=null&&(n[i]=Promise.resolve(r[i]).then(s=>s?F(s):null))}),this.formatter.transactionRequest(yield ot(n))})}_getFilter(e){return Z(this,void 0,void 0,function*(){e=yield e;const r={};return e.address!=null&&(r.address=this._getAddress(e.address)),["blockHash","topics"].forEach(n=>{e[n]!=null&&(r[n]=e[n])}),["fromBlock","toBlock"].forEach(n=>{e[n]!=null&&(r[n]=this._getBlockTag(e[n]))}),this.formatter.filter(yield ot(r))})}_call(e,r,n){return Z(this,void 0,void 0,function*(){n>=vd&&re.throwError("CCIP read exceeded maximum redirections",R.errors.SERVER_ERROR,{redirects:n,transaction:e});const i=e.to,s=yield this.perform("call",{transaction:e,blockTag:r});if(n>=0&&r==="latest"&&i!=null&&s.substring(0,10)==="0x556f1830"&&nn(s)%32===4)try{const o=gt(s,4),a=gt(o,0,32);O.from(a).eq(i)||re.throwError("CCIP Read sender did not match",R.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const l=[],g=O.from(gt(o,32,64)).toNumber(),y=O.from(gt(o,g,g+32)).toNumber(),A=gt(o,g+32);for(let B=0;B<y;B++){const W=_i(A,B*32);W==null&&re.throwError("CCIP Read contained corrupt URL string",R.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s}),l.push(W)}const I=ei(o,64);O.from(gt(o,100,128)).isZero()||re.throwError("CCIP Read callback selector included junk",R.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const M=gt(o,96,100),k=ei(o,128),P=yield this.ccipReadFetch(e,I,l);P==null&&re.throwError("CCIP Read disabled or provided no URLs",R.errors.CALL_EXCEPTION,{name:"OffchainLookup",signature:"OffchainLookup(address,string[],bytes,bytes4,bytes)",transaction:e,data:s});const j={to:i,data:_t([M,ou([P,k])])};return this._call(j,r,n+1)}catch(o){if(o.code===R.errors.SERVER_ERROR)throw o}try{return F(s)}catch(o){return re.throwError("bad result from backend",R.errors.SERVER_ERROR,{method:"call",params:{transaction:e,blockTag:r},result:s,error:o})}})}call(e,r){return Z(this,void 0,void 0,function*(){yield this.getNetwork();const n=yield ot({transaction:this._getTransactionRequest(e),blockTag:this._getBlockTag(r),ccipReadEnabled:Promise.resolve(e.ccipReadEnabled)});return this._call(n.transaction,n.blockTag,n.ccipReadEnabled?0:-1)})}estimateGas(e){return Z(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield ot({transaction:this._getTransactionRequest(e)}),n=yield this.perform("estimateGas",r);try{return O.from(n)}catch(i){return re.throwError("bad result from backend",R.errors.SERVER_ERROR,{method:"estimateGas",params:r,result:n,error:i})}})}_getAddress(e){return Z(this,void 0,void 0,function*(){e=yield e,typeof e!="string"&&re.throwArgumentError("invalid address or ENS name","name",e);const r=yield this.resolveName(e);return r==null&&re.throwError("ENS name not configured",R.errors.UNSUPPORTED_OPERATION,{operation:`resolveName(${JSON.stringify(e)})`}),r})}_getBlock(e,r){return Z(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;let n=-128;const i={includeTransactions:!!r};if(pe(e,32))i.blockHash=e;else try{i.blockTag=yield this._getBlockTag(e),pe(i.blockTag)&&(n=parseInt(i.blockTag.substring(2),16))}catch{re.throwArgumentError("invalid block hash or block tag","blockHashOrBlockTag",e)}return Dn(()=>Z(this,void 0,void 0,function*(){const s=yield this.perform("getBlock",i);if(s==null)return i.blockHash!=null&&this._emitted["b:"+i.blockHash]==null||i.blockTag!=null&&n>this._emitted.block?null:void 0;if(r){let o=null;for(let l=0;l<s.transactions.length;l++){const g=s.transactions[l];if(g.blockNumber==null)g.confirmations=0;else if(g.confirmations==null){o==null&&(o=yield this._getInternalBlockNumber(100+2*this.pollingInterval));let y=o-g.blockNumber+1;y<=0&&(y=1),g.confirmations=y}}const a=this.formatter.blockWithTransactions(s);return a.transactions=a.transactions.map(l=>this._wrapTransaction(l)),a}return this.formatter.block(s)}),{oncePoll:this})})}getBlock(e){return this._getBlock(e,!1)}getBlockWithTransactions(e){return this._getBlock(e,!0)}getTransaction(e){return Z(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Dn(()=>Z(this,void 0,void 0,function*(){const n=yield this.perform("getTransaction",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;const i=this.formatter.transactionResponse(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return this._wrapTransaction(i)}),{oncePoll:this})})}getTransactionReceipt(e){return Z(this,void 0,void 0,function*(){yield this.getNetwork(),e=yield e;const r={transactionHash:this.formatter.hash(e,!0)};return Dn(()=>Z(this,void 0,void 0,function*(){const n=yield this.perform("getTransactionReceipt",r);if(n==null)return this._emitted["t:"+e]==null?null:void 0;if(n.blockHash==null)return;const i=this.formatter.receipt(n);if(i.blockNumber==null)i.confirmations=0;else if(i.confirmations==null){let o=(yield this._getInternalBlockNumber(100+2*this.pollingInterval))-i.blockNumber+1;o<=0&&(o=1),i.confirmations=o}return i}),{oncePoll:this})})}getLogs(e){return Z(this,void 0,void 0,function*(){yield this.getNetwork();const r=yield ot({filter:this._getFilter(e)}),n=yield this.perform("getLogs",r);return n.forEach(i=>{i.removed==null&&(i.removed=!1)}),$.arrayOf(this.formatter.filterLog.bind(this.formatter))(n)})}getEtherPrice(){return Z(this,void 0,void 0,function*(){return yield this.getNetwork(),this.perform("getEtherPrice",{})})}_getBlockTag(e){return Z(this,void 0,void 0,function*(){if(e=yield e,typeof e=="number"&&e<0){e%1&&re.throwArgumentError("invalid BlockTag","blockTag",e);let r=yield this._getInternalBlockNumber(100+2*this.pollingInterval);return r+=e,r<0&&(r=0),this.formatter.blockTag(r)}return this.formatter.blockTag(e)})}getResolver(e){return Z(this,void 0,void 0,function*(){let r=e;for(;;){if(r===""||r==="."||e!=="eth"&&r==="eth")return null;const n=yield this._getResolver(r,"getResolver");if(n!=null){const i=new Ua(this,n,e);return r!==e&&!(yield i.supportsWildcard())?null:i}r=r.split(".").slice(1).join(".")}})}_getResolver(e,r){return Z(this,void 0,void 0,function*(){r==null&&(r="ENS");const n=yield this.getNetwork();n.ensAddress||re.throwError("network does not support ENS",R.errors.UNSUPPORTED_OPERATION,{operation:r,network:n.name});try{const i=yield this.call({to:n.ensAddress,data:"0x0178b8bf"+wi(e).substring(2)});return this.formatter.callAddress(i)}catch{}return null})}resolveName(e){return Z(this,void 0,void 0,function*(){e=yield e;try{return Promise.resolve(this.formatter.address(e))}catch(n){if(pe(e))throw n}typeof e!="string"&&re.throwArgumentError("invalid ENS name","name",e);const r=yield this.getResolver(e);return r?yield r.getAddress():null})}lookupAddress(e){return Z(this,void 0,void 0,function*(){e=yield e,e=this.formatter.address(e);const r=e.substring(2).toLowerCase()+".addr.reverse",n=yield this._getResolver(r,"lookupAddress");if(n==null)return null;const i=_i(yield this.call({to:n,data:"0x691f3431"+wi(r).substring(2)}),0);return(yield this.resolveName(i))!=e?null:i})}getAvatar(e){return Z(this,void 0,void 0,function*(){let r=null;if(pe(e)){const s=this.formatter.address(e).substring(2).toLowerCase()+".addr.reverse",o=yield this._getResolver(s,"getAvatar");if(!o)return null;r=new Ua(this,o,s);try{const a=yield r.getAvatar();if(a)return a.url}catch(a){if(a.code!==R.errors.CALL_EXCEPTION)throw a}try{const a=_i(yield this.call({to:o,data:"0x691f3431"+wi(s).substring(2)}),0);r=yield this.getResolver(a)}catch(a){if(a.code!==R.errors.CALL_EXCEPTION)throw a;return null}}else if(r=yield this.getResolver(e),!r)return null;const n=yield r.getAvatar();return n==null?null:n.url})}perform(e,r){return re.throwError(e+" not implemented",R.errors.NOT_IMPLEMENTED,{operation:e})}_startEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_stopEvent(e){this.polling=this._events.filter(r=>r.pollable()).length>0}_addEventListener(e,r,n){const i=new wd(ln(e),r,n);return this._events.push(i),this._startEvent(i),this}on(e,r){return this._addEventListener(e,r,!1)}once(e,r){return this._addEventListener(e,r,!0)}emit(e,...r){let n=!1,i=[],s=ln(e);return this._events=this._events.filter(o=>o.tag!==s?!0:(setTimeout(()=>{o.listener.apply(this,r)},0),n=!0,o.once?(i.push(o),!1):!0)),i.forEach(o=>{this._stopEvent(o)}),n}listenerCount(e){if(!e)return this._events.length;let r=ln(e);return this._events.filter(n=>n.tag===r).length}listeners(e){if(e==null)return this._events.map(n=>n.listener);let r=ln(e);return this._events.filter(n=>n.tag===r).map(n=>n.listener)}off(e,r){if(r==null)return this.removeAllListeners(e);const n=[];let i=!1,s=ln(e);return this._events=this._events.filter(o=>o.tag!==s||o.listener!=r||i?!0:(i=!0,n.push(o),!1)),n.forEach(o=>{this._stopEvent(o)}),this}removeAllListeners(e){let r=[];if(e==null)r=this._events,this._events=[];else{const n=ln(e);this._events=this._events.filter(i=>i.tag!==n?!0:(r.push(i),!1))}return r.forEach(n=>{this._stopEvent(n)}),this}}const Sd="solidity/5.7.0",Id=new RegExp("^bytes([0-9]+)$"),Md=new RegExp("^(u?int)([0-9]*)$"),Nd=new RegExp("^(.*)\\[([0-9]*)\\]$"),kd="0000000000000000000000000000000000000000000000000000000000000000",hn=new R(Sd);function au(t,e,r){switch(t){case"address":return r?yi(e,32):q(e);case"string":return mt(e);case"bytes":return q(e);case"bool":return e=e?"0x01":"0x00",r?yi(e,32):q(e)}let n=t.match(Md);if(n){let i=parseInt(n[2]||"256");return(n[2]&&String(i)!==n[2]||i%8!==0||i===0||i>256)&&hn.throwArgumentError("invalid number type","type",t),r&&(i=256),e=O.from(e).toTwos(i),yi(e,i/8)}if(n=t.match(Id),n){const i=parseInt(n[1]);return(String(i)!==n[1]||i===0||i>32)&&hn.throwArgumentError("invalid bytes type","type",t),q(e).byteLength!==i&&hn.throwArgumentError(`invalid value for ${t}`,"value",e),r?q((e+kd).substring(0,66)):e}if(n=t.match(Nd),n&&Array.isArray(e)){const i=n[1];parseInt(n[2]||String(e.length))!=e.length&&hn.throwArgumentError(`invalid array length for ${t}`,"value",e);const o=[];return e.forEach(function(a){o.push(au(i,a,!0))}),ht(o)}return hn.throwArgumentError("invalid type","type",t)}function ue(t,e){t.length!=e.length&&hn.throwArgumentError("wrong number of values; expected ${ types.length }","values",e);const r=[];return t.forEach(function(n,i){r.push(au(n,e[i]))}),F(ht(r))}function Zr(t,e){return fe(ue(t,e))}let C=function(t){return t[t.MAINNET=1]="MAINNET",t[t.ROPSTEN=3]="ROPSTEN",t[t.RINKEBY=4]="RINKEBY",t[t.GOERLI=5]="GOERLI",t[t.KOVAN=42]="KOVAN",t[t.SEPOLIA=11155111]="SEPOLIA",t[t.POLYGON=137]="POLYGON",t[t.POLYGON_MUMBAI=80001]="POLYGON_MUMBAI",t[t.POLYGON_ZKEVM=1101]="POLYGON_ZKEVM",t[t.POLYGON_AMOY=80002]="POLYGON_AMOY",t[t.BSC=56]="BSC",t[t.BSC_TESTNET=97]="BSC_TESTNET",t[t.OPTIMISM=10]="OPTIMISM",t[t.OPTIMISM_KOVAN=69]="OPTIMISM_KOVAN",t[t.OPTIMISM_GOERLI=420]="OPTIMISM_GOERLI",t[t.OPTIMISM_SEPOLIA=11155420]="OPTIMISM_SEPOLIA",t[t.ARBITRUM=42161]="ARBITRUM",t[t.ARBITRUM_GOERLI=421613]="ARBITRUM_GOERLI",t[t.ARBITRUM_SEPOLIA=421614]="ARBITRUM_SEPOLIA",t[t.ARBITRUM_NOVA=42170]="ARBITRUM_NOVA",t[t.AVALANCHE=43114]="AVALANCHE",t[t.AVALANCHE_TESTNET=43113]="AVALANCHE_TESTNET",t[t.GNOSIS=100]="GNOSIS",t[t.BASE=8453]="BASE",t[t.BASE_GOERLI=84531]="BASE_GOERLI",t[t.BASE_SEPOLIA=84532]="BASE_SEPOLIA",t[t.HOMEVERSE_TESTNET=40875]="HOMEVERSE_TESTNET",t[t.HOMEVERSE=19011]="HOMEVERSE",t[t.XAI=660279]="XAI",t[t.XAI_SEPOLIA=37714555429]="XAI_SEPOLIA",t[t.ASTAR_ZKEVM=3776]="ASTAR_ZKEVM",t[t.ASTAR_ZKYOTO=6038361]="ASTAR_ZKYOTO",t[t.XR_SEPOLIA=2730]="XR_SEPOLIA",t[t.HARDHAT=31337]="HARDHAT",t[t.HARDHAT_2=31338]="HARDHAT_2",t}({}),ce=function(t){return t.MAINNET="mainnet",t.TESTNET="testnet",t}({});const ve={[C.MAINNET]:{chainId:C.MAINNET,type:ce.MAINNET,name:"mainnet",title:"Ethereum",logoURI:`https://assets.sequence.info/images/networks/medium/${C.MAINNET}.webp`,blockExplorer:{name:"Etherscan",rootUrl:"https://etherscan.io/"},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e"},[C.ROPSTEN]:{chainId:C.ROPSTEN,type:ce.TESTNET,name:"ropsten",title:"Ropsten",logoURI:`https://assets.sequence.info/images/networks/medium/${C.ROPSTEN}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Ropsten)",rootUrl:"https://ropsten.etherscan.io/"},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",deprecated:!0},[C.RINKEBY]:{chainId:C.RINKEBY,type:ce.TESTNET,name:"rinkeby",title:"Rinkeby",logoURI:`https://assets.sequence.info/images/networks/medium/${C.RINKEBY}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Rinkeby)",rootUrl:"https://rinkeby.etherscan.io/"},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",deprecated:!0},[C.GOERLI]:{chainId:C.GOERLI,type:ce.TESTNET,name:"goerli",title:"Goerli",logoURI:`https://assets.sequence.info/images/networks/medium/${C.GOERLI}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Goerli)",rootUrl:"https://goerli.etherscan.io/"},ensAddress:"0x00000000000C2E074eC69A0dFb2997BA6C7d2e1e",deprecated:!0},[C.KOVAN]:{chainId:C.KOVAN,type:ce.TESTNET,name:"kovan",title:"Kovan",logoURI:`https://assets.sequence.info/images/networks/medium/${C.KOVAN}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Kovan)",rootUrl:"https://kovan.etherscan.io/"},deprecated:!0},[C.SEPOLIA]:{chainId:C.SEPOLIA,type:ce.TESTNET,name:"sepolia",title:"Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${C.SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Sepolia)",rootUrl:"https://sepolia.etherscan.io/"}},[C.POLYGON]:{chainId:C.POLYGON,type:ce.MAINNET,name:"polygon",title:"Polygon",logoURI:`https://assets.sequence.info/images/networks/medium/${C.POLYGON}.webp`,blockExplorer:{name:"Polygonscan",rootUrl:"https://polygonscan.com/"}},[C.POLYGON_MUMBAI]:{chainId:C.POLYGON_MUMBAI,type:ce.TESTNET,name:"mumbai",title:"Polygon Mumbai",logoURI:`https://assets.sequence.info/images/networks/medium/${C.POLYGON_MUMBAI}.webp`,testnet:!0,blockExplorer:{name:"Polygonscan (Mumbai)",rootUrl:"https://mumbai.polygonscan.com/"},deprecated:!0},[C.POLYGON_AMOY]:{chainId:C.POLYGON_AMOY,type:ce.TESTNET,name:"amoy",title:"Polygon Amoy",logoURI:`https://assets.sequence.info/images/networks/medium/${C.POLYGON_AMOY}.webp`,testnet:!0,blockExplorer:{name:"OKLink (Amoy)",rootUrl:"https://www.oklink.com/amoy"}},[C.POLYGON_ZKEVM]:{chainId:C.POLYGON_ZKEVM,type:ce.MAINNET,name:"polygon-zkevm",title:"Polygon zkEVM",logoURI:`https://assets.sequence.info/images/networks/medium/${C.POLYGON_ZKEVM}.webp`,blockExplorer:{name:"Polygonscan (zkEVM)",rootUrl:"https://zkevm.polygonscan.com/"}},[C.BSC]:{chainId:C.BSC,type:ce.MAINNET,name:"bsc",title:"BNB Smart Chain",logoURI:`https://assets.sequence.info/images/networks/medium/${C.BSC}.webp`,blockExplorer:{name:"BSCScan",rootUrl:"https://bscscan.com/"}},[C.BSC_TESTNET]:{chainId:C.BSC_TESTNET,type:ce.TESTNET,name:"bsc-testnet",title:"BNB Smart Chain Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${C.BSC_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"BSCScan (Testnet)",rootUrl:"https://testnet.bscscan.com/"}},[C.OPTIMISM]:{chainId:C.OPTIMISM,type:ce.MAINNET,name:"optimism",title:"Optimism",logoURI:`https://assets.sequence.info/images/networks/medium/${C.OPTIMISM}.webp`,blockExplorer:{name:"Etherscan (Optimism)",rootUrl:"https://optimistic.etherscan.io/"}},[C.OPTIMISM_KOVAN]:{chainId:C.OPTIMISM_KOVAN,type:ce.TESTNET,name:"optimism-kovan",title:"Optimistic Kovan",logoURI:`https://assets.sequence.info/images/networks/medium/${C.OPTIMISM_KOVAN}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Optimism Kovan)",rootUrl:"https://kovan-optimistic.etherscan.io/"},deprecated:!0},[C.OPTIMISM_GOERLI]:{chainId:C.OPTIMISM_GOERLI,type:ce.TESTNET,name:"optimism-goerli",title:"Optimistic Goerli",logoURI:`https://assets.sequence.info/images/networks/medium/${C.OPTIMISM_GOERLI}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Optimism Goerli)",rootUrl:"https://goerli-optimistic.etherscan.io/"},deprecated:!0},[C.OPTIMISM_SEPOLIA]:{chainId:C.OPTIMISM_SEPOLIA,type:ce.TESTNET,name:"optimism-sepolia",title:"Optimistic Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${C.OPTIMISM_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Etherscan (Optimism Sepolia)",rootUrl:"https://sepolia-optimistic.etherscan.io/"}},[C.ARBITRUM]:{chainId:C.ARBITRUM,type:ce.MAINNET,name:"arbitrum",title:"Arbitrum One",logoURI:`https://assets.sequence.info/images/networks/medium/${C.ARBITRUM}.webp`,blockExplorer:{name:"Arbiscan",rootUrl:"https://arbiscan.io/"}},[C.ARBITRUM_GOERLI]:{chainId:C.ARBITRUM_GOERLI,type:ce.TESTNET,name:"arbitrum-goerli",title:"Arbitrum Goerli",logoURI:`https://assets.sequence.info/images/networks/medium/${C.ARBITRUM_GOERLI}.webp`,testnet:!0,blockExplorer:{name:"Arbiscan (Goerli Testnet)",rootUrl:"https://testnet.arbiscan.io/"},deprecated:!0},[C.ARBITRUM_SEPOLIA]:{chainId:C.ARBITRUM_SEPOLIA,type:ce.TESTNET,name:"arbitrum-sepolia",title:"Arbitrum Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${C.ARBITRUM_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Arbiscan (Sepolia Testnet)",rootUrl:"https://sepolia.arbiscan.io/"}},[C.ARBITRUM_NOVA]:{chainId:C.ARBITRUM_NOVA,type:ce.MAINNET,name:"arbitrum-nova",title:"Arbitrum Nova",logoURI:`https://assets.sequence.info/images/networks/medium/${C.ARBITRUM_NOVA}.webp`,blockExplorer:{name:"Arbiscan Nova",rootUrl:"https://nova.arbiscan.io/"}},[C.AVALANCHE]:{chainId:C.AVALANCHE,type:ce.MAINNET,name:"avalanche",title:"Avalanche",logoURI:`https://assets.sequence.info/images/networks/medium/${C.AVALANCHE}.webp`,blockExplorer:{name:"Snowtrace",rootUrl:"https://subnets.avax.network/c-chain/"}},[C.AVALANCHE_TESTNET]:{chainId:C.AVALANCHE_TESTNET,type:ce.TESTNET,name:"avalanche-testnet",title:"Avalanche Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${C.AVALANCHE_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Snowtrace (Testnet)",rootUrl:"https://subnets-test.avax.network/c-chain/"}},[C.GNOSIS]:{chainId:C.GNOSIS,type:ce.MAINNET,name:"gnosis",title:"Gnosis Chain",logoURI:`https://assets.sequence.info/images/networks/medium/${C.GNOSIS}.webp`,blockExplorer:{name:"Gnosis Chain Explorer",rootUrl:"https://blockscout.com/xdai/mainnet/"}},[C.BASE]:{chainId:C.BASE,type:ce.MAINNET,name:"base",title:"Base (Coinbase)",logoURI:`https://assets.sequence.info/images/networks/medium/${C.BASE}.webp`,blockExplorer:{name:"Base Explorer",rootUrl:"https://basescan.org/"}},[C.BASE_GOERLI]:{chainId:C.BASE_GOERLI,type:ce.TESTNET,name:"base-goerli",title:"Base Goerli",logoURI:`https://assets.sequence.info/images/networks/medium/${C.BASE_GOERLI}.webp`,testnet:!0,blockExplorer:{name:"Base Goerli Explorer",rootUrl:"https://goerli.basescan.org/"},deprecated:!0},[C.BASE_SEPOLIA]:{chainId:C.BASE_SEPOLIA,type:ce.TESTNET,name:"base-sepolia",title:"Base Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${C.BASE_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Base Sepolia Explorer",rootUrl:"https://base-sepolia.blockscout.com/"}},[C.HOMEVERSE]:{chainId:C.HOMEVERSE,type:ce.MAINNET,name:"homeverse",title:"Oasys Homeverse",logoURI:`https://assets.sequence.info/images/networks/medium/${C.HOMEVERSE}.webp`,blockExplorer:{name:"Oasys Homeverse Explorer",rootUrl:"https://explorer.oasys.homeverse.games/"}},[C.HOMEVERSE_TESTNET]:{chainId:C.HOMEVERSE_TESTNET,type:ce.TESTNET,name:"homeverse-testnet",title:"Oasys Homeverse Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${C.HOMEVERSE_TESTNET}.webp`,testnet:!0,blockExplorer:{name:"Oasys Homeverse Explorer (Testnet)",rootUrl:"https://explorer.testnet.oasys.homeverse.games/"}},[C.XAI]:{chainId:C.XAI,type:ce.MAINNET,name:"xai",title:"Xai",logoURI:`https://assets.sequence.info/images/networks/medium/${C.XAI}.webp`,blockExplorer:{name:"Xai Explorer",rootUrl:"https://explorer.xai-chain.net/"}},[C.XAI_SEPOLIA]:{chainId:C.XAI_SEPOLIA,type:ce.TESTNET,name:"xai-sepolia",title:"Xai Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${C.XAI_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"Xai Sepolia Explorer",rootUrl:"https://testnet-explorer-v2.xai-chain.net/"}},[C.ASTAR_ZKEVM]:{chainId:C.ASTAR_ZKEVM,type:ce.MAINNET,name:"astar-zkevm",title:"Astar zkEVM",logoURI:`https://assets.sequence.info/images/networks/medium/${C.ASTAR_ZKEVM}.webp`,blockExplorer:{name:"Astar zkEVM Explorer",rootUrl:"https://astar-zkevm.explorer.startale.com/"}},[C.ASTAR_ZKYOTO]:{chainId:C.ASTAR_ZKYOTO,type:ce.TESTNET,name:"astar-zkyoto",title:"Astar zKyoto Testnet",logoURI:`https://assets.sequence.info/images/networks/medium/${C.ASTAR_ZKYOTO}.webp`,testnet:!0,blockExplorer:{name:"Astar zKyoto Explorer",rootUrl:"https://astar-zkyoto.blockscout.com/"}},[C.XR_SEPOLIA]:{chainId:C.XR_SEPOLIA,type:ce.TESTNET,name:"xr-sepolia",title:"XR Sepolia",logoURI:`https://assets.sequence.info/images/networks/medium/${C.XR_SEPOLIA}.webp`,testnet:!0,blockExplorer:{name:"XR Sepolia Explorer",rootUrl:"https://xr-sepolia-testnet.explorer.caldera.xyz/"}},[C.HARDHAT]:{chainId:C.HARDHAT,name:"hardhat",title:"Hardhat (local testnet)"},[C.HARDHAT_2]:{chainId:C.HARDHAT_2,name:"hardhat2",title:"Hardhat (local testnet)"}},Td=t=>q(fe(typeof t=="string"?mt(t):t));function Ui(){return Ui=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Ui.apply(this,arguments)}var Wt=function(t){return t[t.DEBUG=1]="DEBUG",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.DISABLED=5]="DISABLED",t}(Wt||{});class Cd{constructor(e){this.config=e,this.logLevel=void 0,this.configure(e)}configure(e){switch(this.config=Ui({},this.config,e),this.config.logLevel){case"DEBUG":this.logLevel=Wt.DEBUG;break;case"INFO":this.logLevel=Wt.INFO;break;case"WARN":this.logLevel=Wt.WARN;break;case"ERROR":this.logLevel=Wt.ERROR;break;case"DISABLED":this.logLevel=Wt.DISABLED;break;default:this.logLevel=Wt.INFO;break}this.config.silence===void 0&&(this.config.silence=!1)}debug(e,...r){this.config.silence!==!0&&this.logLevel===Wt.DEBUG&&console.log(e,...r)}info(e,...r){this.config.silence!==!0&&this.logLevel<=Wt.INFO&&console.log(e,...r)}warn(e,...r){this.config.silence!==!0&&this.logLevel<=Wt.WARN&&(console.warn(e,...r),this.config.onwarn&&this.config.onwarn(e,r))}error(e,...r){this.config.silence!==!0&&this.logLevel<=Wt.ERROR&&(console.error(e,...r),this.config.onerror&&this.config.onerror(e,r))}}new Cd({logLevel:"INFO",silence:!0});const Od=t=>{const e=Ui({},t.types);return delete e.EIP712Domain,Rt.hash(t.domain,e,t.message)},Pd=t=>q(Od(t));function ge(){return ge=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ge.apply(this,arguments)}const Rd=(t,e=!1,r=!1)=>{if(!t)throw new Error("invalid network config: empty config");const n=[];if(Array.isArray(t)?n.push(...t):n.push(t),n.length===0){if(e)throw new Error("invalid network config: empty config");return!1}const i=n.map(g=>g.chainId).sort(),s=i.filter((g,y)=>i.indexOf(g)!==y);if(s.length>0){if(e)throw new Error(`invalid network config: duplicate chainIds ${s}`);return!1}n.forEach(g=>g.name=g.name.toLowerCase());const o=n.map(g=>g.name).sort(),a=o.filter((g,y)=>o.indexOf(g)!==y);if(a.length>0){if(e)throw new Error(`invalid network config: duplicate network names ${a}`);return!1}let l=!1;for(let g=0;g<n.length;g++){const y=n[g];if((!y.rpcUrl||y.rpcUrl==="")&&!y.provider){if(e)throw new Error(`invalid network config for chainId ${y.chainId}: rpcUrl or provider must be provided`);return!1}if(!r&&!y.relayer){if(e)throw new Error(`invalid network config for chainId ${y.chainId}: relayer must be provided`);return!1}if(y.isDefaultChain){if(l){if(e)throw new Error(`invalid network config for chainId ${y.chainId}: DefaultChain is already set by another config`);return!1}l=!0}}if(!l){if(e)throw new Error("invalid network config: DefaultChain must be set");return!1}return!0},Bd=(t,e=!1)=>(Rd(t,!0,e),t),Ld=t=>Bd(Dd(t)),eo=(t,e)=>{if(typeof e=="string")if(e.startsWith("0x")){const r=O.from(e).toNumber();return t.find(n=>n.chainId===r)}else return t.find(r=>r.name===e||`${r.chainId}`===e);else{if(typeof e=="number")return t.find(r=>r.chainId===e);if(e.chainId)return t.find(r=>r.chainId===e.chainId);if(O.isBigNumber(e)){const r=e.toNumber();return t.find(n=>n.chainId===r)}else return}},Dd=t=>{if(!t)return[];const e=t.sort((n,i)=>n.chainId===i.chainId?0:n.chainId<i.chainId?-1:1),r=e.findIndex(n=>n.isDefaultChain);return r>0&&e.splice(0,0,e.splice(r,1)[0]),e},Mo=(t,e)=>typeof t=="string"?(e=e||{},t.replace(/\$\{\s*([$#@\-\d\w]+)\s*\}/gim,function(r,n){let i=e[n];return typeof i=="function"?i=i():i==null?i="":typeof i=="object"||typeof i=="symbol"?i=i.toString():i=i.valueOf(),i})):"",Ud=t=>Mo("https://${network}-indexer.sequence.app",{network:t}),Fd=t=>Mo("https://${network}-relayer.sequence.app",{network:t}),Hd=t=>Mo("https://nodes.sequence.app/${network}",{network:t}),be=t=>{const e=Hd(t);return{rpcUrl:e,relayer:{url:Fd(t),provider:{url:e}},indexerUrl:Ud(t)}},fu=Ld([ge({},ve[C.POLYGON],be("polygon"),{isDefaultChain:!0,isAuthChain:!0}),ge({},ve[C.MAINNET],be("mainnet")),ge({},ve[C.BSC],be("bsc")),ge({},ve[C.AVALANCHE],be("avalanche")),ge({},ve[C.ARBITRUM],be("arbitrum")),ge({},ve[C.ARBITRUM_NOVA],be("arbitrum-nova")),ge({},ve[C.OPTIMISM],be("optimism")),ge({},ve[C.OPTIMISM_SEPOLIA],be("optimism-sepolia")),ge({},ve[C.POLYGON_ZKEVM],be("polygon-zkevm")),ge({},ve[C.GNOSIS],be("gnosis")),ge({},ve[C.RINKEBY],be("rinkeby"),{disabled:!0}),ge({},ve[C.GOERLI],be("goerli"),{disabled:!0}),ge({},ve[C.SEPOLIA],be("sepolia")),ge({},ve[C.POLYGON_MUMBAI],be("mumbai"),{disabled:!0}),ge({},ve[C.POLYGON_AMOY],be("amoy")),ge({},ve[C.BSC_TESTNET],be("bsc-testnet")),ge({},ve[C.ARBITRUM_SEPOLIA],be("arbitrum-sepolia")),ge({},ve[C.BASE],be("base")),ge({},ve[C.BASE_SEPOLIA],be("base-sepolia")),ge({},ve[C.HOMEVERSE],be("homeverse")),ge({},ve[C.HOMEVERSE_TESTNET],be("homeverse-testnet")),ge({},ve[C.XAI],be("xai")),ge({},ve[C.XAI_SEPOLIA],be("xai-sepolia")),ge({},ve[C.AVALANCHE_TESTNET],be("avalanche-testnet")),ge({},ve[C.ASTAR_ZKEVM],be("astar-zkevm")),ge({},ve[C.ASTAR_ZKYOTO],be("astar-zkyoto")),ge({},ve[C.XR_SEPOLIA],be("xr-sepolia")),ge({},ve[C.HARDHAT],{rpcUrl:"http://localhost:8545",relayer:{url:"http://localhost:3000",provider:{url:"http://localhost:8545"}}}),ge({},ve[C.HARDHAT_2],{rpcUrl:"http://localhost:9545",relayer:{url:"http://localhost:3000",provider:{url:"http://localhost:9545"}}})]);function pt(){return pt=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},pt.apply(this,arguments)}var qd=Object.freeze({__proto__:null});function oi(t){return Zr(["bytes","uint256","address","bytes32"],["0x1901",t.chainId,t.address,t.digest])}function uu(t){return t.digest!==void 0&&t.chainId!==void 0&&t.address!==void 0}var zd=Object.freeze({__proto__:null,subdigestOf:oi,isSignedPayload:uu});const Gd="0x1626ba7e",jd=[{inputs:[{internalType:"bytes32",type:"bytes32"},{internalType:"bytes",type:"bytes"}],name:"isValidSignature",outputs:[{internalType:"bytes4",type:"bytes4"}],stateMutability:"view",type:"function"}];async function lu(t,e,r,n){return await new Io(t,jd,n).isValidSignature(e,r)===Gd}var Wd=Object.freeze({__proto__:null,isValidEIP1271Signature:lu});let kr=function(t){return t[t.EIP712=1]="EIP712",t[t.ETH_SIGN=2]="ETH_SIGN",t[t.WALLET_BYTES32=3]="WALLET_BYTES32",t}({});function Vd(t){const e=q(t),r=e[e.length-1];return r===kr.EIP712||r===kr.ETH_SIGN}function ai(t,e){const r=q(e),n=q(t),i=r[r.length-1],s=F(r.slice(0,32)),o=F(r.slice(32,64)),a=O.from(r.slice(64,65)).toNumber(),l={r:s,s:o,v:a};if(i===kr.EIP712)return Ri(n,l);if(i===kr.ETH_SIGN)return Ri(Rc(n),l);throw new Error(`Unsupported signature type: ${i}`)}function No(t,e,r,n){const i=q(r),s=i[i.length-1];if(s===kr.EIP712||s===kr.ETH_SIGN)return t===ai(e,r);if(s===kr.WALLET_BYTES32)return lu(t,F(e),i.slice(0,-1),n);throw new Error(`Unsupported signature type: ${s}`)}function Kd(t,e){const r=q(e);if(r.length===66)try{return ai(t,r)}catch{}}var $d=Object.freeze({__proto__:null,SigType:kr,canRecover:Vd,recoverSigner:ai,isValidSignature:No,tryRecoverSigner:Kd});let en=function(t){return t[t.EOASignature=0]="EOASignature",t[t.Address=1]="Address",t[t.DynamicSignature=2]="DynamicSignature",t}({});function ko(t){return t.address!==void 0&&!cu(t)}function cu(t){return t.signature!==void 0&&t.weight!==void 0&&t.isDynamic!==void 0}function hu(t){return t.threshold!==void 0&&t.signers!==void 0}function du(t){const e=q(t),r=e[0]<<8|e[1],n=[];for(let i=2;i<e.length;){const s=e[i++],o=e[i++];switch(s){case en.EOASignature:n.push({unrecovered:!0,weight:o,signature:F(e.slice(i,i+66)),isDynamic:!1}),i+=66;break;case en.Address:n.push({weight:o,address:Xe(F(e.slice(i,i+20)))}),i+=20;break;case en.DynamicSignature:const a=Xe(F(e.slice(i,i+20)));i+=20;const l=e[i]<<8|e[i+1];i+=2,n.push({unrecovered:!0,weight:o,signature:F(e.slice(i,i+l)),address:a,isDynamic:!0}),i+=l;break;default:throw new Error(`Unknown signature part type: ${s}`)}}return{version:1,threshold:r,signers:n}}function To(t){if(Or(t))return F(t);const{signers:e,threshold:r}=hu(t)?t:t.config,n=e.map(i=>{if(ko(i))return ue(["uint8","uint8","address"],[en.Address,i.weight,i.address]);if(i.isDynamic){const s=q(i.signature);return ue(["uint8","uint8","address","uint16","bytes"],[en.DynamicSignature,i.weight,i.address,s.length,s])}return ue(["uint8","uint8","bytes"],[en.EOASignature,i.weight,i.signature])});return ue(["uint16",...new Array(n.length).fill("bytes")],[r,...n])}async function gu(t,e,r){const n=oi(e),i=await Promise.all(t.signers.map(async s=>{if(ko(s))return s;if(s.isDynamic){if(!s.address)throw new Error("Dynamic signature part must have address");if(!No(s.address,n,s.signature,r))throw new Error(`Invalid dynamic signature part ${s.address}`);return{address:s.address,weight:s.weight,signature:s.signature}}else return{address:ai(n,s.signature),weight:s.weight,signature:s.signature}}));return{version:1,payload:e,subdigest:n,config:{version:1,threshold:t.threshold,signers:i}}}function Fn(t,e,r,n){if(r.length!==0)throw new Error("Explicit subdigests not supported on v1");let i=O.from(0);const s=t.signers.map(a=>{if(!e.has(a.address))return a;const l=e.get(a.address),g=q(l.signature);return i=i.add(a.weight),l.isDynamic||g.length!==66?pt({},a,{isDynamic:!0,signature:l.signature,address:a.address}):pt({},a,{isDynamic:!1,signature:l.signature})});return{encoded:To({version:1,threshold:t.threshold,signers:s}),weight:i}}const Co={decode:t=>du(t),encode:t=>To(t),trim:async t=>t,supportsNoChainId:!0,recover:(t,e,r)=>gu(t,e,r),encodeSigners:(t,e,r,n)=>Fn(t,e,r),hasEnoughSigningPower:(t,e)=>{const{weight:r}=Co.encodeSigners(t,e,[],0);return r.gte(t.threshold)},chainSignatures:(t,e)=>{throw new Error("Signature chaining not supported on v1")},hashSetImageHash:function(t){throw new Error("Image hash not supported on v1")},signaturesOf(t){return t.signers.filter(e=>e.signature!==void 0).map(e=>({address:e.address,signature:e.signature}))},signaturesOfDecoded:function(t){return t.signers.map(e=>e.signature).filter(e=>e!==void 0)}};var Jd=Object.freeze({__proto__:null,SignaturePartType:en,isAddressMember:ko,isUnrecoveredSignatureMember:cu,isUnrecoveredSignature:hu,decodeSignature:du,encodeSignature:To,recoverSignature:gu,encodeSigners:Fn,SignatureCoder:Co});const Oo={isWalletConfig:t=>t.version===1&&t.threshold!==void 0&&t.signers!==void 0,imageHashOf:t=>t.signers.reduce((e,r)=>fe(dr.encode(["bytes32","uint8","address"],[e,r.weight,r.address])),ue(["uint256"],[t.threshold])),hasSubdigest:(t,e)=>!1,isComplete:t=>!0,checkpointOf:t=>O.from(0),signersOf:t=>t.signers.map(e=>({address:e.address,weight:O.from(e.weight).toNumber()})),fromSimple:t=>{if(!ct.eq(t.checkpoint))throw new Error("v1 wallet config does not support checkpoint");if(t.subdigests&&t.subdigests.length>0)throw new Error("v1 wallet config does not support subdigests");return{version:1,threshold:t.threshold,signers:t.signers}},update:{isKindUsed:!0,buildTransaction:(t,e,r,n)=>{const i=new $t([...Lt.mainModule.abi,...Lt.mainModuleUpgradable.abi]),s=[];return(!n||n==="first")&&s.push({to:t,data:i.encodeFunctionData(i.getFunction("updateImplementation"),[r.mainModuleUpgradable]),gasLimit:0,delegateCall:!1,revertOnError:!0,value:0}),s.push({to:t,data:i.encodeFunctionData(i.getFunction("updateImageHash"),[Oo.imageHashOf(e)]),gasLimit:0,delegateCall:!1,revertOnError:!0,value:0}),{entrypoint:t,transactions:s}},decodeTransaction:function(t){throw new Error("Function not implemented.")}},toJSON:function(t){const e=t.signers.map(r=>({weight:O.from(r.weight).toString(),address:r.address}));return JSON.stringify({version:t.version,threshold:O.from(t.threshold).toString(),signers:e})},fromJSON:function(t){const e=JSON.parse(t),r=e.signers.map(n=>({weight:O.from(n.weight),address:n.address}));return{version:e.version,threshold:O.from(e.threshold),signers:r}},editConfig:function(t,e){var r;const n=t.signers.slice();if(e.checkpoint&&!ct.eq(e.checkpoint))throw new Error("v1 wallet config does not support checkpoint");if(e.add)for(const i of e.add)n.find(s=>s.address===i.address)||n.push({weight:i.weight,address:i.address});if(e.remove)for(const i of e.remove){const s=n.findIndex(o=>o.address===i);s>=0&&n.splice(s,1)}return{version:t.version,threshold:(r=e.threshold)!=null?r:t.threshold,signers:n}},buildStubSignature:function(t,e){const r=new Map;for(const[i,s]of e.entries()){r.set(i,{signature:s,isDynamic:!0});const{encoded:o,weight:a}=Fn(t,r,[]);if(a.gte(t.threshold))return o}const n=t.signers;for(const{address:i}of n.sort(({weight:s},{weight:o})=>O.from(s).sub(o).toNumber())){r.set(i,{signature:"0x4e82f02f388a12b5f9d29eaf2452dd040c0ee5804b4e504b4dd64e396c6c781f2c7624195acba242dd825bfd25a290912e3c230841fd55c9a734c4de8d9899451b02",isDynamic:!1});const{encoded:o,weight:a}=Fn(t,r,[]);if(a.gte(t.threshold))return o}return Fn(t,r,[]).encoded}};var Yd=Object.freeze({__proto__:null,ConfigCoder:Oo});const pu=1,mu={version:pu,factory:"0xf9D09D634Fb818b05149329C1dcCFAeA53639d96",guestModule:"0x02390F3E6E5FD1C6786CB78FD3027C117a9955A7",mainModule:"0xd01F11855bCcb95f88D7A48492F66410d4637313",mainModuleUpgradable:"0x7EFE6cE415956c5f80C6530cC6cc81b4808F6118",walletCreationCode:"0x603a600e3d39601a805130553df3363d3d373d3d3d363d30545af43d82803e903d91601857fd5bf3"};var Yr=Object.freeze({__proto__:null,config:Yd,signature:Jd,version:pu,DeployedWalletContext:mu});const Po="0x8713a7c4465f6fbee2b6e9d6646d1d9f83fec929edfc4baf661f3c865bdd04d1";function vu(t){return fe(yu(t))}function yu(t){return ue(["bytes32","bytes32"],[Po,t])}function bu(t){const e=q(t);if(e.length===64&&F(e.slice(0,32))===Po)return F(e.slice(32,64))}function Qd(t){return bu(t)!==void 0}var Xd=Object.freeze({__proto__:null,SetImageHashPrefix:Po,hashSetImageHash:vu,messageSetImageHash:yu,decodeMessageSetImageHash:bu,isMessageSetImageHash:Qd});let lt=function(t){return t[t.Legacy=0]="Legacy",t[t.Dynamic=1]="Dynamic",t[t.NoChainIdDynamic=2]="NoChainIdDynamic",t[t.Chained=3]="Chained",t}({}),nt=function(t){return t[t.Signature=0]="Signature",t[t.Address=1]="Address",t[t.DynamicSignature=2]="DynamicSignature",t[t.Node=3]="Node",t[t.Branch=4]="Branch",t[t.Subdigest=5]="Subdigest",t[t.Nested=6]="Nested",t}({});const Fi=66;function fn(t){return t.left!==void 0&&t.right!==void 0}function On(t){return t.tree!==void 0}function fi(t){return t.unrecovered&&t.signature!==void 0&&t.isDynamic!==void 0}function Hi(t){let e=q(t),r;const n=(i,s)=>i?i.right?{left:i,right:s}:{left:i.left,right:s}:{left:s};for(;e.length>0;){const i=e[0];switch(e=e.slice(1),i){case nt.Signature:{const s=e[0],o=F(e.slice(1,Fi+1));r=n(r,{signature:o,weight:s,unrecovered:!0,isDynamic:!1}),e=e.slice(Fi+1)}break;case nt.Address:{const s=e[0],o=Xe(F(e.slice(1,21)));r=n(r,{address:o,weight:s}),e=e.slice(21)}break;case nt.DynamicSignature:{const s=e[0],o=Xe(F(e.slice(1,21))),a=e[21]<<16|e[22]<<8|e[23],l=F(e.slice(24,24+a));r=n(r,{address:o,signature:l,weight:s,unrecovered:!0,isDynamic:!0}),e=e.slice(24+a)}break;case nt.Node:{const s=F(e.slice(0,32));r=n(r,{nodeHash:s}),e=e.slice(32)}break;case nt.Branch:{const s=e[0]<<16|e[1]<<8|e[2],o=Hi(e.slice(3,3+s));r=n(r,o),e=e.slice(3+s)}break;case nt.Subdigest:{const s=F(e.slice(0,32));r=n(r,{subdigest:s}),e=e.slice(32)}break;case nt.Nested:{const s=e[0],o=e[1]<<8|e[2],a=e[3]<<16|e[4]<<8|e[5],l=Hi(e.slice(6,6+a));r=n(r,{weight:s,threshold:o,tree:l}),e=e.slice(6+a)}break;default:throw new Error(`Unknown signature part type: ${i}: ${F(e)}`)}}if(!r)throw new Error("Empty signature tree");return r.right?r:r.left}class wu extends Error{constructor(e){super(`Invalid signature leaf: ${JSON.stringify(e)}`),this.leaf=e}}async function tn(t,e,r){if(fn(t)){const[n,i]=await Promise.all([tn(t.left,e,r),tn(t.right,e,r)]);return{left:n,right:i}}if(On(t))return{weight:t.weight,threshold:t.threshold,tree:await tn(t.tree,e,r)};if(fi(t))if(t.isDynamic){if(!t.address)throw new Error("Dynamic signature leaf without address");if(!await No(t.address,e,t.signature,r))throw new wu(t);return{weight:t.weight,address:t.address,signature:t.signature,subdigest:e}}else return{weight:t.weight,address:ai(e,t.signature),signature:t.signature,subdigest:e};return t}const yt={concat:(t,e)=>ue(["bytes","bytes"],[t,e]),node:t=>ue(["uint8","bytes32"],[nt.Node,t]),branch:t=>{const e=q(t);return ue(["uint8","uint24","bytes"],[nt.Branch,e.length,e])},nested:(t,e,r)=>{const n=q(r);return ue(["uint8","uint8","uint16","uint24","bytes"],[nt.Nested,t,e,n.length,n])},subdigest:t=>ue(["uint8","bytes32"],[nt.Subdigest,t]),signature:(t,e)=>ue(["uint8","uint8","bytes"],[nt.Signature,t,e]),dynamicSignature:(t,e,r)=>{const n=q(r);return ue(["uint8","uint8","address","uint24","bytes"],[nt.DynamicSignature,t,e,n.length,n])},address:(t,e)=>ue(["uint8","uint8","address"],[nt.Address,t,e])};function Hn(t,e,r,n,i={}){const s=qn(t.tree,e,r,i);return O.from(n).isZero()?{encoded:ue(["uint8","uint16","uint32","bytes"],[lt.NoChainIdDynamic,t.threshold,t.checkpoint,s.encoded]),weight:s.weight}:O.from(t.threshold).gt(255)?{encoded:ue(["uint8","uint16","uint32","bytes"],[lt.Dynamic,t.threshold,t.checkpoint,s.encoded]),weight:s.weight}:{encoded:ue(["uint8","uint8","uint32","bytes"],[lt.Legacy,t.threshold,t.checkpoint,s.encoded]),weight:s.weight}}function qn(t,e,r,n={}){const i=!n.disableTrim;if(Yt(t)){const s=qn(t.left,e,r),o=qn(t.right,e,r),a=Et(t.left),l=Et(t.right);return i&&s.weight.eq(0)&&o.weight.eq(0)&&!a&&!l?{encoded:yt.node(Bt(t)),weight:ct}:i&&o.weight.eq(0)&&!l?{encoded:yt.concat(s.encoded,yt.node(Bt(t.right))),weight:s.weight}:i&&s.weight.eq(0)&&!a?{encoded:yt.concat(yt.node(Bt(t.left)),yt.branch(o.encoded)),weight:o.weight}:{encoded:yt.concat(s.encoded,yt.branch(o.encoded)),weight:s.weight.add(o.weight)}}if(br(t)){const s=qn(t.tree,e,r);return i&&s.weight.eq(0)?{encoded:yt.node(Bt(t)),weight:ct}:{encoded:yt.nested(t.weight,t.threshold,s.encoded),weight:s.weight}}if(wr(t))return{encoded:yt.node(Bt(t)),weight:ct};if(yr(t)){const s=r.includes(t.subdigest);return{encoded:yt.subdigest(t.subdigest),weight:s?ff:ct}}if(Et(t))if(e.has(t.address)){const o=e.get(t.address),a=o.signature;return n.forceDynamicEncoding||o.isDynamic?{encoded:yt.dynamicSignature(t.weight,t.address,a),weight:O.from(t.weight)}:{encoded:yt.signature(t.weight,a),weight:O.from(t.weight)}}else return{encoded:yt.address(t.weight,t.address),weight:ct};throw new Error(`Invalid topology - unknown error: ${JSON.stringify(t)}`)}function Ro(t){return Lo(t)?Ro(t.suffix[t.suffix.length-1]):t.config}function Bo(t){return t.type!==void 0&&t.decoded!==void 0&&t.version!==void 0&&t.version===2}function ui(t){return t.suffix!==void 0&&Array.isArray(t.suffix)&&t.suffix.every(Bo)}function Au(t){return t.type!==void 0&&t.config!==void 0&&t.digest!==void 0&&t.version!==void 0&&t.version===2}function Lo(t){return t.chain!==void 0&&Array.isArray(t.chain)&&t.chain.every(Au)}function ts(t){const e=q(t),r=e[0];switch(r){case lt.Legacy:return{version:2,type:lt.Legacy,decoded:Si(e)};case lt.Dynamic:return{version:2,type:lt.Dynamic,decoded:Si(e.slice(1))};case lt.NoChainIdDynamic:return{version:2,type:lt.NoChainIdDynamic,decoded:Si(e.slice(1))};case lt.Chained:return Eu(e);default:throw new Error(`Invalid signature type: ${r}`)}}function Si(t){const e=q(t),r=e[0]<<8|e[1],n=e[2]<<24|e[3]<<16|e[4]<<8|e[5],i=Hi(e.slice(6));return{threshold:r,checkpoint:n,tree:i}}function Eu(t){const e=q(t),r=e[0];if(r!==lt.Chained)throw new Error(`Expected chained signature type: ${r}`);const n=[];let i=1;for(;i<e.length;){const a=e[i]<<16|e[i+1]<<8|e[i+2];i+=3;const l=ts(e.slice(i,i+a));n.push(l),i+=a}const s=n[0];if(ui(s))throw new Error("Expected first link of chained signature to be a simple signature (not chained)");const o=n.slice(1);return pt({},s,{suffix:o})}function xu(t){return ue(["bytes32","bytes32"],[Zr(["string"],["SetImageHash(bytes32 imageHash)"]),t])}async function Do(t,e,r){const n=e.subdigest===void 0?e:void 0;t.type===lt.NoChainIdDynamic&&n&&(n.chainId=0);const s=n?oi(n):e.subdigest;if(!ui(t)){const y=await tn(t.decoded.tree,s,r);return{version:2,type:t.type,subdigest:s,config:pt({version:2},t.decoded,{tree:y})}}if(!uu(n))throw new Error("Chained signature recovery requires detailed signed payload, subdigest is not enough");const o=[];let a=n;for(const y of[pt({},t,{suffix:void 0}),...t.suffix]){const A=await Do(y,a,r);o.unshift(A);const I=xu(Fo(Ro(A)));a=pt({},a,{message:I,digest:fe(I)})}const l=o[0],g=o.slice(1);return pt({},l,{suffix:g})}function rs(t,e){const n=[t,...e||[]].map(s=>q(Tr(s))),i=ue(n.map(()=>["uint24","bytes"]).flat(),n.map(s=>[s.length,s]).flat());return ue(["uint8","bytes"],[lt.Chained,i])}function Tr(t){if(Or(t))return F(t);if(ui(t)||Lo(t))return rs(Tr(t),(t.suffix||[]).map(Tr));const e=Bo(t)?t.decoded:t.config;switch(t.type){case lt.Legacy:if(O.from(e.threshold).gt(255))throw new Error(`Legacy signature threshold is too large: ${e.threshold} (max 255)`);return to(e);case lt.NoChainIdDynamic:case lt.Dynamic:return ue(["uint8","bytes"],[t.type,to(e)]);case lt.Chained:throw new Error("Unreachable code: Chained signature should be handled above");default:throw new Error(`Invalid signature type: ${t.type}`)}}function to(t){return ue(["uint16","uint32","bytes"],[t.threshold,t.checkpoint,zn(t.tree)])}function zn(t){if(Yt(t)||fn(t)){const e=q(zn(t.right)),r=q(zn(t.left));return Yt(t.right)||fn(t.right)?ue(["bytes","uint8","uint24","bytes"],[r,nt.Branch,e.length,e]):ue(["bytes","bytes"],[r,e])}if(br(t)||On(t)){const e=q(zn(t.tree));return ue(["uint8","uint8","uint16","uint24","bytes"],[nt.Nested,t.weight,t.threshold,e.length,e])}if(fi(t)||Et(t)&&t.signature!==void 0){const e=q(t.signature);if(t.isDynamic||e.length!==Fi){if(!t.address)throw new Error("Dynamic signature leaf must have address");return ue(["uint8","uint8","address","uint24","bytes"],[nt.DynamicSignature,t.weight,t.address,e.length,e])}else return ue(["uint8","uint8","bytes"],[nt.Signature,t.weight,e])}if(Et(t))return ue(["uint8","uint8","address"],[nt.Address,t.weight,t.address]);if(wr(t))return ue(["uint8","bytes32"],[nt.Node,t.nodeHash]);if(yr(t))return ue(["uint8","bytes32"],[nt.Subdigest,t.subdigest]);throw new Error(`Unknown signature tree type: ${t}`)}function Gn(t){return Yt(t)?[...Gn(t.left),...Gn(t.right)]:br(t)?Gn(t.tree):Et(t)&&t.signature?[{address:t.address,signature:t.signature}]:[]}function jn(t){return fn(t)?[...jn(t.left),...jn(t.right)]:On(t)?jn(t.tree):fi(t)?[t.signature]:[]}function Ii(t){return fn(t)?[...Ii(t.left),...Ii(t.right)]:On(t)?Ii(t.tree):yr(t)?[t.subdigest]:[]}async function qi(t){const e=typeof t=="string"?ts(t):t;if(ui(e)){const n=await Promise.all([qi(pt({},e,{suffix:void 0})),...e.suffix.map(i=>qi(i))]);return rs(n[0],n.slice(1))}const{trimmed:r}=await Wn(e.decoded.tree);return Tr(pt({},e,{decoded:pt({},e.decoded,{tree:r})}))}async function Wn(t,e=!0){if(fn(t)){const[r,n]=await Promise.all([Wn(t.left),Wn(t.right)]);if(r.weight===0&&n.weight===0)try{const i=await tn(t,Ws,void 0);return{weight:0,trimmed:{nodeHash:Bt(i)}}}catch{}else return{weight:r.weight+n.weight,trimmed:{left:r.trimmed,right:n.trimmed}}}if(On(t)){const r=await Wn(t.tree);if(r.weight===0)try{const n=await tn(t,Ws,void 0);return{weight:0,trimmed:{nodeHash:Bt(n)}}}catch{}return{weight:r.weight,trimmed:{weight:t.weight,threshold:t.threshold,tree:r.trimmed}}}return wr(t)&&Iu(t.nodeHash)?{weight:0,trimmed:pt({},Su(t.nodeHash))}:fi(t)||Et(t)&&t.signature!==void 0?{weight:O.from(t.weight).toNumber(),trimmed:t}:!e&&yr(t)?{weight:1/0,trimmed:t}:{weight:0,trimmed:t}}const ns={decode:t=>ts(t),encode:t=>Tr(t),trim:t=>qi(t),supportsNoChainId:!0,recover:(t,e,r)=>Do(t,e,r),encodeSigners:(t,e,r,n)=>Hn(t,e,r,n),hasEnoughSigningPower:(t,e)=>{const{weight:r}=ns.encodeSigners(t,e,[],0);return r.gte(t.threshold)},chainSignatures:(t,e)=>{const r=e.reverse(),n=Or(t)?t:Tr(t),i=r.map(s=>Or(s)?s:Tr(s));return rs(n,i)},hashSetImageHash:function(t){return vu(t)},signaturesOf(t){return Gn(t.tree)},signaturesOfDecoded:function(t){return jn(t.decoded.tree)}};var Zd=Object.freeze({__proto__:null,SignatureType:lt,SignaturePartType:nt,SignaturePartTypeLength:Fi,isUnrecoveredNode:fn,isUnrecoveredNestedLeaf:On,isUnrecoveredSignatureLeaf:fi,decodeSignatureTree:Hi,InvalidSignatureLeafError:wu,recoverTopology:tn,partEncoder:yt,encodeSigners:Hn,encodeTree:qn,deepestConfigOfSignature:Ro,isUnrecoveredSignature:Bo,isUnrecoveredChainedSignature:ui,isSignature:Au,isChainedSignature:Lo,decodeSignature:ts,decodeSignatureBody:Si,decodeChainedSignature:Eu,setImageHashStruct:xu,recoverSignature:Do,encodeChain:rs,encodeSignature:Tr,encodeSignatureBody:to,encodeSignatureTree:zn,signaturesOf:Gn,signaturesOfDecoded:jn,subdigestsOfDecoded:Ii,trimSignature:qi,trimUnrecoveredTree:Wn,SignatureCoder:ns});function Et(t){return t.address!==void 0&&t.weight!==void 0}function yr(t){return t.subdigest!==void 0&&t.address===void 0}function Vn(t){return Yt(t)?JSON.stringify({left:Vn(t.left),right:Vn(t.right)}):br(t)?JSON.stringify({weight:O.from(t.weight).toString(),threshold:O.from(t.threshold).toString(),tree:Vn(t.tree)}):Et(t)?JSON.stringify({address:t.address,weight:O.from(t.weight).toString()}):JSON.stringify(t)}function Kn(t){const e=typeof t=="string"?JSON.parse(t):t;return e.left!==void 0&&e.right!==void 0?{left:Kn(e.left),right:Kn(e.right)}:e.weight!==void 0&&e.threshold!==void 0&&e.tree!==void 0?{weight:O.from(e.weight),threshold:O.from(e.threshold),tree:Kn(e.tree)}:e.address!==void 0&&e.weight!==void 0?{address:e.address,weight:O.from(e.weight)}:e}function br(t){return t.tree!==void 0&&t.weight!==void 0&&t.threshold!==void 0}function wr(t){return t.nodeHash!==void 0}function Uo(t){return Et(t)||yr(t)||br(t)||wr(t)}function Yt(t){return t.left!==void 0&&t.right!==void 0}function eg(t){return Yt(t)||Uo(t)}function _u(t){return ue(["uint96","address"],[t.weight,t.address])}function Su(t){const e=q(t);if(e.length!==32)throw new Error("Invalid encoded string length");const r=O.from(e.slice(0,12)),n=Xe(F(e.slice(12)));return{weight:r,address:n}}function Iu(t){const e=q(t);return e.length!==32?!1:e.slice(0,11).every(n=>n===0)}function Bt(t){if(Et(t))return _u(t);if(yr(t))return Zr(["string","bytes32"],[`Sequence static digest:
`,t.subdigest]);if(br(t)){const e=Bt(t.tree);return Zr(["string","bytes32","uint256","uint256"],[`Sequence nested config:
`,e,t.threshold,t.weight])}return wr(t)?t.nodeHash:Zr(["bytes32","bytes32"],[Bt(t.left),Bt(t.right)])}function tg(t){const e=[];let r=t;for(;!Uo(r);)e.unshift(r.right),r=r.left;return e.unshift(r),e}function rg(t){return t.threshold!==void 0&&t.checkpoint!==void 0&&t.tree!==void 0&&t.version!==void 0&&t.version===2}function Fo(t){return Zr(["bytes32","uint256"],[Zr(["bytes32","uint256"],[Bt(t.tree),t.threshold]),t.checkpoint])}function Mu(t){return t.threshold!==void 0&&t.weight!==void 0&&t.members!==void 0}function wn(t){return Et(t)||yr(t)?[t]:br(t)?[{threshold:t.threshold,weight:t.weight,members:wn(t.tree)}]:wr(t)?[]:[...wn(t.left),...wn(t.right)]}function ro(t){return wr(t)?!0:Yt(t)?ro(t.left)||ro(t.right):!1}function ng(t){return{threshold:t.threshold,checkpoint:t.checkpoint,members:wn(t.tree)}}const Nu=(t,e)=>t.map(r=>Mu(r)?{tree:e(r.members),threshold:r.threshold,weight:r.weight}:r);function Ho(t){if(t.length===0)throw new Error("Empty members array");return Nu(t,Ho).reduce((r,n)=>({left:r,right:n}))}function qo(t){if(t.length===0)throw new Error("Empty members array");const e=Nu(t,qo);for(let r=e.length;r>1;r=r/2)for(let n=0;n<r/2;n++){const i=n*2,s=i+1;s>=r?e[n]=e[i]:e[n]={left:e[i],right:e[s]}}return e[0]}function zo(t){return t.length>8?qo(t):Ho(t)}function ku(t,e=zo){return{version:2,threshold:t.threshold,checkpoint:t.checkpoint,tree:e(t.members)}}function zi(t,e){return yr(t)?t.subdigest===e:Yt(t)?zi(t.left,e)||zi(t.right,e):!1}function no(t){const e=[t],r=new Set;for(;e.length>0;){const n=e.pop();br(n)?e.push(n.tree):Yt(n)?(e.push(n.left),e.push(n.right)):Et(n)&&r.add({address:n.address,weight:O.from(n.weight).toNumber()})}return Array.from(r)}function Gi(t){return Yt(t)?Gi(t.left)&&Gi(t.right):!wr(t)}const is={isWalletConfig:t=>t.version===2&&t.threshold!==void 0&&t.tree!==void 0,imageHashOf:t=>Fo(t),hasSubdigest:(t,e)=>zi(t.tree,e),checkpointOf:t=>O.from(t.checkpoint),signersOf:t=>no(t.tree),fromSimple:t=>{var e;return ku(pt({},t,{members:[...t.signers,...((e=t.subdigests)!=null?e:[]).map(r=>({subdigest:r}))]}))},isComplete:t=>Gi(t.tree),update:{isKindUsed:!0,buildTransaction:(t,e,r,n)=>{const i=new $t(Lt.mainModuleUpgradable.abi);return{entrypoint:t,transactions:[{to:t,data:i.encodeFunctionData(i.getFunction("updateImageHash"),[is.imageHashOf(e)]),gasLimit:0,delegateCall:!1,revertOnError:!0,value:0}]}},decodeTransaction:function(t){var e,r,n,i;const s=new $t(Lt.mainModuleUpgradable.abi);if(t.transactions.length!==1)throw new Error("Invalid transaction bundle, expected 1 transaction");const o=t.transactions[0].data;if(!o)throw new Error("Invalid transaction bundle, expected data");const a=s.decodeFunctionData(s.getFunction("updateImageHash"),o);if(!a)throw new Error("Invalid transaction bundle, expected valid data");if(t.transactions[0].to!==t.entrypoint)throw new Error("Invalid transaction bundle, expected to be sent to entrypoint");if(t.transactions[0].delegateCall)throw new Error("Invalid transaction bundle, expected not to be a delegateCall");if(!t.transactions[0].revertOnError)throw new Error("Invalid transaction bundle, expected revertOnError");if(!ct.eq((e=(r=t.transactions[0])==null?void 0:r.value)!=null?e:0))throw new Error("Invalid transaction bundle, expected value to be 0");if(!ct.eq((n=(i=t.transactions[0])==null?void 0:i.gasLimit)!=null?n:0))throw new Error("Invalid transaction bundle, expected value to be 0");return{address:t.entrypoint,newImageHash:a[0],kind:void 0}}},toJSON:function(t){return JSON.stringify({version:t.version,threshold:O.from(t.threshold).toString(),checkpoint:O.from(t.checkpoint).toString(),tree:Vn(t.tree)})},fromJSON:function(t){const e=JSON.parse(t);return{version:e.version,threshold:O.from(e.threshold),checkpoint:O.from(e.checkpoint),tree:Kn(e.tree)}},editConfig:function(t,e){var r,n;const i=wn(t.tree);if(e.add)for(const s of e.add)i.find(o=>Et(o)&&o.address===s.address)||i.push({address:s.address,weight:s.weight});if(e.remove)for(const s of e.remove){const o=i.findIndex(a=>Et(a)&&a.address===s);o>=0&&i.splice(o,1)}return{version:t.version,threshold:(r=e.threshold)!=null?r:t.threshold,checkpoint:(n=e.checkpoint)!=null?n:t.checkpoint,tree:zo(i)}},buildStubSignature:function(t,e){const r=new Map;for(const[i,s]of e.entries()){r.set(i,{signature:s,isDynamic:!0});const{encoded:o,weight:a}=Hn(t,r,[],0);if(a.gte(t.threshold))return o}const n=no(t.tree);for(const{address:i}of n.sort(({weight:s},{weight:o})=>s-o)){r.set(i,{signature:"0x4e82f02f388a12b5f9d29eaf2452dd040c0ee5804b4e504b4dd64e396c6c781f2c7624195acba242dd825bfd25a290912e3c230841fd55c9a734c4de8d9899451b02",isDynamic:!1});const{encoded:o,weight:a}=Hn(t,r,[],0);if(a.gte(t.threshold))return o}return Hn(t,r,[],0).encoded}};var ig=Object.freeze({__proto__:null,isSignerLeaf:Et,isSubdigestLeaf:yr,topologyToJSON:Vn,topologyFromJSON:Kn,isNestedLeaf:br,isNodeLeaf:wr,isLeaf:Uo,isNode:Yt,isTopology:eg,encodeSignerLeaf:_u,decodeSignerLeaf:Su,isEncodedSignerLeaf:Iu,hashNode:Bt,leftFace:tg,isWalletConfig:rg,imageHash:Fo,isSimpleNestedMember:Mu,topologyToMembers:wn,hasUnknownNodes:ro,toSimpleWalletConfig:ng,legacyTopologyBuilder:Ho,merkleTopologyBuilder:qo,optimized2SignersTopologyBuilder:zo,toWalletConfig:ku,hasSubdigest:zi,signersOf:no,isComplete:Gi,ConfigCoder:is}),sg=Object.freeze({__proto__:null});const og={config:is,signature:ns},Tu=2,Cu={version:Tu,factory:"0xFaA5c0b14d1bED5C888Ca655B9a8A5911F78eF4A",guestModule:"0xfea230Ee243f88BC698dD8f1aE93F8301B6cdfaE",mainModule:"0xfBf8f1A5E00034762D928f46d438B947f5d4065d",mainModuleUpgradable:"0x4222dcA3974E39A8b41c411FeDDE9b09Ae14b911",walletCreationCode:"0x603a600e3d39601a805130553df3363d3d373d3d3d363d30545af43d82803e903d91601857fd5bf3"};var ie=Object.freeze({__proto__:null,config:ig,signature:Zd,context:sg,chained:Xd,coders:og,version:Tu,DeployedWalletContext:Cu});function io(t,e){const r=fe(ue(["bytes","bytes32"],[t.walletCreationCode,it(t.mainModule,32)])),n=fe(ue(["bytes1","address","bytes32","bytes32"],["0xff",t.factory,e,r]));return Xe(gt(n,12))}async function ag(t,e,r,n,i,s){return(await Promise.all(kg.map(async a=>{try{const l=a.signature.SignatureCoder.decode(F(r)),g=await a.signature.SignatureCoder.recover(l,{address:t,digest:F(e),chainId:n},i),y=a.config.ConfigCoder.imageHashOf(g.config);if(io(s[a.version],y).toLowerCase()===t.toLowerCase())return!0;const I=await a.signature.SignatureCoder.recover(l,{address:t,digest:F(e),chainId:n},i),M=a.config.ConfigCoder.imageHashOf(I.config);return io(s[a.version],M).toLowerCase()===t.toLowerCase()}catch{}return!1}))).some(a=>a)}function fg(t){const e=Object.keys(t).length;for(let r=1;r<=e;r++){const n=t[r];if(!n||n.version!==r)return!1}return!0}function ug(t){const e=Object.keys(t).length;return t[e]}const lg={1:mu,2:Cu};var cg=Object.freeze({__proto__:null,addressOf:io,isValidCounterfactual:ag,isValidVersionedContext:fg,latestContext:ug,defaultContexts:lg});const ss=`tuple(
  bool delegateCall,
  bool revertOnError,
  uint256 gasLimit,
  address target,
  uint256 value,
  bytes data
)[]`;function hg(t,e,r,n){return pt({},t,{chainId:r,intent:{id:n,wallet:e}})}function dg(t){return fe(dr.encode(["address","uint256","bytes32"],[t.intent.wallet,t.chainId,t.intent.id]))}function gg(t){const e=dr.decode(["uint256",ss],t);if(e.length!==2||!e[0]||!e[1])throw new Error("Invalid meta transaction data");return[e[0],e[1]]}function Ou(t,e){return dr.encode(["uint256",ss],[t,ti(e)])}function Pu(t,e){return fe(Ou(t,e))}function pg(t,e,r,n){return oi({address:t,chainId:e,digest:Pu(r,n)})}function mg(t,e,r){return oi({address:t,chainId:e,digest:fe(dr.encode(["string",ss],["guest:",ti(r)]))})}function Ru(t,e){return e.map(r=>Go(t,r))}function Go(t,e){if(e.to&&e.to!==wo)return{nonce:e.nonce,transaction:{delegateCall:!1,revertOnError:!1,gasLimit:e.gasLimit||0,to:e.to,value:e.value||0,data:e.data||"0x"}};{const r=new $t(Lt.mainModule.abi),n=r.encodeFunctionData(r.getFunction("createContract"),[e.data]);return{nonce:e.nonce,transaction:{delegateCall:!1,revertOnError:!1,gasLimit:e.gasLimit,to:t,value:e.value||0,data:n}}}}function os(t){return t.delegateCall!==void 0||t.revertOnError!==void 0}function Bu(t){return t.every(os)}function ti(t){return t.map(e=>{var r;return{delegateCall:e.delegateCall===!0,revertOnError:e.revertOnError===!0,gasLimit:e.gasLimit!==void 0?e.gasLimit:ct,target:(r=e.to)!=null?r:wo,value:e.value!==void 0?e.value:ct,data:e.data!==void 0?e.data:[]}})}function vg(t){return t.map(e=>({delegateCall:e.delegateCall,revertOnError:e.revertOnError,gasLimit:e.gasLimit,to:e.target,value:e.value,data:e.data}))}function yg(t,e){const r=O.from(t),n=O.from(e),i=af.pow(O.from(96));if(!n.div(i).eq(ct))throw new Error("Space already encoded");return n.add(r.mul(i))}function bg(t){const e=O.from(t),r=af.pow(O.from(96));return[e.div(r),e.mod(r)]}function wg(t,e){return Array.isArray(e)?Bu(e)?e:Ru(t,e).map(n=>n.transaction):os(e)?[e]:[Go(t,e).transaction]}function Lu(t){return t!==void 0&&t.entrypoint!==void 0&&t.chainId!==void 0&&t.transactions!==void 0&&t.nonce!==void 0&&t.intent!==void 0&&t.intent.id!==void 0&&t.intent.wallet!==void 0&&Array.isArray(t.transactions)&&t.transactions.reduce((e,r)=>e&&os(r),!0)}function Du(t){return t!==void 0&&t.signature!==void 0&&t.signature!==""&&Lu(t)}function Ag(t){const e=new $t(Lt.mainModule.abi);return e.encodeFunctionData(e.getFunction("execute"),Du(t)?[ti(t.transactions),t.nonce,t.signature]:[ti(t.transactions),0,[]])}const Uu="0x61c2926c",Fu=`tuple(
  bool delegateCall,
  bool revertOnError,
  uint256 gasLimit,
  address target,
  uint256 value,
  bytes data
)[]`,so=(t,e)=>{const r=[],n=new $t(Lt.mainModule.abi);for(const i of e){const s=q(i.data||"0x");if(i.to===t&&F(s.slice(0,4))===Uu){const o=s.slice(4),a=dr.decode([Fu],o)[0];r.push(...so(i.to,a.map(l=>pt({},l,{to:l.target}))))}else try{const o=n.decodeFunctionData("execute",s)[0],a=so(t,o.map(l=>pt({},l,{to:l.target})));r.push(...a)}catch{r.push(i)}}return r};var Eg=Object.freeze({__proto__:null,MetaTransactionsType:ss,intendTransactionBundle:hg,intendedTransactionID:dg,unpackMetaTransactionsData:gg,packMetaTransactionsData:Ou,digestOfTransactions:Pu,subdigestOfTransactions:pg,subdigestOfGuestModuleTransactions:mg,toSequenceTransactions:Ru,toSequenceTransaction:Go,isSequenceTransaction:os,hasSequenceTransactions:Bu,sequenceTxAbiEncode:ti,fromTxAbiEncode:vg,encodeNonce:yg,decodeNonce:bg,fromTransactionish:wg,isTransactionBundle:Lu,isSignedTransactionBundle:Du,encodeBundleExecData:Ag,selfExecuteSelector:Uu,selfExecuteAbi:Fu,unwind:so});const Hu="0x608060405234801561001057600080fd5b5060405161124a38038061124a83398101604081905261002f91610124565b600060405161003d906100dd565b604051809103906000f080158015610059573d6000803e3d6000fd5b5090506000816001600160a01b0316638f0684308686866040518463ffffffff1660e01b815260040161008e939291906101fb565b6020604051808303816000875af11580156100ad573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906100d19190610244565b9050806000526001601ff35b610fdc8061026e83390190565b634e487b7160e01b600052604160045260246000fd5b60005b8381101561011b578181015183820152602001610103565b50506000910152565b60008060006060848603121561013957600080fd5b83516001600160a01b038116811461015057600080fd5b6020850151604086015191945092506001600160401b038082111561017457600080fd5b818601915086601f83011261018857600080fd5b81518181111561019a5761019a6100ea565b604051601f8201601f19908116603f011681019083821181831017156101c2576101c26100ea565b816040528281528960208487010111156101db57600080fd5b6101ec836020830160208801610100565b80955050505050509250925092565b60018060a01b0384168152826020820152606060408201526000825180606084015261022e816080850160208701610100565b601f01601f191691909101608001949350505050565b60006020828403121561025657600080fd5b8151801515811461026657600080fd5b939250505056fe608060405234801561001057600080fd5b50610fbc806100206000396000f3fe608060405234801561001057600080fd5b50600436106100675760003560e01c806376be4cea1161005057806376be4cea146100a65780638f068430146100b957806398ef1ed8146100cc57600080fd5b80631c6453271461006c5780633d787b6314610093575b600080fd5b61007f61007a366004610ad4565b6100df565b604051901515815260200160405180910390f35b61007f6100a1366004610ad4565b61023d565b61007f6100b4366004610b3e565b61031e565b61007f6100c7366004610ad4565b6108e1565b61007f6100da366004610ad4565b61096e565b6040517f76be4cea00000000000000000000000000000000000000000000000000000000815260009030906376be4cea9061012890889088908890889088908190600401610bc3565b6020604051808303816000875af1925050508015610181575060408051601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016820190925261017e91810190610c45565b60015b610232573d8080156101af576040519150601f19603f3d011682016040523d82523d6000602084013e6101b4565b606091505b508051600181900361022757816000815181106101d3576101d3610c69565b6020910101517fff00000000000000000000000000000000000000000000000000000000000000167f0100000000000000000000000000000000000000000000000000000000000000149250610235915050565b600092505050610235565b90505b949350505050565b6040517f76be4cea00000000000000000000000000000000000000000000000000000000815260009030906376be4cea906102879088908890889088906001908990600401610bc3565b6020604051808303816000875af19250505080156102e0575060408051601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe01682019092526102dd91810190610c45565b60015b610232573d80801561030e576040519150601f19603f3d011682016040523d82523d6000602084013e610313565b606091505b506000915050610235565b600073ffffffffffffffffffffffffffffffffffffffff87163b6060827f64926492649264926492649264926492649264926492649264926492649264928888610369602082610c98565b610375928b9290610cd8565b61037e91610d02565b1490508015610484576000606089828a610399602082610c98565b926103a693929190610cd8565b8101906103b39190610e18565b955090925090508415806103c45750865b1561047d576000808373ffffffffffffffffffffffffffffffffffffffff16836040516103f19190610eb2565b6000604051808303816000865af19150503d806000811461042e576040519150601f19603f3d011682016040523d82523d6000602084013e610433565b606091505b50915091508161047a57806040517f9d0d6e2d0000000000000000000000000000000000000000000000000000000081526004016104719190610f18565b60405180910390fd5b50505b50506104be565b87878080601f0160208091040260200160405190810160405280939291908181526020018383808284376000920191909152509294505050505b80806104ca5750600083115b156106bb576040517f1626ba7e00000000000000000000000000000000000000000000000000000000815273ffffffffffffffffffffffffffffffffffffffff8b1690631626ba7e90610523908c908690600401610f2b565b602060405180830381865afa92505050801561057a575060408051601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016820190925261057791810190610f44565b60015b61060f573d8080156105a8576040519150601f19603f3d011682016040523d82523d6000602084013e6105ad565b606091505b50851580156105bc5750600084115b156105db576105d08b8b8b8b8b600161031e565b9450505050506108d7565b806040517f6f2a95990000000000000000000000000000000000000000000000000000000081526004016104719190610f18565b7fffffffff0000000000000000000000000000000000000000000000000000000081167f1626ba7e000000000000000000000000000000000000000000000000000000001480158161065f575086155b801561066b5750600085115b1561068b5761067f8c8c8c8c8c600161031e565b955050505050506108d7565b841580156106965750825b80156106a0575087155b156106af57806000526001601ffd5b94506108d79350505050565b6041871461074b576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152603a60248201527f5369676e617475726556616c696461746f72237265636f7665725369676e657260448201527f3a20696e76616c6964207369676e6174757265206c656e6774680000000000006064820152608401610471565b600061075a6020828a8c610cd8565b61076391610d02565b90506000610775604060208b8d610cd8565b61077e91610d02565b905060008a8a604081811061079557610795610c69565b919091013560f81c915050601b81148015906107b557508060ff16601c14155b15610842576040517f08c379a000000000000000000000000000000000000000000000000000000000815260206004820152602d60248201527f5369676e617475726556616c696461746f723a20696e76616c6964207369676e60448201527f617475726520762076616c7565000000000000000000000000000000000000006064820152608401610471565b6040805160008152602081018083528e905260ff831691810191909152606081018490526080810183905273ffffffffffffffffffffffffffffffffffffffff8e169060019060a0016020604051602081039080840390855afa1580156108ad573d6000803e3d6000fd5b5050506020604051035173ffffffffffffffffffffffffffffffffffffffff161496505050505050505b9695505050505050565b6040517f76be4cea00000000000000000000000000000000000000000000000000000000815260009030906376be4cea9061092b9088908890889088906001908990600401610bc3565b6020604051808303816000875af115801561094a573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906102329190610c45565b6040517f76be4cea00000000000000000000000000000000000000000000000000000000815260009030906376be4cea906109b790889088908890889088908190600401610bc3565b6020604051808303816000875af1925050508015610a10575060408051601f3d9081017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0168201909252610a0d91810190610c45565b60015b610232573d808015610a3e576040519150601f19603f3d011682016040523d82523d6000602084013e610a43565b606091505b5080516001819003610a6257816000815181106101d3576101d3610c69565b8082fd5b73ffffffffffffffffffffffffffffffffffffffff81168114610a8857600080fd5b50565b60008083601f840112610a9d57600080fd5b50813567ffffffffffffffff811115610ab557600080fd5b602083019150836020828501011115610acd57600080fd5b9250929050565b60008060008060608587031215610aea57600080fd5b8435610af581610a66565b935060208501359250604085013567ffffffffffffffff811115610b1857600080fd5b610b2487828801610a8b565b95989497509550505050565b8015158114610a8857600080fd5b60008060008060008060a08789031215610b5757600080fd5b8635610b6281610a66565b955060208701359450604087013567ffffffffffffffff811115610b8557600080fd5b610b9189828a01610a8b565b9095509350506060870135610ba581610b30565b91506080870135610bb581610b30565b809150509295509295509295565b73ffffffffffffffffffffffffffffffffffffffff8716815285602082015260a060408201528360a0820152838560c0830137600060c085830181019190915292151560608201529015156080820152601f9092017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe016909101019392505050565b600060208284031215610c5757600080fd5b8151610c6281610b30565b9392505050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052603260045260246000fd5b81810381811115610cd2577f4e487b7100000000000000000000000000000000000000000000000000000000600052601160045260246000fd5b92915050565b60008085851115610ce857600080fd5b83861115610cf557600080fd5b5050820193919092039150565b80356020831015610cd2577fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff602084900360031b1b1692915050565b7f4e487b7100000000000000000000000000000000000000000000000000000000600052604160045260246000fd5b600082601f830112610d7e57600080fd5b813567ffffffffffffffff80821115610d9957610d99610d3e565b604051601f83017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0908116603f01168101908282118183101715610ddf57610ddf610d3e565b81604052838152866020858801011115610df857600080fd5b836020870160208301376000602085830101528094505050505092915050565b600080600060608486031215610e2d57600080fd5b8335610e3881610a66565b9250602084013567ffffffffffffffff80821115610e5557600080fd5b610e6187838801610d6d565b93506040860135915080821115610e7757600080fd5b50610e8486828701610d6d565b9150509250925092565b60005b83811015610ea9578181015183820152602001610e91565b50506000910152565b60008251610ec4818460208701610e8e565b9190910192915050565b60008151808452610ee6816020860160208601610e8e565b601f017fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0169290920160200192915050565b602081526000610c626020830184610ece565b8281526040602082015260006102356040830184610ece565b600060208284031215610f5657600080fd5b81517fffffffff0000000000000000000000000000000000000000000000000000000081168114610c6257600080fdfea26469706673582212201a72aed4b15ffb05b6502997a9bb655992e06590bd26b336dfbb153d7ff6f34b64736f6c63430008120033",xg="0x6492649264926492649264926492649264926492649264926492649264926492";async function qu(t,e,r,n){return await t.call({data:ht([Hu,new hf().encode(["address","bytes32","bytes"],[e,r,n])])})==="0x01"}var _g=Object.freeze({__proto__:null,EIP_6492_OFFCHAIN_DEPLOY_CODE:Hu,EIP_6492_SUFFIX:xg,validateEIP6492Offchain:qu});class Sg{constructor(e){this.provider=e,this.isDeployedCache=new Set}module(e){return new Io(e,[...Lt.mainModuleUpgradable.abi,...Lt.mainModule.abi,...Lt.erc1271.abi],this.provider)}async isDeployed(e){if(this.isDeployedCache.has(e))return!0;const n=(await this.provider.getCode(e).then(i=>q(i))).length!==0;return n&&this.isDeployedCache.add(e),n}async implementation(e){const r=dr.encode(["address"],[e]),n=await this.provider.getStorageAt(e,r).then(i=>q(i));if(n.length===20)return Xe(F(n));if(n.length===32)return dr.decode(["address"],n)[0]}async imageHash(e){try{return await this.module(e).imageHash()}catch{}}async nonce(e,r=0){try{return await this.module(e).readNonce(r)}catch(n){if(!await this.isDeployed(e))return 0;throw n}}async isValidSignature(e,r,n){return qu(this.provider,e,r,n)}}var Ig=Object.freeze({__proto__:null,OnChainReader:Sg});function Mg(t){return t&&t.address&&t.digest&&t.chainId!==void 0&&t.config}var Qe=Object.freeze({__proto__:null,config:qd,signature:zd,context:cg,signer:$d,EIP1271:Wd,transaction:Eg,reader:Ig,EIP6492:_g,isWalletSignRequestMetadata:Mg});const oo=[{config:Oo,signature:Co},{config:is,signature:ns}];function zu(t){const e=t-1;if(e<0||e>=oo.length)throw new Error(`No coder for version: ${t}`);return oo[e]}function Ng(t){return zu(t)}var rn=Object.freeze({__proto__:null,ALL_CODERS:oo,coderFor:zu,genericCoderFor:Ng});const kg=[Yr,ie];class Tg{constructor(){this.version=2,this.configCoder=ie.config.ConfigCoder,this.signatureCoder=ie.signature.SignatureCoder}buildTransaction(e,r,n){if(!ie.config.ConfigCoder.isWalletConfig(n)){const l=ie.config.toWalletConfig({threshold:n.threshold,members:n.signers,checkpoint:0});return this.buildTransaction(e,r,l)}const i=r[2],s=new $t(Lt.mainModule.abi),o=ie.config.ConfigCoder.update.buildTransaction(e,n,i,"first");return{tx:{entrypoint:e,nonce:Qe.transaction.encodeNonce(ao,0),transactions:[{to:e,value:0,gasLimit:0,revertOnError:!0,delegateCall:!1,data:s.encodeFunctionData(s.getFunction("updateImplementation"),[i.mainModuleUpgradable])},...o.transactions]},fromVersion:this.version-1,toVersion:this.version,toConfig:n}}decodeTransaction(e,r){const n=e.entrypoint;if(e.transactions.length<2)throw new Error("Invalid transaction bundle size");if(!e.nonce||!Qe.transaction.encodeNonce(ao,0).eq(e.nonce))throw new Error("Invalid transaction bundle nonce");if(e.transactions[0].to!==n||e.transactions[1].to!==n||e.transactions[0].delegateCall||e.transactions[1].delegateCall||!e.transactions[0].revertOnError||!e.transactions[1].revertOnError||e.transactions[0].value&&!ct.eq(e.transactions[0].value)||e.transactions[1].value&&!ct.eq(e.transactions[1].value)||e.transactions[0].gasLimit&&!ct.eq(e.transactions[0].gasLimit)||e.transactions[1].gasLimit&&!ct.eq(e.transactions[1].gasLimit))throw new Error("Invalid transaction bundle format");const i=r[2],s=new $t(Lt.mainModule.abi),o=F(e.transactions[0].data||[]),a=F(s.encodeFunctionData(s.getFunction("updateImplementation"),[i.mainModuleUpgradable]));if(o!==a)throw new Error("Invalid new implementation on transaction");const l=ie.config.ConfigCoder.update.decodeTransaction({entrypoint:n,transactions:[e.transactions[1]]});if(l.address!==n)throw new Error("Invalid transaction bundle address");return l}}const ao="0xa04263acf755e8bd19c0d7e20eea39a9ff3729eb",Cg=new Tg;var Og=Object.freeze({__proto__:null,MIGRATION_NONCE_SPACE:ao,v1v2:Cg});O.from(8e5);let Qr=function(t){return t.UNKNOWN="UNKNOWN",t.DROPPED="DROPPED",t.QUEUED="QUEUED",t.SENT="SENT",t.SUCCEEDED="SUCCEEDED",t.PARTIALLY_FAILED="PARTIALLY_FAILED",t.FAILED="FAILED",t}({});Qr.DROPPED,Qr.SUCCEEDED,Qr.PARTIALLY_FAILED,Qr.FAILED;Qr.DROPPED,Qr.PARTIALLY_FAILED,Qr.FAILED;function Pg(t,e){const r=t.replace("ipfs://ipfs/","").replace("ipfs://","");return t.startsWith("ipfs://")?`${e}${r}`:t}function Rg(t){return t.startsWith("ipfs://")}class Bg{constructor(e,r,n=1e3){this.provider=e,this.solver=r,this.window=n,this.pending=new Map}async runByEIP5719(e,r,n){const i=`${e}-${r}-${n}`,s=Date.now();if(this.pending.has(i)&&s-this.pending.get(i).timestamp<this.window)return this.pending.get(i).promise;const o=Gu(e,this.provider,r,n,this.solver);return this.pending.set(i,{timestamp:s,promise:o}),o}}function Lg(t,e){const r=[{inputs:[{internalType:"bytes32",type:"bytes32"}],name:"getAlternativeSignature",outputs:[{internalType:"string",type:"string"}],stateMutability:"view",type:"function"}];return new Io(t,r,e)}async function Dg(t){try{return await t}catch{return}}async function Gu(t,e,r,n,i,s=0){if(s>10)throw new Error("EIP5719 - Too many tries");if(Qe.signer.canRecover(n)){const l=Qe.signer.recoverSigner(r,n);if(l&&l.toLowerCase()===t.toLowerCase())return n}try{if(await Qe.signer.isValidSignature(t,r,n,e))return n}catch{}const o=await Dg(Lg(t,e).getAlternativeSignature(r));if(!o||o==="")throw new Error("EIP5719 - Invalid signature and no alternative signature");const a=F(await(i||new Ug).resolve(o));if(!a||a==="")throw new Error("EIP5719 - Empty alternative signature");if(a===F(n))throw new Error("EIP5719 - Alternative signature is invalid or the same");return Gu(t,e,r,a,i,s+1)}class Ug{constructor(e="https://cloudflare-ipfs.com/ipfs/"){var r=this;this.gateway=e,this.uri=n=>Rg(n)?Pg(n,this.gateway):n,this.resolve=async function(n){const i=r.uri(n),s=await fetch(i);if(!s.ok)throw new Error(`URISolverIPFS - Failed to fetch ${i}`);return await s.text()}}}const Fg=(t,e)=>e.some(r=>t instanceof r);let Fa,Ha;function Hg(){return Fa||(Fa=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function qg(){return Ha||(Ha=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ju=new WeakMap,fo=new WeakMap,Wu=new WeakMap,Us=new WeakMap,jo=new WeakMap;function zg(t){const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{r(Cr(t.result)),i()},o=()=>{n(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&ju.set(r,t)}).catch(()=>{}),jo.set(e,t),e}function Gg(t){if(fo.has(t))return;const e=new Promise((r,n)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{r(),i()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});fo.set(t,e)}let uo={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return fo.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Wu.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return Cr(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jg(t){uo=t(uo)}function Wg(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(Fs(this),e,...r);return Wu.set(n,e.sort?e.sort():[e]),Cr(n)}:qg().includes(t)?function(...e){return t.apply(Fs(this),e),Cr(ju.get(this))}:function(...e){return Cr(t.apply(Fs(this),e))}}function Vg(t){return typeof t=="function"?Wg(t):(t instanceof IDBTransaction&&Gg(t),Fg(t,Hg())?new Proxy(t,uo):t)}function Cr(t){if(t instanceof IDBRequest)return zg(t);if(Us.has(t))return Us.get(t);const e=Vg(t);return e!==t&&(Us.set(t,e),jo.set(e,t)),e}const Fs=t=>jo.get(t);function Kg(t,e,{blocked:r,upgrade:n,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=Cr(o);return n&&o.addEventListener("upgradeneeded",l=>{n(Cr(o.result),l.oldVersion,l.newVersion,Cr(o.transaction),l)}),r&&o.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),i&&l.addEventListener("versionchange",g=>i(g.oldVersion,g.newVersion,g))}).catch(()=>{}),a}const $g=["get","getKey","getAll","getAllKeys","count"],Jg=["put","add","delete","clear"],Hs=new Map;function qa(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hs.get(e))return Hs.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,i=Jg.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(i||$g.includes(r)))return;const s=async function(o,...a){const l=this.transaction(o,i?"readwrite":"readonly");let g=l.store;return n&&(g=g.index(a.shift())),(await Promise.all([g[r](...a),i&&l.done]))[0]};return Hs.set(e,s),s}jg(t=>({...t,get:(e,r,n)=>qa(e,r)||t.get(e,r,n),has:(e,r)=>!!qa(e,r)||t.has(e,r)}));class Yg{constructor(e){this.tracker=e}async loadPresignedConfiguration(e){return console.debug("? loadPresignedConfiguration"),At(e,"? "),At(await this.tracker.loadPresignedConfiguration(e),"! ")}savePresignedConfiguration(e){return console.debug("? savePresignedConfiguration"),At(e,"? "),this.tracker.savePresignedConfiguration(e)}saveWitnesses(e){return console.debug("? saveWitnesses"),At(e,"? "),this.tracker.saveWitnesses(e)}async configOfImageHash(e){return console.debug("? configOfImageHash"),At(e,"? "),At(await this.tracker.configOfImageHash(e),"! ")}saveWalletConfig(e){return console.debug("? saveWalletConfig"),At(e,"? "),this.tracker.saveWalletConfig(e)}async imageHashOfCounterfactualWallet(e){return console.debug("? imageHashOfCounterfactualWallet"),At(e,"? "),At(await this.tracker.imageHashOfCounterfactualWallet(e),"! ")}saveCounterfactualWallet(e){return console.debug("? saveCounterfactualWallet"),At(e,"? "),this.tracker.saveCounterfactualWallet(e)}async walletsOfSigner(e){return console.debug("? walletsOfSigner"),At(e,"? "),At(await this.tracker.walletsOfSigner(e),"! ")}async getMigration(e,r,n,i){return console.debug("? getMigration"),At({address:e,fromImageHash:r,fromVersion:n,chainId:i},"? "),At(await this.tracker.getMigration(e,r,n,i),"! ")}saveMigration(e,r,n){return console.debug("? saveMigration"),At({address:e,signed:r,contexts:n},"? "),this.tracker.saveMigration(e,r,n)}}function At(t,e=""){switch(t){case void 0:console.debug(e+"undefined");break;default:JSON.stringify(t,void 0,2).split(`
`).map(r=>e+r).forEach(r=>console.debug(r));break}return t}var Qg=Object.freeze({__proto__:null,DebugConfigTracker:Yg});function Rr(){return Rr=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Rr.apply(this,arguments)}class Vu{constructor(){this.configs={},this.v2Nodes={},this.counterfactualWallets={},this.payloads={},this.signatures={},this.migrations={},this.loadConfig=e=>Promise.resolve(this.configs[e]),this.saveConfig=(e,r)=>(this.configs[e]=r,Promise.resolve()),this.loadV2Node=e=>Promise.resolve(this.v2Nodes[e]),this.saveV2Node=(e,r)=>(this.v2Nodes[e]=r,Promise.resolve()),this.loadCounterfactualWallet=e=>Promise.resolve(this.counterfactualWallets[e]),this.saveCounterfactualWallet=(e,r,n)=>(this.counterfactualWallets[e]={imageHash:r,context:n},Promise.resolve()),this.loadPayloadOfSubdigest=e=>Promise.resolve(this.payloads[e]),this.savePayloadOfSubdigest=(e,r)=>(this.payloads[e]=r,Promise.resolve()),this.loadSubdigestsOfSigner=e=>Promise.resolve(Object.keys(this.signatures[e]||{})),this.loadSignatureOfSubdigest=(e,r)=>{var n;return Promise.resolve((n=this.signatures[e])==null?void 0:n[r])},this.saveSignatureOfSubdigest=(e,r,n)=>(this.signatures[e]||(this.signatures[e]={}),this.signatures[e][r]=n,Promise.resolve()),this.loadMigrationsSubdigest=(e,r,n)=>{var i;return Promise.resolve(((i=this.migrations[e])==null||(i=i[r])==null?void 0:i[n])||[])},this.saveMigrationsSubdigest=(e,r,n,i,s)=>(this.migrations[e]||(this.migrations[e]={}),this.migrations[e][r]||(this.migrations[e][r]={}),this.migrations[e][r][n]||(this.migrations[e][r][n]=[]),this.migrations[e][r][n].push({subdigest:i,toImageHash:s}),Promise.resolve())}}function An(t){if(t===void 0)return;const e={};for(const r of Object.keys(t)){const n=t[r];n._isBigNumber===!0&&n._hex!==void 0&&typeof n._hex=="string"&&n._hex.length!==""?e[r]=O.from(n):Array.isArray(n)?e[r]=n.map(i=>An(i)):typeof n=="object"&&n!==null?e[r]=An(n):e[r]=n}return e}class Xg{constructor(e){var r=this;this.dbName=e,this._lazyDb=void 0,this.loadConfig=async function(n){return(await r.getDb()).get("configs",n).then(s=>An(s))},this.saveConfig=async function(n,i){await(await r.getDb()).put("configs",i,n)},this.loadV2Node=async function(n){return(await r.getDb()).get("v2Nodes",n).then(s=>An(s))},this.saveV2Node=async function(n,i){await(await r.getDb()).put("v2Nodes",i,n)},this.loadCounterfactualWallet=async function(n){return(await r.getDb()).get("counterfactualWallets",n)},this.saveCounterfactualWallet=async function(n,i,s){await(await r.getDb()).put("counterfactualWallets",{imageHash:i,context:s},n)},this.loadPayloadOfSubdigest=async function(n){return(await r.getDb()).get("payloads",n).then(s=>An(s))},this.savePayloadOfSubdigest=async function(n,i){await(await r.getDb()).put("payloads",i,n)},this.loadSubdigestsOfSigner=async function(n){return(await(await r.getDb()).getAllKeysFromIndex("signatures","signer",IDBKeyRange.only(n))).map(o=>o.split("-")[0])},this.loadSignatureOfSubdigest=async function(n,i){const o=await(await r.getDb()).get("signatures",[i,n].join("-"));return o==null?void 0:o.signature},this.saveSignatureOfSubdigest=async function(n,i,s){await(await r.getDb()).put("signatures",{signature:s,signer:n},[i,n].join("-"))},this.loadMigrationsSubdigest=async function(n,i,s){return(await(await r.getDb()).getAllFromIndex("migrations","jump",IDBKeyRange.only([n,i,s]))).map(l=>({subdigest:l.subdigest,toImageHash:l.toImageHash}))},this.saveMigrationsSubdigest=async function(n,i,s,o,a){await(await r.getDb()).put("migrations",{wallet:n,fromVersion:i,toVersion:s,subdigest:o,toImageHash:a},o)}}async getDb(){if(this._lazyDb)return this._lazyDb;const e=this.dbName;return this._lazyDb=await Kg(e,1,{upgrade(r,n,i,s){console.log(`upgrading ${e} from ${n} to ${i} - ${s}`),n===0&&(r.createObjectStore("configs"),r.createObjectStore("v2Nodes"),r.createObjectStore("counterfactualWallets"),r.createObjectStore("payloads"),r.createObjectStore("signatures").createIndex("signer","signer",{unique:!1}),r.createObjectStore("migrations").createIndex("jump",["wallet","fromVersion","toVersion"]))}}),this._lazyDb}}function Ku(t){return t.left!==void 0&&t.right!==void 0}function $u(t){return t.weight!==void 0&&t.threshold!==void 0&&t.tree!==void 0}function lo(t){return t.version===2&&t.threshold!==void 0&&t.checkpoint!==void 0&&t.tree!==void 0&&typeof t.tree=="string"}var Zg=Object.freeze({__proto__:null,isPlainNode:Ku,isPlainNested:$u,isPlainV2Config:lo,MemoryTrackerStore:Vu,recreateBigNumbers:An,IndexedDBStore:Xg});class Wo{constructor(e,r=new Vu,n=!1){var i=this;this.provider=e,this.store=r,this.useEIP5719=n,this.cachedEIP5719=void 0,this.loadTopology=async function(s){const o=await i.store.loadV2Node(s);if(!o)return{nodeHash:s};if(Ku(o)){const[a,l]=await Promise.all([i.loadTopology(o.left),i.loadTopology(o.right)]);return{left:a,right:l}}return $u(o)?{weight:O.from(o.weight),threshold:O.from(o.threshold),tree:await i.loadTopology(o.tree)}:o},this.saveTopology=async function(s){if(ie.config.isNodeLeaf(s))return;const o=ie.config.hashNode(s);if(ie.config.isNode(s)){const a=i.saveTopology(s.left),l=i.saveTopology(s.right),g=i.store.saveV2Node(o,{left:ie.config.hashNode(s.left),right:ie.config.hashNode(s.right)});await Promise.all([a,l,g]);return}if(ie.config.isNestedLeaf(s)){const a=i.saveTopology(s.tree),l=i.store.saveV2Node(o,{weight:O.from(s.weight).toString(),threshold:O.from(s.threshold).toString(),tree:ie.config.hashNode(s.tree)});await Promise.all([a,l]);return}if(ie.config.isSignerLeaf(s))return i.store.saveV2Node(o,{address:s.address,weight:s.weight});if(ie.config.isSubdigestLeaf(s))return i.store.saveV2Node(o,{subdigest:s.subdigest});throw new Error(`Unknown topology type: ${s}`)},this.saveWalletConfig=async function(s){const{config:o}=s;if(Yr.config.ConfigCoder.isWalletConfig(o)){const a=Yr.config.ConfigCoder.imageHashOf(o);return i.store.saveConfig(a,o)}if(ie.config.ConfigCoder.isWalletConfig(o)){const a=ie.config.ConfigCoder.imageHashOf(o);if(ie.config.isComplete(o.tree))return i.store.saveConfig(a,o)}},this.configOfImageHashCache={},this.configOfImageHash=async function(s){const{imageHash:o}=s;if(i.configOfImageHashCache[s.imageHash])return i.configOfImageHashCache[s.imageHash];const a=await i.store.loadConfig(o);if(a){if(a.version===1||a.version===2&&!lo(a))return i.configOfImageHashCache[s.imageHash]=a,a;if(lo(a)){const l={version:2,threshold:O.from(a.threshold),checkpoint:O.from(a.checkpoint),tree:await i.loadTopology(a.tree)};return i.configOfImageHashCache[s.imageHash]=l,l}throw new Error(`Unknown config type: ${a}`)}},this.saveCounterfactualWallet=async function(s){const{config:o,context:a}=s,l=rn.genericCoderFor(o.version).config.imageHashOf(o);await Promise.all([i.saveWalletConfig({config:o}),...a.map(g=>{const y=Qe.context.addressOf(g,l);return i.store.saveCounterfactualWallet(y,l,g)})])},this.imageHashOfCounterfactualWallet=async function(s){const{wallet:o}=s,a=await i.store.loadCounterfactualWallet(o);if(a)return{imageHash:a.imageHash,context:a.context}},this.savePayload=async function(s){const{payload:o}=s,a=Qe.signature.subdigestOf(o);await i.store.savePayloadOfSubdigest(a,o)},this.payloadOfSubdigestCache={},this.payloadOfSubdigest=async function(s){if(i.payloadOfSubdigestCache[s.subdigest])return i.payloadOfSubdigestCache[s.subdigest];const{subdigest:o}=s,a=await i.store.loadPayloadOfSubdigest(o);return a&&(i.payloadOfSubdigestCache[o]=a),a},this.savePresignedConfiguration=async function(s){const o=ie.signature.SignatureCoder.decode(s.signature),a=rn.genericCoderFor(s.nextConfig.version).config.imageHashOf(s.nextConfig),l=ie.chained.messageSetImageHash(a),g=fe(l),y={message:l,address:s.wallet,chainId:0,digest:g},A=i.savePayload({payload:y}),I=i.saveWalletConfig({config:s.nextConfig}),M=await ie.signature.SignatureCoder.recover(o,y,i.provider),k=ie.signature.signaturesOf(M.config.tree);await Promise.all([A,I,i.saveWalletConfig({config:M.config}),...k.map(P=>i.store.saveSignatureOfSubdigest(P.address,M.subdigest,P.signature))])},this.loadPresignedConfiguration=async function(s){const{wallet:o,fromImageHash:a,longestPath:l}=s,g=await i.configOfImageHash({imageHash:a});if(!g||!ie.config.ConfigCoder.isWalletConfig(g))return[];const y=ie.config.signersOf(g.tree).map(H=>H.address),A=await Promise.all(y.map(H=>i.store.loadSubdigestsOfSigner(H))),I=[...new Set(A.flat())],k=(await Promise.all([...new Set(I)].map(async function(H){return Rr({},await i.payloadOfSubdigest({subdigest:H}),{subdigest:H})}))).filter(H=>(H==null?void 0:H.message)&&(H==null?void 0:H.address)&&H.address===o).map(H=>({payload:H,nextImageHash:ie.chained.decodeMessageSetImageHash(H.message)})).filter(H=>H==null?void 0:H.nextImageHash);let P;const B=(await Promise.all(k.map(async function({nextImageHash:H,payload:J}){const K=await i.configOfImageHash({imageHash:H});if(!K||!ie.config.isWalletConfig(K))return;const Y=O.from(K.checkpoint);return{nextConfig:K,nextCheckpoint:Y,nextImageHash:H,payload:J}}))).filter(H=>H!==void 0).filter(H=>H.nextCheckpoint.gt(g.checkpoint)).sort((H,J)=>H.nextCheckpoint.gt(J.nextCheckpoint)?l?1:-1:l?-1:1);for(const H of B){const{nextConfig:J,nextCheckpoint:K,nextImageHash:Y,payload:ye}=H;if(P){const we=P.checkpoint;if(l){if(K.gte(we))continue}else if(K.lte(we))continue}const de=new Map((await Promise.all(y.map(async function(we){const le=await i.store.loadSignatureOfSubdigest(we,ye.subdigest);if(!le)return[we,void 0];const at=F(i.useEIP5719?await i.cachedEIP5719.runByEIP5719(we,ye.subdigest,le):le),_=Qe.signer.tryRecoverSigner(ye.subdigest,at)!==we;return[we,{isDynamic:_,signature:at}]}))).filter(we=>!!we[1]));if(de.size===0)continue;const X=ie.signature.SignatureCoder.encodeSigners(g,de,[],0);X.weight.lt(g.threshold)||(P={nextImageHash:Y,checkpoint:O.from(J.checkpoint),signature:X.encoded})}if(!P)return[];const W=await i.loadPresignedConfiguration({wallet:o,fromImageHash:P.nextImageHash,longestPath:l});return[{wallet:o,nextImageHash:P.nextImageHash,signature:P.signature},...W]},this.saveWitnesses=async function(s){const o={digest:s.digest,address:s.wallet,chainId:s.chainId},a=Qe.signature.subdigestOf(o);await Promise.all([i.savePayload({payload:o}),...s.signatures.filter(l=>Qe.signer.canRecover(l)).map(l=>{const g=Qe.signer.recoverSigner(a,l);return i.store.saveSignatureOfSubdigest(g,a,l)})])},this.walletsOfSigner=async function(s){const o=await i.store.loadSubdigestsOfSigner(s.signer),a=await Promise.all(o.map(g=>i.payloadOfSubdigest({subdigest:g}))).then(g=>g.filter(y=>y!==void 0)),l=[];for(const g of a){const y=g.address;if(l.find(M=>M.wallet===y))continue;const A=Qe.signature.subdigestOf(g),I=await i.store.loadSignatureOfSubdigest(s.signer,A);I&&l.push({wallet:y,proof:{digest:g.digest,chainId:O.from(g.chainId),signature:F(I)}})}return l},this.cachedEIP5719=new Bg(e)}async saveMigration(e,r,n){const i=r.fromVersion;if(i!==1)throw new Error("Migration not supported");if(!ie.config.isWalletConfig(r.toConfig))throw new Error("Invalid to config");const{newImageHash:s,address:o}=Og.v1v2.decodeTransaction(r.tx,n);if(o!==e)throw new Error("Invalid migration transaction - address");if(ie.config.ConfigCoder.imageHashOf(r.toConfig)!=s)throw new Error("Invalid migration transaction - config");const a=Qe.transaction.packMetaTransactionsData(r.tx.nonce,r.tx.transactions),l=fe(a),g={chainId:r.tx.chainId,message:a,address:e,digest:l},y=Qe.signature.subdigestOf(g),A=this.savePayload({payload:g}),I=this.saveWalletConfig({config:r.toConfig}),M=Yr.signature.SignatureCoder.decode(r.tx.signature),k=await Yr.signature.SignatureCoder.recover(M,g,this.provider),P=Yr.signature.SignatureCoder.signaturesOf(k.config);await Promise.all([A,I,this.saveWalletConfig({config:k.config}),this.store.saveMigrationsSubdigest(e,i,i+1,y,s),...P.map(j=>this.store.saveSignatureOfSubdigest(j.address,k.subdigest,j.signature))])}async getMigration(e,r,n,i){var s=this;const[o,a]=await Promise.all([this.configOfImageHash({imageHash:r}),this.store.loadMigrationsSubdigest(e,n,n+1)]),l=rn.coderFor(n);return!o||!l.config.isWalletConfig(o)?void 0:(await Promise.all(a.map(async function(y){const{subdigest:A,toImageHash:I}=y,M=await s.payloadOfSubdigest({subdigest:A});if(!M||!M.message||!O.from(i).eq(M.chainId))return;const k=l.config.signersOf(o).map(H=>H.address),P=new Map((await Promise.all(k.map(async function(H){const J=await s.store.loadSignatureOfSubdigest(H,A);if(!J)return[H,void 0];const K=F(s.useEIP5719?await s.cachedEIP5719.runByEIP5719(H,A,J):J),Y=Qe.signer.tryRecoverSigner(A,K)!==H;return[H,{isDynamic:Y,signature:K}]}))).filter(H=>!!H[1])),j=l.signature.encodeSigners(o,P,[],i);if(!j||j.weight<o.threshold)return;const[B,W]=Qe.transaction.unpackMetaTransactionsData(M.message);return{tx:{entrypoint:e,transactions:Qe.transaction.fromTxAbiEncode(W),chainId:i,nonce:B,signature:j.encoded,intent:{id:A,wallet:e}},toConfig:await s.configOfImageHash({imageHash:I}),fromVersion:n,toVersion:n+1}})).then(y=>y.filter(A=>A!==void 0)))[0]}updateProvider(e){this.provider=e}}var ep=Object.freeze({__proto__:null,LocalConfigTracker:Wo});let qs=function(t){return t.EIP712="EIP712",t.EthSign="EthSign",t.EIP1271="EIP1271",t}({});class tp{constructor(e,r){this.hostname=void 0,this.fetch=void 0,this.path="/rpc/Sessions/",this.ping=n=>this.fetch(this.url("Ping"),zt({},n)).then(i=>Gt(i).then(s=>({}))),this.config=(n,i)=>this.fetch(this.url("Config"),zt(n,i)).then(s=>Gt(s).then(o=>({version:o.version,config:o.config}))),this.wallets=(n,i)=>this.fetch(this.url("Wallets"),zt(n,i)).then(s=>Gt(s).then(o=>({wallets:o.wallets}))),this.deployHash=(n,i)=>this.fetch(this.url("DeployHash"),zt(n,i)).then(s=>Gt(s).then(o=>({deployHash:o.deployHash,context:o.context}))),this.configUpdates=(n,i)=>this.fetch(this.url("ConfigUpdates"),zt(n,i)).then(s=>Gt(s).then(o=>({updates:o.updates}))),this.migrations=(n,i)=>this.fetch(this.url("Migrations"),zt(n,i)).then(s=>Gt(s).then(o=>({migrations:o.migrations}))),this.saveConfig=(n,i)=>this.fetch(this.url("SaveConfig"),zt(n,i)).then(s=>Gt(s).then(o=>({}))),this.saveWallet=(n,i)=>this.fetch(this.url("SaveWallet"),zt(n,i)).then(s=>Gt(s).then(o=>({}))),this.saveSignature=(n,i)=>this.fetch(this.url("SaveSignature"),zt(n,i)).then(s=>Gt(s).then(o=>({}))),this.saveSignerSignatures=(n,i)=>this.fetch(this.url("SaveSignerSignatures"),zt(n,i)).then(s=>Gt(s).then(o=>({}))),this.saveMigration=(n,i)=>this.fetch(this.url("SaveMigration"),zt(n,i)).then(s=>Gt(s).then(o=>({}))),this.hostname=e,this.fetch=(n,i)=>r(n,i)}url(e){return this.hostname+this.path+e}}const zt=(t={},e={})=>({method:"POST",headers:Rr({},e,{"Content-Type":"application/json"}),body:JSON.stringify(t||{})}),Gt=t=>t.text().then(e=>{let r;try{r=JSON.parse(e)}catch{throw{code:"unknown",msg:`expecting JSON, got: ${e}`,status:t.status}}if(!t.ok)throw r;return r});class rp{constructor(e,r=!0){this.onlyRecoverable=r,this.sessions=void 0,this.sessions=new tp(e,fetch)}async loadPresignedConfiguration(e){try{const{updates:r}=await this.sessions.configUpdates({wallet:e.wallet,fromImageHash:e.fromImageHash,allUpdates:e.longestPath});return r.map(({toImageHash:n,signature:i})=>({wallet:e.wallet,nextImageHash:n,signature:i}))}catch(r){if(zs(r))return[];throw r}}async savePresignedConfiguration(e){const r=e.nextConfig,n=rn.genericCoderFor(r.version).config.imageHashOf(r),i=ie.signature.setImageHashStruct(n),s=fe(i);await this.sessions.saveSignature({wallet:e.wallet,digest:s,chainID:"0",signature:e.signature,toConfig:mi(r)})}async saveWitnesses(e){let r=e.signatures;this.onlyRecoverable&&(r=r.filter(n=>Qe.signer.canRecover(n))),await this.sessions.saveSignerSignatures({wallet:e.wallet,digest:e.digest,chainID:vn(e.chainId),signatures:r})}async configOfImageHash(e){try{const{version:r,config:n}=await this.sessions.config(e);return np(r,n)}catch(r){if(zs(r))return;throw r}}async saveWalletConfig(e){const r=mi(e.config);await this.sessions.saveConfig({version:e.config.version,config:r})}async imageHashOfCounterfactualWallet(e){try{const{deployHash:r,context:n}=await this.sessions.deployHash(e);return{imageHash:r,context:n}}catch(r){if(zs(r))return;throw r}}async saveCounterfactualWallet(e){const r=mi(e.config);await this.sessions.saveWallet({version:e.config.version,deployConfig:r})}async walletsOfSigner(e){const{wallets:r}=await this.sessions.wallets(e);return Object.entries(r).map(([n,{digest:i,chainID:s,type:o,signature:a}])=>{switch(o){case qs.EIP712:a+=F(Qe.signer.SigType.EIP712).slice(2);break;case qs.EthSign:a+=F(Qe.signer.SigType.ETH_SIGN).slice(2);break;case qs.EIP1271:a+=F(Qe.signer.SigType.WALLET_BYTES32).slice(2);break}return{wallet:n,proof:{digest:i,signature:a,chainId:O.from(s)}}})}async getMigration(e,r,n,i){var s=this;const o=vn(i),{migrations:a}=await this.sessions.migrations({wallet:e,fromVersion:n,fromImageHash:r,chainID:o}),l=async function(A){const I=a[A];if(I){const M=Object.keys(I).map(Number).sort((k,P)=>P-k);for(const k of M)for(const[P,j]of Object.entries(I[k]))try{const B=await s.configOfImageHash({imageHash:P});if(B)return{fromVersion:n,toVersion:k,toConfig:B,tx:{entrypoint:j.executor,transactions:j.transactions,nonce:j.nonce,signature:j.signature,chainId:A,intent:{id:Qe.transaction.subdigestOfTransactions(e,A,j.nonce,j.transactions),wallet:e}}}}catch(B){console.error(B)}}},g=await l(o);if(g)return g;for(const y in a)if(y!==o){const A=await l(y);if(A)return A}}async saveMigration(e,r,n){await this.sessions.saveMigration({wallet:e,fromVersion:r.fromVersion,toVersion:r.toVersion,toConfig:mi(r.toConfig),executor:r.tx.entrypoint,transactions:r.tx.transactions.map(ip),nonce:vn(r.tx.nonce),signature:r.tx.signature,chainID:vn(r.tx.chainId)})}}function mi(t){switch(t.version){case 1:if(Yr.config.ConfigCoder.isWalletConfig(t))return{threshold:Xr(t.threshold),signers:t.signers.map(({weight:e,address:r})=>({weight:Xr(e),address:r}))};throw new Error(`not a v${t.version} config: ${t}`);case 2:if(ie.config.ConfigCoder.isWalletConfig(t))return{threshold:Xr(t.threshold),checkpoint:Xr(t.checkpoint),tree:Mi(t.tree)};throw new Error(`not a v${t.version} config: ${t}`);default:throw new Error(`unknown version ${t.version}`)}}function Mi(t){return ie.config.isNode(t)?{left:Mi(t.left),right:Mi(t.right)}:ie.config.isSignerLeaf(t)?{weight:Xr(t.weight),address:t.address}:ie.config.isNestedLeaf(t)?{weight:Xr(t.weight),threshold:Xr(t.threshold),tree:Mi(t.tree)}:ie.config.isNodeLeaf(t)?{node:t.nodeHash}:Rr({},t)}function np(t,e){switch(t){case 1:return Rr({},e,{version:t});case 2:return Rr({},e,{version:t,tree:Ni(e.tree)});default:throw new Error(`unknown version ${t}`)}}function Ni(t){switch(typeof t){case"object":const e=Rr({},t);return e.left!==void 0&&(e.left=Ni(e.left)),e.right!==void 0&&(e.right=Ni(e.right)),e.tree!==void 0&&(e.tree=Ni(e.tree)),e.node!==void 0&&(e.nodeHash=e.node,delete e.node),e;default:throw new Error(`v2 config tree ${t} is not an object`)}}function ip(t){return{to:t.to,value:t.value!==void 0?vn(t.value):void 0,data:t.data!==void 0?F(t.data):void 0,gasLimit:t.gasLimit!==void 0?vn(t.gasLimit):void 0,delegateCall:t.delegateCall,revertOnError:t.revertOnError}}function Xr(t){return O.from(t).toNumber()}function vn(t){return O.from(t).toString()}function zs(t){return typeof t=="object"&&t.status===404}var sp=Object.freeze({__proto__:null,RemoteConfigTracker:rp});function co(t,e,r){return new Promise(n=>{let i=0;t.forEach(s=>s.then(o=>{r(o)?n(o):(i++,i===t.length&&n(e))}).catch(()=>{i++,i===t.length&&n(e)}))})}async function Un(t,e){return Promise.all(t.map(r=>r.catch(()=>e)))}class op{constructor(e){this.trackers=e}async configOfImageHash(e){const r=this.trackers.map(async function(a,l){return{res:await a.configOfImageHash(e),i:l}}),n=await co(r,void 0,a=>(a==null?void 0:a.res)===void 0?!1:rn.genericCoderFor(a.res.version).config.isComplete(a.res));if(n!=null&&n.res)return this.saveWalletConfig({config:n.res,skipTracker:n.i}),n.res;const i=new Wo(void 0),s=await Un(r,void 0);for(const a of s)a!=null&&a.res&&await i.saveWalletConfig({config:a.res});const o=await i.configOfImageHash(e);return o&&this.saveWalletConfig({config:o}),o}async saveWalletConfig(e){await Promise.all(this.trackers.map((r,n)=>{if(n!==e.skipTracker)return r.saveWalletConfig(e)}))}async imageHashOfCounterfactualWallet(e){const r=await co(this.trackers.map(n=>n.imageHashOfCounterfactualWallet(e)),void 0,n=>!!n);return r&&this.configOfImageHash({imageHash:r.imageHash}).then(n=>{n&&this.saveCounterfactualWallet({config:n,context:[r.context]})}),r}async saveCounterfactualWallet(e){await Promise.all(this.trackers.map((r,n)=>{if(n!==e.skipTracker)return r.saveCounterfactualWallet(e)}))}async walletsOfSigner(e){const r=await Un(this.trackers.map(o=>o.walletsOfSigner(e)),[]).then(o=>o.flat()),n={};for(const o of r)n[o.wallet]=o.proof;const i=Object.keys(n).map(o=>({wallet:o,proof:n[o]})),s=new Map;return i.forEach(({wallet:o,proof:{digest:a,chainId:l,signature:g}})=>{const y=`${o}-${a}-${l}`;let A=s.get(y);A||(A={wallet:o,digest:a,chainId:l,signatures:[]},s.set(y,A)),A.signatures.push(g)}),s.forEach(o=>this.saveWitnesses(o)),i}async saveWitnesses(e){await Promise.all(this.trackers.map(r=>r.saveWitnesses(e)))}async loadPresignedConfiguration(e){var r=this;const n=await Un(this.trackers.map(l=>l.loadPresignedConfiguration(e)),[]),s=(await Un(n.map(async function(l){const g=l[l.length-1],y=await r.configOfImageHash({imageHash:g.nextImageHash});if(y)return{checkpoint:rn.genericCoderFor(y.version).config.checkpointOf(y),result:l}}),void 0)).reduce((l,g)=>g&&(!l||g.checkpoint.gt(l.checkpoint))?g:l);if(!s)return[];const o=new Map,a=l=>(o.has(l)||o.set(l,this.configOfImageHash({imageHash:l})),o.get(l));return s.result.forEach(async function(l){const g=await a(l.nextImageHash);g&&r.savePresignedConfiguration({wallet:e.wallet,nextConfig:g,signature:l.signature})}),s.result}async savePresignedConfiguration(e){await Promise.all(this.trackers.map(r=>r.savePresignedConfiguration(e)))}async getMigration(e,r,n,i){return(await Promise.all(this.trackers.map(o=>o.getMigration(e,r,n,i)))).find(o=>!!o)}async saveMigration(e,r,n){await Promise.all(this.trackers.map(i=>i.saveMigration(e,r,n)))}}class ap{constructor(e,r,n){this.tracker=e,this.cache=r,this.contexts=n}async loadPresignedConfiguration(e){var r=this;const n=[this.tracker.loadPresignedConfiguration(e),this.cache.loadPresignedConfiguration(e)];let i;const[s,o]=await Promise.all(n);if(s.length>0&&o.length>0&&s[s.length-1].nextImageHash===o[o.length-1].nextImageHash)i=e.longestPath===!0?s.length>o.length?s:o:s.length<o.length?s:o;else{var a,l;i=(a=(l=(await Promise.all(n.map(async function(y){const A=await y,I=A[A.length-1];if(!I)return;const M=await r.configOfImageHash({imageHash:I.nextImageHash});if(M)return{checkpoint:rn.genericCoderFor(M.version).config.checkpointOf(M),result:A}}))).reduce((y,A)=>A&&(!y||A.checkpoint.gt(y.checkpoint))?A:y))==null?void 0:l.result)!=null?a:[]}return i||[]}async savePresignedConfiguration(e){await Promise.all([this.tracker.savePresignedConfiguration(e),this.cache.savePresignedConfiguration(e)])}async configOfImageHash(e){if(e.noCache!==!0){const n=await this.cache.configOfImageHash(e);if(n)return n}const r=await this.tracker.configOfImageHash(e);return r&&await this.cache.saveWalletConfig({config:r}),r}async saveWalletConfig(e){await Promise.all([this.tracker.saveWalletConfig(e),this.cache.saveWalletConfig(e)])}async imageHashOfCounterfactualWallet(e){if(e.noCache!==!0){const n=await this.cache.imageHashOfCounterfactualWallet(e);if(n)return n}const r=await this.tracker.imageHashOfCounterfactualWallet(e);if(r){const n=await this.configOfImageHash({imageHash:r.imageHash});n&&await this.cache.saveCounterfactualWallet({config:n,context:[r.context]})}return r}async saveCounterfactualWallet(e){await Promise.all([this.tracker.saveCounterfactualWallet(e),this.cache.saveCounterfactualWallet(e)])}async walletsOfSigner(e){if(e.noCache)return this.tracker.walletsOfSigner(e);const r=await Promise.all([this.tracker.walletsOfSigner(e),this.cache.walletsOfSigner(e)]),n=new Map;for(const i of r)for(const s of i)n.set(s.wallet,s);return Array.from(n.values())}async saveWitnesses(e){await Promise.all([this.tracker.saveWitnesses(e),this.cache.saveWitnesses(e)])}async getMigration(e,r,n,i){const s=await this.cache.getMigration(e,r,n,i);if(s)return s;const o=await this.tracker.getMigration(e,r,n,i);return o&&await this.cache.saveMigration(e,o,this.contexts),o}async saveMigration(e,r,n){await Promise.all([this.tracker.saveMigration(e,r,n),this.cache.saveMigration(e,r,n)])}}class za{constructor(){this.cache=void 0,this.cache=new Map}do(e,r,n,...i){e=`${e}:${fe(mt(JSON.stringify(i,fp)))}`;let s=this.cache.get(e);if(s&&s.expiration&&new Date>=s.expiration&&(s=void 0,this.cache.delete(e)),!s){const o={promise:n(...i)};r!==void 0&&(o.promise=o.promise.then(a=>(o.expiration=new Date(Date.now()+r),a))),s=o,this.cache.set(e,s)}return s.promise}}function fp(t,e){return typeof e=="object"&&e!==null&&!Array.isArray(e)?Object.fromEntries(Object.entries(e).sort()):e}function up(t){return t instanceof Ju}class Ju{constructor(e,r=50,n=!1){this.tracker=e,this.window=r,this.verbose=n,this.cache=new za}invalidateCache(){this.cache=new za}configOfImageHash(e){return this.cache.do("configOfImageHash",this.window,r=>this.tracker.configOfImageHash(r),e)}getMigration(e,r,n,i){return this.cache.do("getMigration",this.window,(...s)=>this.tracker.getMigration(...s),e,r,n,i)}saveMigration(e,r,n){return this.cache.do("saveMigration",void 0,(...i)=>this.tracker.saveMigration(...i),e,r,n)}loadPresignedConfiguration(e){return this.cache.do("loadPresignedConfiguration",this.window,r=>this.tracker.loadPresignedConfiguration(r),e)}savePresignedConfiguration(e){return this.cache.do("savePresignedConfiguration",void 0,r=>this.tracker.savePresignedConfiguration(r),e)}saveWitnesses(e){return this.cache.do("saveWitnesses",void 0,r=>this.tracker.saveWitnesses(r),e)}saveWalletConfig(e){return this.cache.do("saveWalletConfig",void 0,r=>this.tracker.saveWalletConfig(r),e)}imageHashOfCounterfactualWallet(e){return this.cache.do("imageHashOfCounterfactualWallet",void 0,r=>this.tracker.imageHashOfCounterfactualWallet(r),e)}saveCounterfactualWallet(e){return this.cache.do("saveCounterfactualWallet",void 0,r=>this.tracker.saveCounterfactualWallet(r),e)}walletsOfSigner(e){return this.cache.do("walletsOfSigner",this.window,r=>this.tracker.walletsOfSigner(r),e)}updateProvider(e){this.tracker instanceof Wo&&this.tracker.updateProvider(e)}}var lp=Object.freeze({__proto__:null,debug:Qg,local:ep,remote:sp,stores:Zg,raceUntil:co,allSafe:Un,MultipleTracker:op,CachedTracker:ap,isDedupedTracker:up,DedupedTracker:Ju});class cp extends Error{constructor(e){super(e),this.name="AuthError"}}new cp("auth error: account address is empty");Qe.context.defaultContexts,new lp.remote.RemoteConfigTracker("https://sessions.sequence.app");function ho(){return ho=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},ho.apply(this,arguments)}const hp={batchSize:50,timeWindow:50,contract:"0xdbbFa3cB3B087B64F4ef5E3D20Dda2488AA244e6",verbose:!1};ho({},hp);var dp={exports:{}};/*!
 * EventEmitter2
 * https://github.com/hij1nx/EventEmitter2
 *
 * Copyright (c) 2013 hij1nx
 * Licensed under the MIT license.
 */(function(t,e){(function(r){var n=Object.hasOwnProperty,i=Array.isArray?Array.isArray:function(m){return Object.prototype.toString.call(m)==="[object Array]"},s=10,o=typeof process=="object"&&typeof process.nextTick=="function",a=typeof Symbol=="function",l=typeof Reflect=="object",g=typeof setImmediate=="function",y=g?setImmediate:setTimeout,A=a?l&&typeof Reflect.ownKeys=="function"?Reflect.ownKeys:function(c){var m=Object.getOwnPropertyNames(c);return m.push.apply(m,Object.getOwnPropertySymbols(c)),m}:Object.keys;function I(){this._events={},this._conf&&M.call(this,this._conf)}function M(c){c&&(this._conf=c,c.delimiter&&(this.delimiter=c.delimiter),c.maxListeners!==r&&(this._maxListeners=c.maxListeners),c.wildcard&&(this.wildcard=c.wildcard),c.newListener&&(this._newListener=c.newListener),c.removeListener&&(this._removeListener=c.removeListener),c.verboseMemoryLeak&&(this.verboseMemoryLeak=c.verboseMemoryLeak),c.ignoreErrors&&(this.ignoreErrors=c.ignoreErrors),this.wildcard&&(this.listenerTree={}))}function k(c,m){var b="(node) warning: possible EventEmitter memory leak detected. "+c+" listeners added. Use emitter.setMaxListeners() to increase limit.";if(this.verboseMemoryLeak&&(b+=" Event name: "+m+"."),typeof process<"u"&&process.emitWarning){var p=new Error(b);p.name="MaxListenersExceededWarning",p.emitter=this,p.count=c,process.emitWarning(p)}else console.error(b),console.trace&&console.trace()}var P=function(c,m,b){var p=arguments.length;switch(p){case 0:return[];case 1:return[c];case 2:return[c,m];case 3:return[c,m,b];default:for(var f=new Array(p);p--;)f[p]=arguments[p];return f}};function j(c,m){for(var b={},p,f=c.length,v=m?m.length:0,T=0;T<f;T++)p=c[T],b[p]=T<v?m[T]:r;return b}function B(c,m,b){this._emitter=c,this._target=m,this._listeners={},this._listenersCount=0;var p,f;if((b.on||b.off)&&(p=b.on,f=b.off),m.addEventListener?(p=m.addEventListener,f=m.removeEventListener):m.addListener?(p=m.addListener,f=m.removeListener):m.on&&(p=m.on,f=m.off),!p&&!f)throw Error("target does not implement any known event API");if(typeof p!="function")throw TypeError("on method must be a function");if(typeof f!="function")throw TypeError("off method must be a function");this._on=p,this._off=f;var v=c._observers;v?v.push(this):c._observers=[this]}Object.assign(B.prototype,{subscribe:function(c,m,b){var p=this,f=this._target,v=this._emitter,T=this._listeners,h=function(){var x=P.apply(null,arguments),S={data:x,name:m,original:c};if(b){var N=b.call(f,S);N!==!1&&v.emit.apply(v,[S.name].concat(x));return}v.emit.apply(v,[m].concat(x))};if(T[c])throw Error("Event '"+c+"' is already listening");this._listenersCount++,v._newListener&&v._removeListener&&!p._onNewListener?(this._onNewListener=function(x){x===m&&T[c]===null&&(T[c]=h,p._on.call(f,c,h))},v.on("newListener",this._onNewListener),this._onRemoveListener=function(x){x===m&&!v.hasListeners(x)&&T[c]&&(T[c]=null,p._off.call(f,c,h))},T[c]=null,v.on("removeListener",this._onRemoveListener)):(T[c]=h,p._on.call(f,c,h))},unsubscribe:function(c){var m=this,b=this._listeners,p=this._emitter,f,v,T=this._off,h=this._target,x;if(c&&typeof c!="string")throw TypeError("event must be a string");function S(){m._onNewListener&&(p.off("newListener",m._onNewListener),p.off("removeListener",m._onRemoveListener),m._onNewListener=null,m._onRemoveListener=null);var N=de.call(p,m);p._observers.splice(N,1)}if(c){if(f=b[c],!f)return;T.call(h,c,f),delete b[c],--this._listenersCount||S()}else{for(v=A(b),x=v.length;x-- >0;)c=v[x],T.call(h,c,b[c]);this._listeners={},this._listenersCount=0,S()}}});function W(c,m,b,p){var f=Object.assign({},m);if(!c)return f;if(typeof c!="object")throw TypeError("options must be an object");var v=Object.keys(c),T=v.length,h,x,S;function N(z){throw Error('Invalid "'+h+'" option value'+(z?". Reason: "+z:""))}for(var L=0;L<T;L++){if(h=v[L],!p&&!n.call(m,h))throw Error('Unknown "'+h+'" option');x=c[h],x!==r&&(S=b[h],f[h]=S?S(x,N):x)}return f}function H(c,m){return(typeof c!="function"||!c.hasOwnProperty("prototype"))&&m("value must be a constructor"),c}function J(c){var m="value must be type of "+c.join("|"),b=c.length,p=c[0],f=c[1];return b===1?function(v,T){if(typeof v===p)return v;T(m)}:b===2?function(v,T){var h=typeof v;if(h===p||h===f)return v;T(m)}:function(v,T){for(var h=typeof v,x=b;x-- >0;)if(h===c[x])return v;T(m)}}var K=J(["function"]),Y=J(["object","function"]);function ye(c,m,b){var p,f,v=0,T,h=new c(function(x,S,N){b=W(b,{timeout:0,overload:!1},{timeout:function(U,te){return U*=1,(typeof U!="number"||U<0||!Number.isFinite(U))&&te("timeout must be a positive number"),U}}),p=!b.overload&&typeof c.prototype.cancel=="function"&&typeof N=="function";function L(){f&&(f=null),v&&(clearTimeout(v),v=0)}var z=function(U){L(),x(U)},D=function(U){L(),S(U)};p?m(z,D,N):(f=[function(U){D(U||Error("canceled"))}],m(z,D,function(U){if(T)throw Error("Unable to subscribe on cancel event asynchronously");if(typeof U!="function")throw TypeError("onCancel callback must be a function");f.push(U)}),T=!0),b.timeout>0&&(v=setTimeout(function(){var U=Error("timeout");U.code="ETIMEDOUT",v=0,h.cancel(U),S(U)},b.timeout))});return p||(h.cancel=function(x){if(f){for(var S=f.length,N=1;N<S;N++)f[N](x);f[0](x),f=null}}),h}function de(c){var m=this._observers;if(!m)return-1;for(var b=m.length,p=0;p<b;p++)if(m[p]._target===c)return p;return-1}function X(c,m,b,p,f){if(!b)return null;if(p===0){var v=typeof m;if(v==="string"){var T,h,x=0,S=0,N=this.delimiter,L=N.length;if((h=m.indexOf(N))!==-1){T=new Array(5);do T[x++]=m.slice(S,h),S=h+L;while((h=m.indexOf(N,S))!==-1);T[x++]=m.slice(S),m=T,f=x}else m=[m],f=1}else v==="object"?f=m.length:(m=[m],f=1)}var z=null,D,U,te,V,Q,It=m[p],me=m[p+1],oe,tt;if(p===f)b._listeners&&(typeof b._listeners=="function"?(c&&c.push(b._listeners),z=[b]):(c&&c.push.apply(c,b._listeners),z=[b]));else if(It==="*"){for(oe=A(b),h=oe.length;h-- >0;)D=oe[h],D!=="_listeners"&&(tt=X(c,m,b[D],p+1,f),tt&&(z?z.push.apply(z,tt):z=tt));return z}else if(It==="**"){for(Q=p+1===f||p+2===f&&me==="*",Q&&b._listeners&&(z=X(c,m,b,f,f)),oe=A(b),h=oe.length;h-- >0;)D=oe[h],D!=="_listeners"&&(D==="*"||D==="**"?(b[D]._listeners&&!Q&&(tt=X(c,m,b[D],f,f),tt&&(z?z.push.apply(z,tt):z=tt)),tt=X(c,m,b[D],p,f)):D===me?tt=X(c,m,b[D],p+2,f):tt=X(c,m,b[D],p,f),tt&&(z?z.push.apply(z,tt):z=tt));return z}else b[It]&&(z=X(c,m,b[It],p+1,f));if(U=b["*"],U&&X(c,m,U,p+1,f),te=b["**"],te)if(p<f)for(te._listeners&&X(c,m,te,f,f),oe=A(te),h=oe.length;h-- >0;)D=oe[h],D!=="_listeners"&&(D===me?X(c,m,te[D],p+2,f):D===It?X(c,m,te[D],p+1,f):(V={},V[D]=te[D],X(c,m,{"**":V},p+1,f)));else te._listeners?X(c,m,te,f,f):te["*"]&&te["*"]._listeners&&X(c,m,te["*"],f,f);return z}function we(c,m,b){var p=0,f=0,v,T=this.delimiter,h=T.length,x;if(typeof c=="string")if((v=c.indexOf(T))!==-1){x=new Array(5);do x[p++]=c.slice(f,v),f=v+h;while((v=c.indexOf(T,f))!==-1);x[p++]=c.slice(f)}else x=[c],p=1;else x=c,p=c.length;if(p>1){for(v=0;v+1<p;v++)if(x[v]==="**"&&x[v+1]==="**")return}var S=this.listenerTree,N;for(v=0;v<p;v++)if(N=x[v],S=S[N]||(S[N]={}),v===p-1)return S._listeners?(typeof S._listeners=="function"&&(S._listeners=[S._listeners]),b?S._listeners.unshift(m):S._listeners.push(m),!S._listeners.warned&&this._maxListeners>0&&S._listeners.length>this._maxListeners&&(S._listeners.warned=!0,k.call(this,S._listeners.length,N))):S._listeners=m,!0;return!0}function le(c,m,b,p){for(var f=A(c),v=f.length,T,h,x,S=c._listeners,N;v-- >0;)h=f[v],T=c[h],h==="_listeners"?x=b:x=b?b.concat(h):[h],N=p||typeof h=="symbol",S&&m.push(N?x:x.join(this.delimiter)),typeof T=="object"&&le.call(this,T,m,x,N);return m}function at(c){for(var m=A(c),b=m.length,p,f,v;b-- >0;)f=m[b],p=c[f],p&&(v=!0,f!=="_listeners"&&!at(p)&&delete c[f]);return v}function _(c,m,b){this.emitter=c,this.event=m,this.listener=b}_.prototype.off=function(){return this.emitter.off(this.event,this.listener),this};function u(c,m,b){if(b===!0)f=!0;else if(b===!1)p=!0;else{if(!b||typeof b!="object")throw TypeError("options should be an object or true");var p=b.async,f=b.promisify,v=b.nextTick,T=b.objectify}if(p||v||f){var h=m,x=m._origin||m;if(v&&!o)throw Error("process.nextTick is not supported");f===r&&(f=m.constructor.name==="AsyncFunction"),m=function(){var S=arguments,N=this,L=this.event;return f?v?Promise.resolve():new Promise(function(z){y(z)}).then(function(){return N.event=L,h.apply(N,S)}):(v?process.nextTick:y)(function(){N.event=L,h.apply(N,S)})},m._async=!0,m._origin=x}return[m,T?new _(this,c,m):this]}function d(c){this._events={},this._newListener=!1,this._removeListener=!1,this.verboseMemoryLeak=!1,M.call(this,c)}d.EventEmitter2=d,d.prototype.listenTo=function(c,m,b){if(typeof c!="object")throw TypeError("target musts be an object");var p=this;b=W(b,{on:r,off:r,reducers:r},{on:K,off:K,reducers:Y});function f(v){if(typeof v!="object")throw TypeError("events must be an object");var T=b.reducers,h=de.call(p,c),x;h===-1?x=new B(p,c,b):x=p._observers[h];for(var S=A(v),N=S.length,L,z=typeof T=="function",D=0;D<N;D++)L=S[D],x.subscribe(L,v[L]||L,z?T:T&&T[L])}return i(m)?f(j(m)):f(typeof m=="string"?j(m.split(/\s+/)):m),this},d.prototype.stopListeningTo=function(c,m){var b=this._observers;if(!b)return!1;var p=b.length,f,v=!1;if(c&&typeof c!="object")throw TypeError("target should be an object");for(;p-- >0;)f=b[p],(!c||f._target===c)&&(f.unsubscribe(m),v=!0);return v},d.prototype.delimiter=".",d.prototype.setMaxListeners=function(c){c!==r&&(this._maxListeners=c,this._conf||(this._conf={}),this._conf.maxListeners=c)},d.prototype.getMaxListeners=function(){return this._maxListeners},d.prototype.event="",d.prototype.once=function(c,m,b){return this._once(c,m,!1,b)},d.prototype.prependOnceListener=function(c,m,b){return this._once(c,m,!0,b)},d.prototype._once=function(c,m,b,p){return this._many(c,1,m,b,p)},d.prototype.many=function(c,m,b,p){return this._many(c,m,b,!1,p)},d.prototype.prependMany=function(c,m,b,p){return this._many(c,m,b,!0,p)},d.prototype._many=function(c,m,b,p,f){var v=this;if(typeof b!="function")throw new Error("many only accepts instances of Function");function T(){return--m===0&&v.off(c,T),b.apply(this,arguments)}return T._origin=b,this._on(c,T,p,f)},d.prototype.emit=function(){if(!this._events&&!this._all)return!1;this._events||I.call(this);var c=arguments[0],m,b=this.wildcard,p,f,v,T,h;if(c==="newListener"&&!this._newListener&&!this._events.newListener)return!1;if(b&&(m=c,c!=="newListener"&&c!=="removeListener"&&typeof c=="object")){if(f=c.length,a){for(v=0;v<f;v++)if(typeof c[v]=="symbol"){h=!0;break}}h||(c=c.join(this.delimiter))}var x=arguments.length,S;if(this._all&&this._all.length)for(S=this._all.slice(),v=0,f=S.length;v<f;v++)switch(this.event=c,x){case 1:S[v].call(this,c);break;case 2:S[v].call(this,c,arguments[1]);break;case 3:S[v].call(this,c,arguments[1],arguments[2]);break;default:S[v].apply(this,arguments)}if(b)S=[],X.call(this,S,m,this.listenerTree,0,f);else if(S=this._events[c],typeof S=="function"){switch(this.event=c,x){case 1:S.call(this);break;case 2:S.call(this,arguments[1]);break;case 3:S.call(this,arguments[1],arguments[2]);break;default:for(p=new Array(x-1),T=1;T<x;T++)p[T-1]=arguments[T];S.apply(this,p)}return!0}else S&&(S=S.slice());if(S&&S.length){if(x>3)for(p=new Array(x-1),T=1;T<x;T++)p[T-1]=arguments[T];for(v=0,f=S.length;v<f;v++)switch(this.event=c,x){case 1:S[v].call(this);break;case 2:S[v].call(this,arguments[1]);break;case 3:S[v].call(this,arguments[1],arguments[2]);break;default:S[v].apply(this,p)}return!0}else if(!this.ignoreErrors&&!this._all&&c==="error")throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},d.prototype.emitAsync=function(){if(!this._events&&!this._all)return!1;this._events||I.call(this);var c=arguments[0],m=this.wildcard,b,p,f,v,T,h;if(c==="newListener"&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);if(m&&(b=c,c!=="newListener"&&c!=="removeListener"&&typeof c=="object")){if(v=c.length,a){for(T=0;T<v;T++)if(typeof c[T]=="symbol"){p=!0;break}}p||(c=c.join(this.delimiter))}var x=[],S=arguments.length,N;if(this._all)for(T=0,v=this._all.length;T<v;T++)switch(this.event=c,S){case 1:x.push(this._all[T].call(this,c));break;case 2:x.push(this._all[T].call(this,c,arguments[1]));break;case 3:x.push(this._all[T].call(this,c,arguments[1],arguments[2]));break;default:x.push(this._all[T].apply(this,arguments))}if(m?(N=[],X.call(this,N,b,this.listenerTree,0)):N=this._events[c],typeof N=="function")switch(this.event=c,S){case 1:x.push(N.call(this));break;case 2:x.push(N.call(this,arguments[1]));break;case 3:x.push(N.call(this,arguments[1],arguments[2]));break;default:for(f=new Array(S-1),h=1;h<S;h++)f[h-1]=arguments[h];x.push(N.apply(this,f))}else if(N&&N.length){if(N=N.slice(),S>3)for(f=new Array(S-1),h=1;h<S;h++)f[h-1]=arguments[h];for(T=0,v=N.length;T<v;T++)switch(this.event=c,S){case 1:x.push(N[T].call(this));break;case 2:x.push(N[T].call(this,arguments[1]));break;case 3:x.push(N[T].call(this,arguments[1],arguments[2]));break;default:x.push(N[T].apply(this,f))}}else if(!this.ignoreErrors&&!this._all&&c==="error")return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(x)},d.prototype.on=function(c,m,b){return this._on(c,m,!1,b)},d.prototype.prependListener=function(c,m,b){return this._on(c,m,!0,b)},d.prototype.onAny=function(c){return this._onAny(c,!1)},d.prototype.prependAny=function(c){return this._onAny(c,!0)},d.prototype.addListener=d.prototype.on,d.prototype._onAny=function(c,m){if(typeof c!="function")throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),m?this._all.unshift(c):this._all.push(c),this},d.prototype._on=function(c,m,b,p){if(typeof c=="function")return this._onAny(c,m),this;if(typeof m!="function")throw new Error("on only accepts instances of Function");this._events||I.call(this);var f=this,v;return p!==r&&(v=u.call(this,c,m,p),m=v[0],f=v[1]),this._newListener&&this.emit("newListener",c,m),this.wildcard?(we.call(this,c,m,b),f):(this._events[c]?(typeof this._events[c]=="function"&&(this._events[c]=[this._events[c]]),b?this._events[c].unshift(m):this._events[c].push(m),!this._events[c].warned&&this._maxListeners>0&&this._events[c].length>this._maxListeners&&(this._events[c].warned=!0,k.call(this,this._events[c].length,c))):this._events[c]=m,f)},d.prototype.off=function(c,m){if(typeof m!="function")throw new Error("removeListener only takes instances of Function");var b,p=[];if(this.wildcard){var f=typeof c=="string"?c.split(this.delimiter):c.slice();if(p=X.call(this,null,f,this.listenerTree,0),!p)return this}else{if(!this._events[c])return this;b=this._events[c],p.push({_listeners:b})}for(var v=0;v<p.length;v++){var T=p[v];if(b=T._listeners,i(b)){for(var h=-1,x=0,S=b.length;x<S;x++)if(b[x]===m||b[x].listener&&b[x].listener===m||b[x]._origin&&b[x]._origin===m){h=x;break}if(h<0)continue;return this.wildcard?T._listeners.splice(h,1):this._events[c].splice(h,1),b.length===0&&(this.wildcard?delete T._listeners:delete this._events[c]),this._removeListener&&this.emit("removeListener",c,m),this}else(b===m||b.listener&&b.listener===m||b._origin&&b._origin===m)&&(this.wildcard?delete T._listeners:delete this._events[c],this._removeListener&&this.emit("removeListener",c,m))}return this.listenerTree&&at(this.listenerTree),this},d.prototype.offAny=function(c){var m=0,b=0,p;if(c&&this._all&&this._all.length>0){for(p=this._all,m=0,b=p.length;m<b;m++)if(c===p[m])return p.splice(m,1),this._removeListener&&this.emit("removeListenerAny",c),this}else{if(p=this._all,this._removeListener)for(m=0,b=p.length;m<b;m++)this.emit("removeListenerAny",p[m]);this._all=[]}return this},d.prototype.removeListener=d.prototype.off,d.prototype.removeAllListeners=function(c){if(c===r)return!this._events||I.call(this),this;if(this.wildcard){var m=X.call(this,null,c,this.listenerTree,0),b,p;if(!m)return this;for(p=0;p<m.length;p++)b=m[p],b._listeners=null;this.listenerTree&&at(this.listenerTree)}else this._events&&(this._events[c]=null);return this},d.prototype.listeners=function(c){var m=this._events,b,p,f,v,T;if(c===r){if(this.wildcard)throw Error("event name required for wildcard emitter");if(!m)return[];for(b=A(m),v=b.length,f=[];v-- >0;)p=m[b[v]],typeof p=="function"?f.push(p):f.push.apply(f,p);return f}else{if(this.wildcard){if(T=this.listenerTree,!T)return[];var h=[],x=typeof c=="string"?c.split(this.delimiter):c.slice();return X.call(this,h,x,T,0),h}return m?(p=m[c],p?typeof p=="function"?[p]:p:[]):[]}},d.prototype.eventNames=function(c){var m=this._events;return this.wildcard?le.call(this,this.listenerTree,[],null,c):m?A(m):[]},d.prototype.listenerCount=function(c){return this.listeners(c).length},d.prototype.hasListeners=function(c){if(this.wildcard){var m=[],b=typeof c=="string"?c.split(this.delimiter):c.slice();return X.call(this,m,b,this.listenerTree,0),m.length>0}var p=this._events,f=this._all;return!!(f&&f.length||p&&(c===r?A(p).length:p[c]))},d.prototype.listenersAny=function(){return this._all?this._all:[]},d.prototype.waitFor=function(c,m){var b=this,p=typeof m;return p==="number"?m={timeout:m}:p==="function"&&(m={filter:m}),m=W(m,{timeout:0,filter:r,handleError:!1,Promise,overload:!1},{filter:K,Promise:H}),ye(m.Promise,function(f,v,T){function h(){var x=m.filter;if(!(x&&!x.apply(b,arguments)))if(b.off(c,h),m.handleError){var S=arguments[0];S?v(S):f(P.apply(null,arguments).slice(1))}else f(P.apply(null,arguments))}T(function(){b.off(c,h)}),b._on(c,h,!1)},{timeout:m.timeout,overload:m.overload})};function w(c,m,b){b=W(b,{Promise,timeout:0,overload:!1},{Promise:H});var p=b.Promise;return ye(p,function(f,v,T){var h;if(typeof c.addEventListener=="function"){h=function(){f(P.apply(null,arguments))},T(function(){c.removeEventListener(m,h)}),c.addEventListener(m,h,{once:!0});return}var x=function(){S&&c.removeListener("error",S),f(P.apply(null,arguments))},S;m!=="error"&&(S=function(N){c.removeListener(m,x),v(N)},c.once("error",S)),T(function(){S&&c.removeListener("error",S),c.removeListener(m,x)}),c.once(m,x)},{timeout:b.timeout,overload:b.overload})}var E=d.prototype;Object.defineProperties(d,{defaultMaxListeners:{get:function(){return E._maxListeners},set:function(c){if(typeof c!="number"||c<0||Number.isNaN(c))throw TypeError("n must be a non-negative number");E._maxListeners=c},enumerable:!0},once:{value:w,writable:!0,configurable:!0}}),Object.defineProperties(E,{_maxListeners:{value:s,writable:!0,configurable:!0},_observers:{value:null,writable:!0,configurable:!0}}),typeof r=="function"&&r.amd?r(function(){return d}):t.exports=d})()})(dp);function go(){return go=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},go.apply(this,arguments)}class gp extends Error{constructor(e){super(e),this.name="ProviderError"}}new gp("Wallet is not signed in. Connect a wallet and try again.");function pp(t){return mp.some(e=>e.predicate(t))}const mp=[{name:"Decentraland Exception",predicate:yp},{name:"0x v3 Exception",predicate:bp}],vp=/^Decentraland Login\nEphemeral address: 0x[a-fA-F0-9]{40}\nExpiration: (\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2}):(\d{2}(?:\.\d*)?)((-(\d{2}):(\d{2})|Z)?)$/;function yp(t){try{const e=Mn(t);return vp.test(e)}catch{return!1}}function bp(t){const e=new $t(wp);try{return e.decodeFunctionData("OrderWithHash",t),!0}catch{return!1}}const wp=[{inputs:[{components:[{internalType:"address",name:"makerAddress",type:"address"},{internalType:"address",name:"takerAddress",type:"address"},{internalType:"address",name:"feeRecipientAddress",type:"address"},{internalType:"address",name:"senderAddress",type:"address"},{internalType:"uint256",name:"makerAssetAmount",type:"uint256"},{internalType:"uint256",name:"takerAssetAmount",type:"uint256"},{internalType:"uint256",name:"makerFee",type:"uint256"},{internalType:"uint256",name:"takerFee",type:"uint256"},{internalType:"uint256",name:"expirationTimeSeconds",type:"uint256"},{internalType:"uint256",name:"salt",type:"uint256"},{internalType:"bytes",name:"makerAssetData",type:"bytes"},{internalType:"bytes",name:"takerAssetData",type:"bytes"},{internalType:"bytes",name:"makerFeeAssetData",type:"bytes"},{internalType:"bytes",name:"takerFeeAssetData",type:"bytes"}],internalType:"struct IEIP1271Data.Order",name:"order",type:"tuple"},{internalType:"bytes32",name:"orderHash",type:"bytes32"}],name:"OrderWithHash",outputs:[],stateMutability:"pure",type:"function"}],Ap=mt(`Ethereum Signed Message:
`),Ep=t=>Or(t)?q(t):mt(t),xp=t=>{const e=Ep(t);return pp(e)?e:ht([Ap,mt(String(e.length)),e])},Ga=async(t,e,r,n)=>new Qe.reader.OnChainReader(n).isValidSignature(t,e,r);async function _p(t){return Array.isArray(t)?Promise.all(t.map(e=>ot(e))):ot(t)}class as{get utils(){return this.provider.utils}constructor(e,r){this.client=e,this.provider=r,this.singleNetworkSigners={},this._isSigner=!0,this._isSequenceSigner=!0}async getAddress(){return this.client.getAddress()}connect(e){if(!Vo.is(e))throw new Error("SequenceSigner can only be connected to a SequenceProvider");return new as(this.client,e)}getSigner(e){if(!e)return this;const r=this.provider.toChainId(e);return this.singleNetworkSigners[r]||(this.singleNetworkSigners[r]=new Yu(this.client,this.provider,r)),this.singleNetworkSigners[r]}useChainId(e){return this.provider.toChainId(e)||this.client.getChainId()}async signMessage(e,r){const{eip6492:n=!0}=r||{},i=this.useChainId(r==null?void 0:r.chainId);return this.client.signMessage(e,{eip6492:n,chainId:i})}async signTypedData(e,r,n,i){const{eip6492:s=!0}=i||{},o=this.useChainId(i==null?void 0:i.chainId);return this.client.signTypedData({domain:e,types:r,message:n},{eip6492:s,chainId:o})}getProvider(e){return this.provider.getProvider(e)}async sendTransaction(e,r){const n=this.useChainId(r==null?void 0:r.chainId),i=await _p(e),s=await this.client.sendTransaction(i,{chainId:n}),o=this.getProvider(n);try{return await Dn(async function(){const a=await o.getTransaction(s);return a?o._wrapTransaction(a,s):void 0},{onceBlock:o})}catch(a){throw a.transactionHash=s,a}}async getWalletConfig(e){const r=this.useChainId(e);return this.client.getOnchainWalletConfig({chainId:r})}getNetworks(){return this.client.getNetworks()}async getBalance(e,r){return this.getProvider(r==null?void 0:r.chainId).getBalance(this.getAddress(),e)}async estimateGas(e,r){return this.getProvider(r==null?void 0:r.chainId).estimateGas(e)}async call(e,r,n){return this.getProvider(n==null?void 0:n.chainId).call(e,r)}getChainId(){return Promise.resolve(this.client.getChainId())}async getGasPrice(e){return this.getProvider(e==null?void 0:e.chainId).getGasPrice()}async getFeeData(e){return this.getProvider(e==null?void 0:e.chainId).getFeeData()}async resolveName(e){const r=await this.provider.resolveName(e);if(r===null)throw new Error(`ENS name not found: ${e}`);return r}_checkProvider(e){}populateTransaction(e){throw new Error("SequenceSigner does not support populateTransaction")}checkTransaction(e){throw new Error("SequenceSigner does not support checkTransaction")}getTransactionCount(e){throw new Error("SequenceSigner does not support getTransactionCount")}signTransaction(e){throw new Error("SequenceWallet does not support signTransaction, use sendTransaction instead.")}static is(e){return e&&typeof e=="object"&&e._isSequenceSigner===!0}}class Yu extends as{constructor(e,r,n){super(e,r.getProvider(n)),this.chainId=n,this._isSingleNetworkSequenceSigner=!0}_useChainId(e){const r=this.provider.toChainId(e);if(r&&r!==this.chainId)throw new Error(`This signer only supports the network ${this.chainId}, but ${r} was requested.`);return r||this.provider.toChainId(this.chainId)}useChainId(e){return this._useChainId(e)}getChainId(){return Promise.resolve(this.provider.toChainId(this.chainId))}getProvider(e){return super.getProvider(this._useChainId(e))}getSigner(e){if(this._useChainId(e)!==this.chainId)throw new Error("Unreachable code");return this}static is(e){return e&&typeof e=="object"&&e._isSingleNetworkSequenceSigner===!0}}class Sp{constructor(e){if(this.signer=e,Yu.is(e))throw new Error("WalletUtils does not support SingleNetworkSequenceSigner")}signMessage(e,r,n){return this.signer.signMessage(e,{chainId:r,eip6492:n})}signTypedData(e,r,n,i,s){return this.signer.signTypedData(e,r,n,{chainId:i,eip6492:s})}async isValidSignature(e,r,n,i){return Ga(e,r,n,this.signer.getProvider(i))}async isValidMessageSignature(e,r,n,i){const s=this.signer.getProvider(i),o=xp(r),a=Td(o);return Ga(e,a,n,s)}isValidTypedDataSignature(e,r,n,i){return this.isValidSignature(e,Pd(r),n,i)}}class Vo extends _d{constructor(e,r,n=fu){super(e.getChainId()),this.client=e,this.providerFor=r,this.networks=n,this.singleNetworkProviders={},this._isSequenceProvider=!0,this.utils=void 0,this.signer=void 0,e.onConnect(i=>{this.emit("connect",i)}),e.onDisconnect(i=>{this.emit("disconnect",i)}),e.onDefaultChainIdChanged(i=>{this.emit("chainChanged",i)}),e.onAccountsChanged(i=>{this.emit("accountsChanged",i)}),this.signer=new as(this.client,this),this.utils=new Sp(this.signer)}getSigner(e){return this.signer.getSigner(e)}connect(e){return this.client.connect(e)}disconnect(){return this.client.disconnect()}isConnected(){return this.client.isConnected()}getSession(){return this.client.getSession()}listAccounts(){return[this.client.getAddress()]}getAddress(){return this.client.getAddress()}getNetworks(){return this.client.getNetworks()}getChainId(){return this.client.getChainId()}setDefaultChainId(e){return this.client.setDefaultChainId(this.toChainId(e))}isOpened(){return this.client.isOpened()}closeWallet(){return this.client.closeWallet()}getWalletContext(){return this.client.getWalletContext()}async getWalletConfig(e){const r=await this.useChainId(e);return this.client.getOnchainWalletConfig({chainId:r})}authorize(e){return this.client.connect(go({},e,{authorize:!0}))}async openWallet(e,r){return await this.client.openWallet(e,r),!0}toChainId(e){if(e===void 0)return;const r=eo(this.networks,e);if(!r)throw new Error(`Unsupported network ${e}`);return r.chainId}async useChainId(e){return this.toChainId(e)||this.client.getChainId()}getProvider(e){if(!e)return this;const r=this.toChainId(e);return this.singleNetworkProviders[r]||(this.singleNetworkProviders[r]=new Ip(this.client,this.providerFor,r)),this.singleNetworkProviders[r]}async _getSubprovider(e){const r=await this.useChainId(e),n=this.providerFor(r);if(!n)throw new Error(`Unsupported network ${r}`);return n}async perform(e,r){var n;if(e==="eth_chainId")return mo(await this.useChainId());if(e==="eth_accounts")return[this.client.getAddress()];if(e==="wallet_switchEthereumChain"){const o=r[0],a=Qu(o);return this.setDefaultChainId(a)}if(e==="eth_sendTransaction"||e==="eth_sign"||e==="eth_signTypedData"||e==="eth_signTypedData_v4"||e==="personal_sign"||e==="sequence_sign"||e==="sequence_signTypedData_v4")return this.client.send({method:e,params:r},this.getChainId());const i=await this._getSubprovider(),s=(n=i.prepareRequest(e,r))!=null?n:[e,r];return i.send(s[0],s[1])}send(e,r){return this.perform(e,r)}request(e){return this.perform(e.method,e.params)}async detectNetwork(){const e=this.client.getChainId(),r=eo(this.networks,e);if(!r)throw new Error(`Unknown network ${e}`);return r}async waitForTransaction(e,r,n,i){return(await this._getSubprovider(i==null?void 0:i.chainId)).waitForTransaction(e,r,n)}async getBlockNumber(e){return(await this._getSubprovider(e==null?void 0:e.chainId)).getBlockNumber()}async getGasPrice(e){return(await this._getSubprovider(e==null?void 0:e.chainId)).getGasPrice()}async getBalance(e,r,n){return(await this._getSubprovider(n==null?void 0:n.chainId)).getBalance(e,r)}async getTransactionCount(e,r,n){return(await this._getSubprovider(n==null?void 0:n.chainId)).getTransactionCount(e,r)}async getCode(e,r,n){return(await this._getSubprovider(n==null?void 0:n.chainId)).getCode(e,r)}async getStorageAt(e,r,n,i){return(await this._getSubprovider(i==null?void 0:i.chainId)).getStorageAt(e,r,n)}async call(e,r,n){return(await this._getSubprovider(n==null?void 0:n.chainId)).call(e,r)}async estimateGas(e,r){return(await this._getSubprovider(r==null?void 0:r.chainId)).estimateGas(e)}async getBlock(e,r){return(await this._getSubprovider(r==null?void 0:r.chainId)).getBlock(e)}async getTransaction(e,r){return(await this._getSubprovider(r==null?void 0:r.chainId)).getTransaction(e)}async getLogs(e,r){return(await this._getSubprovider(r==null?void 0:r.chainId)).getLogs(e)}async supportsENS(){return(await this.getNetworks()).some(r=>r.chainId===1)}async getResolver(e){return await this.supportsENS()?(await this._getSubprovider(1)).getResolver(e):null}async resolveName(e){return Gl(await e)?e:await this.supportsENS()?(await this._getSubprovider(1)).resolveName(e):null}async lookupAddress(e){return await this.supportsENS()?(await this._getSubprovider(1)).lookupAddress(e):null}async getAvatar(e){return await this.supportsENS()?(await this._getSubprovider(1)).getAvatar(e):null}}Vo.is=t=>t&&typeof t=="object"&&t._isSequenceProvider===!0;function Qu(t){return typeof t=="object"?Qu(t.chainId):O.from(t).toNumber()}class Ip extends Vo{constructor(e,r,n){super(e,r),this.chainId=n,this._isSingleNetworkSequenceProvider=!0}_useChainId(e){const r=this.toChainId(e);if(r&&r!==this.chainId)throw new Error(`This provider only supports the network ${this.chainId}, but ${r} was requested.`);return r||super.toChainId(this.chainId)}useChainId(e){return Promise.resolve(this._useChainId(e))}getChainId(){return super.toChainId(this.chainId)}async getNetwork(){const e=await this.client.getNetworks(),r=eo(e,this.chainId);if(!r)throw new Error(`Unsupported network ${this.chainId}`);return r}getProvider(e){if(this._useChainId(e)!==this.chainId)throw new Error("Unreachable code");return this}getSigner(e){return super.getSigner(this._useChainId(e))}setDefaultChainId(e){throw new Error(`This provider only supports the network ${this.chainId}; use the parent provider to switch networks.`)}static is(e){return e&&typeof e=="object"&&e._isSingleNetworkSequenceProvider===!0}}Qe.transaction;const Np={title:"Wallet",description:"undefined"};function ja(t){const e={a:"a",div:"div",h1:"h1",header:"header",p:"p",...Va(),...t.components};return Mt.jsxs(Mt.Fragment,{children:[Mt.jsx(e.header,{children:Mt.jsxs(e.h1,{id:"wallet",children:["Wallet",Mt.jsx(e.a,{"aria-hidden":"true",tabIndex:"-1",href:"#wallet",children:Mt.jsx(e.div,{"data-autolink-icon":!0})})]})}),`
`,Mt.jsx(e.p,{children:"Sequence Universal Wallet gives you a friendly, non-custodial wallet for your users with multi-chain support and seamless integration with a focus on web2.5 or web3 users."}),`
`,Mt.jsx(e.p,{children:`Most wallets for Ethereum have a single private key that has full control over a wallet, i.e. an Externally Owned Account (EOAs).
However, a Sequence wallet is a Smart Contract that is deployed on the blockchain and which can be controlled by multiple private keys.
These keys are meant to be controlled by the wallet owner and provide added security since more than one of these keys would need to be
compromised for the wallet to be compromised.`}),`
`,Mt.jsxs(e.p,{children:["Check out how to integrate our Universal Wallet via our ",Mt.jsx(e.a,{href:"/solutions/builder/wallet-sdks",children:"Builder Console"})," or continue with our ",Mt.jsx(e.a,{href:"/solutions/wallets/universal-wallet/quickstart",children:"Quickstart"})," guide to integrate with Sequence Universal Wallet via our SDK package."]})]})}function kp(t={}){const{wrapper:e}={...Va(),...t.components};return e?Mt.jsx(e,{...t,children:Mt.jsx(ja,{...t})}):ja(t)}export{kp as default,Np as frontmatter};
