# Verification

In the event that you need to verify the ownership of an Embedded Wallet address, the following example can be used to prove ownership, with the help of an off-chain store of wallet nonces.
 
## Example: Server Address Ownership Verification

::::steps

### Generate & Store Random Nonce

On the server or decentralized compute, generate a random nonce, store it in a database, and return the nonce to the client when needed.

Example code in Typescript using `ethers@5.7.2`

```typescript
import { ethers } from 'ethers'
...
const randomNonce = ethers.BigNumber.from(
  ethers.utils.hexlify(ethers.utils.randomBytes(20))
)

... store randomNonce in a database
... send nonce to front end
```

### Client calls `sessionAuthProof`

The client requests the `nonce` and runs

```typescript
import { SequenceWaaS } from '@0xsequence/waas'
 
const sequence = new SequenceWaaS({
  projectAccessKey: `${process.env.PROJECT_ACCESS_KEY}`,
  waasConfigKey: `${process.env.WAAS_CONFIG_KEY}`,
  network: 'arbitrum-nova'
})

... obtain nonce from database
const authProof = sequence.sessionAuthProof({ nonce }) 
```

### Transmittance of Signature & Session ID to Server

Next, retrieve the SessionID from the logged in user

```typescript
const waas = new SequenceWaaS({
  projectAccessKey: `${process.env.PROJECT_ACCESS_KEY}`,
  waasConfigKey: `${process.env.WAAS_CONFIG_KEY}`,
  network: 'arbitrum-nova'
})
 
await waas.signIn({ idToken }, "Computer")
 
const sessions = await waas.listSessions()

console.log(sessions[0])

... return sessions[0] to server
```

And send the `authProof` with `SessionID` to the server

### Server Verification

Finally, verify the signature and message came from the user owned wallet

```typescript
import { sequence } from "0xsequence";

...
const api = new sequence.api.SequenceAPIClient("https://api.sequence.app");
const message = `SessionAuthProof ${sessionId} ${walletAddress} ${nonce}`

const isValid = await api.isValidMessageSignature(
    walletAddress,
    message,
    signature,
    chainId // e.g. 1 for mainnet, 42161 for arbitrum one, etc.
);
 
console.log(isValid);
```
:::::

