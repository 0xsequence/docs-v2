# Read from Blockchain

Reading from the blockchain is done using Unity-Native implementation of our [Sequence Indexer](/api/indexer/overview).

We recommend creating an instance of the [`ChainIndexer` class](https://github.com/0xsequence/sequence-unity/blob/master/Assets/SequenceSDK/Indexer/ChainIndexer.cs). This will expose you to all the functionality offered by the [`IIndexer` interface](https://github.com/0xsequence/sequence-unity/blob/master/Assets/SequenceSDK/Indexer/IIndexer.cs).

```
IIndexer polygonIndexer = new ChainIndexer(Chain.Polygon);
```

You can check if the indexer API for your given chain is up and running using the `Ping` async Task. This can be useful if a request is failing. During development, you can also check the status of our indexers on [our status page](https://status.sequence.info/).

```
IIndexer chainIndexer = new ChainIndexer(chain);
bool indexerIsWorking = await chainIndexer.Ping();
```

## Get Balance

To check the Ether (or whatever your network's default gas currency is) balance of a user, use the `GetEtherBalance` async Task.

```
IIndexer chainIndexer = new ChainIndexer(chain);
EtherBalance balance = await chainIndexer.GetEtherBalance(address);
BigInteger balanceInWei = balance.balanceWei;
```

## Get Token Balances

To fetch the token balances for a user you'll want to use the `GetTokenBalances` async Task.

```
IIndexer chainIndexer = new ChainIndexer(chain);
GetTokenBalancesReturn balances = await chainIndexer.GetTokenBalances(new GetTokenBalancesArgs(address));
TokenBalance[] tokenBalances = balances.balances;
```

When fetched this way, you will only receive one token instance for each smart contract. Fetching, without specifying the address, is useful to determine which contracts your player owns tokens from and which ERC20s they have in their wallet.

To fetch individual balances for ERC721 or ERC1155 tokens, you'll want to specify the contract in your `GetTokenBalancesArgs`.

```
IIndexer chainIndexer = new ChainIndexer(chain);
GetTokenBalancesReturn balances = await chainIndexer.GetTokenBalances(new GetTokenBalancesArgs(userAddress, contractAddress));
TokenBalance[] tokenBalances = balances.balances;
```

If the player has many tokenIds for a given contract (or owns tokens from many contracts), you'll have to deal with pagination. In this case, you'll want to check the `Page` you receive in your `GetTokenBalancesReturn` to see if it has more and then if it does make another request, including the Page.

```
IIndexer chainIndexer = new ChainIndexer(chain);
GetTokenBalancesReturn balances = await chainIndexer.GetTokenBalances(new GetTokenBalancesArgs(userAddress, contractAddress));
List<TokenBalance> finalResult = new List<TokenBalance>();
TokenBalance[] tokenBalances = balances.balances;
AddItemsFromArrayToList(tokenBalances, finalResult);
while (tokenBalances.page.more) {
    tokenBalances = await GetTokenBalances(new GetTokenBalancesArgs(accountAddress, contractAddress, tokenBalances.page));
    AddItemsFromArrayToList(tokenBalances, finalResult);
}
```

To simplify this operation, we've created a wrapper `GetTokenBalancesOrganizedInDictionary`. This will fetch all of the TokenBalances for a given contractAddress and userAccountAddress and organize them into a Dictionary mapping tokenID (BigInteger) to TokenBalance. In general, you'll want to use this most often.

```
IIndexer chainIndexer = new ChainIndexer(chain);
Dictionary<BigInteger, TokenBalance> tokenBalancesDictionary = await chainIndexer.GetTokenBalancesOrganizedInDictionary(accountAddress, contractAddress);
```

This will make checking the respective balance for each token id much easier as well.

## Get Token Supplies

If you need to fetch the total token supply for a given smart contract, you can use the `GetTokenSupplies` async Task.

```
IIndexer chainIndexer = new ChainIndexer(chain);
GetTokenSuppliesReturn tokenSupplies = await chainIndexer.GetTokenSupplies(new GetTokenSuppliesArgs(contractAddress))
```

We don't expect this to be a very common operation, but it is exposed for you just in case you need it.

## Get Transaction history

To fetch the transaction history for a given account, you'll want to use the `GetTransactionHistory` method.

```
IIndexer chainIndexer = new ChainIndexer(chain);
GetTransactionHistoryReturn history = await chainIndexer.GetTransactionHistory(
    new GetTransactionHistoryArgs(new TransactionHistoryFilter()
    {
        accountAddress = userAccountAddress;
    })
);
```

The `TransactionHistoryFilter` object allows you to specify how you want to filter your transaction history query, e.g. by account address(es), contract address(es), etc. More info [here](/api/indexer/examples/transaction-history).
